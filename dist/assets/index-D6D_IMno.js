(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Fw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ug={exports:{}},Bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function Gw(){if(T_)return Bl;T_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Bl.Fragment=e,Bl.jsx=n,Bl.jsxs=n,Bl}var S_;function Kw(){return S_||(S_=1,ug.exports=Gw()),ug.exports}var R=Kw(),cg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function Yw(){if(w_)return De;w_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=T&&k[T]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,K={};function L(k,re,ue){this.props=k,this.context=re,this.refs=K,this.updater=ue||x}L.prototype.isReactComponent={},L.prototype.setState=function(k,re){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,re,"setState")},L.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Y(){}Y.prototype=L.prototype;function $(k,re,ue){this.props=k,this.context=re,this.refs=K,this.updater=ue||x}var X=$.prototype=new Y;X.constructor=$,B(X,L.prototype),X.isPureReactComponent=!0;var ne=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function C(k,re,ue,le,me,we){return ue=we.ref,{$$typeof:r,type:k,key:re,ref:ue!==void 0?ue:null,props:we}}function A(k,re){return C(k.type,re,void 0,void 0,void 0,k.props)}function I(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function M(k){var re={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return re[ue]})}var D=/\/+/g;function V(k,re){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):re.toString(36)}function N(){}function Be(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(N,N):(k.status="pending",k.then(function(re){k.status==="pending"&&(k.status="fulfilled",k.value=re)},function(re){k.status==="pending"&&(k.status="rejected",k.reason=re)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Xe(k,re,ue,le,me){var we=typeof k;(we==="undefined"||we==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(we){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case r:case e:pe=!0;break;case b:return pe=k._init,Xe(pe(k._payload),re,ue,le,me)}}if(pe)return me=me(k),pe=le===""?"."+V(k,0):le,ne(me)?(ue="",pe!=null&&(ue=pe.replace(D,"$&/")+"/"),Xe(me,re,ue,"",function(Et){return Et})):me!=null&&(I(me)&&(me=A(me,ue+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(D,"$&/")+"/")+pe)),re.push(me)),1;pe=0;var dt=le===""?".":le+":";if(ne(k))for(var ke=0;ke<k.length;ke++)le=k[ke],we=dt+V(le,ke),pe+=Xe(le,re,ue,we,me);else if(ke=w(k),typeof ke=="function")for(k=ke.call(k),ke=0;!(le=k.next()).done;)le=le.value,we=dt+V(le,ke++),pe+=Xe(le,re,ue,we,me);else if(we==="object"){if(typeof k.then=="function")return Xe(Be(k),re,ue,le,me);throw re=String(k),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return pe}function Z(k,re,ue){if(k==null)return k;var le=[],me=0;return Xe(k,le,"","",function(we){return re.call(ue,we,me++)}),le}function oe(k){if(k._status===-1){var re=k._result;re=re(),re.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=re)}if(k._status===1)return k._result.default;throw k._result}var de=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ae(){}return De.Children={map:Z,forEach:function(k,re,ue){Z(k,function(){re.apply(this,arguments)},ue)},count:function(k){var re=0;return Z(k,function(){re++}),re},toArray:function(k){return Z(k,function(re){return re})||[]},only:function(k){if(!I(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},De.Component=L,De.Fragment=n,De.Profiler=o,De.PureComponent=$,De.StrictMode=s,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,De.__COMPILER_RUNTIME={__proto__:null,c:function(k){return ae.H.useMemoCache(k)}},De.cache=function(k){return function(){return k.apply(null,arguments)}},De.cloneElement=function(k,re,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=B({},k.props),me=k.key,we=void 0;if(re!=null)for(pe in re.ref!==void 0&&(we=void 0),re.key!==void 0&&(me=""+re.key),re)!se.call(re,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&re.ref===void 0||(le[pe]=re[pe]);var pe=arguments.length-2;if(pe===1)le.children=ue;else if(1<pe){for(var dt=Array(pe),ke=0;ke<pe;ke++)dt[ke]=arguments[ke+2];le.children=dt}return C(k.type,me,void 0,void 0,we,le)},De.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},De.createElement=function(k,re,ue){var le,me={},we=null;if(re!=null)for(le in re.key!==void 0&&(we=""+re.key),re)se.call(re,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=re[le]);var pe=arguments.length-2;if(pe===1)me.children=ue;else if(1<pe){for(var dt=Array(pe),ke=0;ke<pe;ke++)dt[ke]=arguments[ke+2];me.children=dt}if(k&&k.defaultProps)for(le in pe=k.defaultProps,pe)me[le]===void 0&&(me[le]=pe[le]);return C(k,we,void 0,void 0,null,me)},De.createRef=function(){return{current:null}},De.forwardRef=function(k){return{$$typeof:g,render:k}},De.isValidElement=I,De.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:oe}},De.memo=function(k,re){return{$$typeof:p,type:k,compare:re===void 0?null:re}},De.startTransition=function(k){var re=ae.T,ue={};ae.T=ue;try{var le=k(),me=ae.S;me!==null&&me(ue,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ae,de)}catch(we){de(we)}finally{ae.T=re}},De.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},De.use=function(k){return ae.H.use(k)},De.useActionState=function(k,re,ue){return ae.H.useActionState(k,re,ue)},De.useCallback=function(k,re){return ae.H.useCallback(k,re)},De.useContext=function(k){return ae.H.useContext(k)},De.useDebugValue=function(){},De.useDeferredValue=function(k,re){return ae.H.useDeferredValue(k,re)},De.useEffect=function(k,re,ue){var le=ae.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(k,re)},De.useId=function(){return ae.H.useId()},De.useImperativeHandle=function(k,re,ue){return ae.H.useImperativeHandle(k,re,ue)},De.useInsertionEffect=function(k,re){return ae.H.useInsertionEffect(k,re)},De.useLayoutEffect=function(k,re){return ae.H.useLayoutEffect(k,re)},De.useMemo=function(k,re){return ae.H.useMemo(k,re)},De.useOptimistic=function(k,re){return ae.H.useOptimistic(k,re)},De.useReducer=function(k,re,ue){return ae.H.useReducer(k,re,ue)},De.useRef=function(k){return ae.H.useRef(k)},De.useState=function(k){return ae.H.useState(k)},De.useSyncExternalStore=function(k,re,ue){return ae.H.useSyncExternalStore(k,re,ue)},De.useTransition=function(){return ae.H.useTransition()},De.version="19.1.1",De}var A_;function um(){return A_||(A_=1,cg.exports=Yw()),cg.exports}var j=um();const Ie=Fw(j);var hg={exports:{}},ql={},fg={exports:{}},dg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function Qw(){return R_||(R_=1,(function(r){function e(Z,oe){var de=Z.length;Z.push(oe);e:for(;0<de;){var Ae=de-1>>>1,k=Z[Ae];if(0<o(k,oe))Z[Ae]=oe,Z[de]=k,de=Ae;else break e}}function n(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var oe=Z[0],de=Z.pop();if(de!==oe){Z[0]=de;e:for(var Ae=0,k=Z.length,re=k>>>1;Ae<re;){var ue=2*(Ae+1)-1,le=Z[ue],me=ue+1,we=Z[me];if(0>o(le,de))me<k&&0>o(we,le)?(Z[Ae]=we,Z[me]=de,Ae=me):(Z[Ae]=le,Z[ue]=de,Ae=ue);else if(me<k&&0>o(we,de))Z[Ae]=we,Z[me]=de,Ae=me;else break e}}return oe}function o(Z,oe){var de=Z.sortIndex-oe.sortIndex;return de!==0?de:Z.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var m=[],p=[],b=1,T=null,w=3,x=!1,B=!1,K=!1,L=!1,Y=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ne(Z){for(var oe=n(p);oe!==null;){if(oe.callback===null)s(p);else if(oe.startTime<=Z)s(p),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=n(p)}}function ae(Z){if(K=!1,ne(Z),!B)if(n(m)!==null)B=!0,se||(se=!0,V());else{var oe=n(p);oe!==null&&Xe(ae,oe.startTime-Z)}}var se=!1,C=-1,A=5,I=-1;function M(){return L?!0:!(r.unstable_now()-I<A)}function D(){if(L=!1,se){var Z=r.unstable_now();I=Z;var oe=!0;try{e:{B=!1,K&&(K=!1,$(C),C=-1),x=!0;var de=w;try{t:{for(ne(Z),T=n(m);T!==null&&!(T.expirationTime>Z&&M());){var Ae=T.callback;if(typeof Ae=="function"){T.callback=null,w=T.priorityLevel;var k=Ae(T.expirationTime<=Z);if(Z=r.unstable_now(),typeof k=="function"){T.callback=k,ne(Z),oe=!0;break t}T===n(m)&&s(m),ne(Z)}else s(m);T=n(m)}if(T!==null)oe=!0;else{var re=n(p);re!==null&&Xe(ae,re.startTime-Z),oe=!1}}break e}finally{T=null,w=de,x=!1}oe=void 0}}finally{oe?V():se=!1}}}var V;if(typeof X=="function")V=function(){X(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Be=N.port2;N.port1.onmessage=D,V=function(){Be.postMessage(null)}}else V=function(){Y(D,0)};function Xe(Z,oe){C=Y(function(){Z(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var de=w;w=oe;try{return Z()}finally{w=de}},r.unstable_requestPaint=function(){L=!0},r.unstable_runWithPriority=function(Z,oe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=w;w=Z;try{return oe()}finally{w=de}},r.unstable_scheduleCallback=function(Z,oe,de){var Ae=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ae+de:Ae):de=Ae,Z){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=de+k,Z={id:b++,callback:oe,priorityLevel:Z,startTime:de,expirationTime:k,sortIndex:-1},de>Ae?(Z.sortIndex=de,e(p,Z),n(m)===null&&Z===n(p)&&(K?($(C),C=-1):K=!0,Xe(ae,de-Ae))):(Z.sortIndex=k,e(m,Z),B||x||(B=!0,se||(se=!0,V()))),Z},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Z){var oe=w;return function(){var de=w;w=oe;try{return Z.apply(this,arguments)}finally{w=de}}}})(dg)),dg}var x_;function Xw(){return x_||(x_=1,fg.exports=Qw()),fg.exports}var gg={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function $w(){if(C_)return pn;C_=1;var r=um();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,p,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:p,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,pn.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(m,p,null,b)},pn.flushSync=function(m){var p=f.T,b=s.p;try{if(f.T=null,s.p=2,m)return m()}finally{f.T=p,s.p=b,s.d.f()}},pn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},pn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},pn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,T=g(b,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:x}):b==="script"&&s.d.X(m,{crossOrigin:T,integrity:w,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},pn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},pn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,T=g(b,p.crossOrigin);s.d.L(m,b,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},pn.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=g(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},pn.requestFormReset=function(m){s.d.r(m)},pn.unstable_batchedUpdates=function(m,p){return m(p)},pn.useFormState=function(m,p,b){return f.H.useFormState(m,p,b)},pn.useFormStatus=function(){return f.H.useHostTransitionStatus()},pn.version="19.1.1",pn}var I_;function Ab(){if(I_)return gg.exports;I_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gg.exports=$w(),gg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function Zw(){if(D_)return ql;D_=1;var r=Xw(),e=um(),n=Ab();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function m(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,l=d;break}if(E===l){_=!0,l=h,a=d;break}E=E.sibling}if(!_){for(E=d.child;E;){if(E===a){_=!0,a=d,l=h;break}if(E===l){_=!0,l=d,a=h;break}E=E.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function p(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=p(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case L:return"Profiler";case K:return"StrictMode";case ae:return"Suspense";case se:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case X:return(t.displayName||"Context")+".Provider";case $:return(t._context.displayName||"Context")+".Consumer";case ne:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return i=t.displayName||null,i!==null?i:Be(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Be(t(i))}catch{}}return null}var Xe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ae=[],k=-1;function re(t){return{current:t}}function ue(t){0>k||(t.current=Ae[k],Ae[k]=null,k--)}function le(t,i){k++,Ae[k]=t.current,t.current=i}var me=re(null),we=re(null),pe=re(null),dt=re(null);function ke(t,i){switch(le(pe,i),le(we,t),le(me,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?$v(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=$v(i),t=Zv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(me),le(me,t)}function Et(){ue(me),ue(we),ue(pe)}function Ne(t){t.memoizedState!==null&&le(dt,t);var i=me.current,a=Zv(i,t.type);i!==a&&(le(we,t),le(me,a))}function nn(t){we.current===t&&(ue(me),ue(we)),dt.current===t&&(ue(dt),Pl._currentValue=de)}var qe=Object.prototype.hasOwnProperty,nt=r.unstable_scheduleCallback,vt=r.unstable_cancelCallback,gn=r.unstable_shouldYield,En=r.unstable_requestPaint,rn=r.unstable_now,Ea=r.unstable_getCurrentPriorityLevel,Qr=r.unstable_ImmediatePriority,Tn=r.unstable_UserBlockingPriority,Fn=r.unstable_NormalPriority,Oi=r.unstable_LowPriority,Xr=r.unstable_IdlePriority,Mi=r.log,Ta=r.unstable_setDisableYieldValue,mt=null,Le=null;function Nt(t){if(typeof Mi=="function"&&Ta(t),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(mt,t)}catch{}}var Tt=Math.clz32?Math.clz32:Er,Is=Math.log,Gn=Math.LN2;function Er(t){return t>>>=0,t===0?32:31-(Is(t)/Gn|0)|0}var $r=256,Zr=4194304;function Sn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Wr(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=Sn(l):(_&=E,_!==0?h=Sn(_):a||(a=E&~t,a!==0&&(h=Sn(a))))):(E=l&~d,E!==0?h=Sn(E):_!==0?h=Sn(_):a||(a=l&~t,a!==0&&(h=Sn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Jr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ki(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ds(){var t=$r;return $r<<=1,($r&4194048)===0&&($r=256),t}function Ns(){var t=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),t}function ar(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ct(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zt(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,O=t.expirationTimes,H=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-Tt(a),te=1<<W;E[W]=0,O[W]=-1;var F=H[W];if(F!==null)for(H[W]=null,W=0;W<F.length;W++){var G=F[W];G!==null&&(G.lane&=-536870913)}a&=~te}l!==0&&pt(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function pt(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Tt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Cn(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Tt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Rt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ot(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bt(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:p_(t.type))}function or(t,i){var a=oe.p;try{return oe.p=t,i()}finally{oe.p=a}}var Ce=Math.random().toString(36).slice(2),rt="__reactFiber$"+Ce,$e="__reactProps$"+Ce,St="__reactContainer$"+Ce,lr="__reactEvents$"+Ce,ei="__reactListeners$"+Ce,sn="__reactHandles$"+Ce,Tr="__reactResources$"+Ce,ur="__reactMarker$"+Ce;function Vi(t){delete t[rt],delete t[$e],delete t[lr],delete t[ei],delete t[sn]}function ti(t){var i=t[rt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[St]||a[rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=t_(t);t!==null;){if(a=t[rt])return a;t=t_(t)}return i}t=a,a=t.parentNode}return null}function Sr(t){if(t=t[rt]||t[St]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function wr(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function wn(t){var i=t[Tr];return i||(i=t[Tr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[ur]=!0}var qo=new Set,Sa={};function cr(t,i){ni(t,i),ni(t+"Capture",i)}function ni(t,i){for(Sa[t]=i,t=0;t<i.length;t++)qo.add(i[t])}var ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vu={},Os={};function Pu(t){return qe.call(Os,t)?!0:qe.call(Vu,t)?!1:ku.test(t)?Os[t]=!0:(Vu[t]=!0,!1)}function Pi(t,i,a){if(Pu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Ar(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function an(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Ms,Lu;function ri(t){if(Ms===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ms=i&&i[1]||"",Lu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ms+t+Lu}var wa=!1;function Aa(t,i){if(!t||wa)return"";wa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(G){var F=G}Reflect.construct(t,[],te)}else{try{te.call()}catch(G){F=G}t.call(te.prototype)}}else{try{throw Error()}catch(G){F=G}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],E=d[1];if(_&&E){var O=_.split(`
`),H=E.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===H.length)for(l=O.length-1,h=H.length-1;1<=l&&0<=h&&O[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==H[h]){var W=`
`+O[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{wa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ri(a):""}function Ho(t){switch(t.tag){case 26:case 27:case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return Aa(t.type,!1);case 11:return Aa(t.type.render,!1);case 1:return Aa(t.type,!0);case 31:return ri("Activity");default:return""}}function Ra(t){try{var i="";do i+=Ho(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function An(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function df(t){var i=Fo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function xa(t){t._valueTracker||(t._valueTracker=df(t))}function Go(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Fo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gf=/[\n"\\]/g;function Mt(t){return t.replace(gf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Vn(t,i,a,l,h,d,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+An(i)):t.value!==""+An(i)&&(t.value=""+An(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Li(t,_,An(i)):a!=null?Li(t,_,An(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+An(E):t.removeAttribute("name")}function Vs(t,i,a,l,h,d,_,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+An(a):"",i=i!=null?""+An(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Li(t,i,a){i==="number"&&ks(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ii(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+An(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function it(t,i,a){if(i!=null&&(i=""+An(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+An(a):""}function Ps(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Xe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=An(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Kn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ls=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Ls.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Ko(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Uu(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Uu(t,d,i[d])}function Yo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return pf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var si=null;function Yn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ai=null,oi=null;function Qo(t){var i=Sr(t);if(i&&(t=i.stateNode)){var a=t[$e]||null;e:switch(t=i.stateNode,i.type){case"input":if(Vn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Mt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[$e]||null;if(!h)throw Error(s(90));Vn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Go(l)}break e;case"textarea":it(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ii(t,!!a.multiple,i,!1)}}}var Rr=!1;function ju(t,i,a){if(Rr)return t(i,a);Rr=!0;try{var l=t(i);return l}finally{if(Rr=!1,(ai!==null||oi!==null)&&(Oc(),ai&&(i=ai,t=oi,oi=ai=null,Qo(i),t)))for(i=0;i<t.length;i++)Qo(t[i])}}function Us(t,i){var a=t.stateNode;if(a===null)return null;var l=a[$e]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qn=!1;if(hr)try{var js={};Object.defineProperty(js,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Qn=!1}var xr=null,Ui=null,li=null;function Xo(){if(li)return li;var t,i=Ui,a=i.length,l,h="value"in xr?xr.value:xr.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return li=h.slice(t,1<l?1-l:void 0)}function Cr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ir(){return!0}function $o(){return!1}function Xt(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ir:$o,this.isPropagationStopped=$o,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),i}var We={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=Xt(We),zs=b({},We,{view:0,detail:0}),zu=Xt(zs),Da,Na,Dr,Bs=b({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(Da=t.screenX-Dr.screenX,Na=t.screenY-Dr.screenY):Na=Da=0,Dr=t),Da)},movementY:function(t){return"movementY"in t?t.movementY:Na}}),Xn=Xt(Bs),Bu=b({},Bs,{dataTransfer:0}),yf=Xt(Bu),qs=b({},zs,{relatedTarget:0}),Oa=Xt(qs),Zo=b({},We,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=Xt(Zo),qu=b({},We,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ka=Xt(qu),vf=b({},We,{data:0}),Wo=Xt(vf),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Fu[t])?!!i[t]:!1}function Fs(){return Jo}var Gu=b({},zs,{key:function(t){if(t.key){var i=Hs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Cr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(t){return t.type==="keypress"?Cr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Va=Xt(Gu),Ku=b({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=Xt(Ku),ui=b({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),Yu=Xt(ui),Qu=b({},We,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xu=Xt(Qu),$u=b({},Bs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Xt($u),Rn=b({},We,{newState:0,oldState:0}),Zu=Xt(Rn),Wu=[9,13,27,32],Nr=hr&&"CompositionEvent"in window,c=null;hr&&"documentMode"in document&&(c=document.documentMode);var y=hr&&"TextEvent"in window&&!c,v=hr&&(!Nr||c&&8<c&&11>=c),S=" ",z=!1;function Q(t,i){switch(t){case"keyup":return Wu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fe=!1;function qt(t,i){switch(t){case"compositionend":return ce(i);case"keypress":return i.which!==32?null:(z=!0,S);case"textInput":return t=i.data,t===S&&z?null:t;default:return null}}function Ge(t,i){if(Fe)return t==="compositionend"||!Nr&&Q(t,i)?(t=Xo(),li=Ui=xr=null,Fe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!$t[t.type]:i==="textarea"}function ci(t,i,a,l){ai?oi?oi.push(l):oi=[l]:ai=l,i=Uc(i,"onChange"),0<i.length&&(a=new Ia("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var on=null,Or=null;function tl(t){Gv(t,0)}function Ju(t){var i=wr(t);if(Go(i))return t}function fp(t,i){if(t==="change")return i}var dp=!1;if(hr){var _f;if(hr){var bf="oninput"in document;if(!bf){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),bf=typeof gp.oninput=="function"}_f=bf}else _f=!1;dp=_f&&(!document.documentMode||9<document.documentMode)}function mp(){on&&(on.detachEvent("onpropertychange",pp),Or=on=null)}function pp(t){if(t.propertyName==="value"&&Ju(Or)){var i=[];ci(i,Or,t,Yn(t)),ju(tl,i)}}function bS(t,i,a){t==="focusin"?(mp(),on=i,Or=a,on.attachEvent("onpropertychange",pp)):t==="focusout"&&mp()}function ES(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(Or)}function TS(t,i){if(t==="click")return Ju(i)}function SS(t,i){if(t==="input"||t==="change")return Ju(i)}function wS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Pn=typeof Object.is=="function"?Object.is:wS;function nl(t,i){if(Pn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!qe.call(i,h)||!Pn(t[h],i[h]))return!1}return!0}function yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vp(t,i){var a=yp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yp(a)}}function _p(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?_p(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function bp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ks(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ks(t.document)}return i}function Ef(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var AS=hr&&"documentMode"in document&&11>=document.documentMode,La=null,Tf=null,rl=null,Sf=!1;function Ep(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sf||La==null||La!==ks(l)||(l=La,"selectionStart"in l&&Ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&nl(rl,l)||(rl=l,l=Uc(Tf,"onSelect"),0<l.length&&(i=new Ia("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=La)))}function Gs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ua={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},wf={},Tp={};hr&&(Tp=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Ks(t){if(wf[t])return wf[t];if(!Ua[t])return t;var i=Ua[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Tp)return wf[t]=i[a];return t}var Sp=Ks("animationend"),wp=Ks("animationiteration"),Ap=Ks("animationstart"),RS=Ks("transitionrun"),xS=Ks("transitionstart"),CS=Ks("transitioncancel"),Rp=Ks("transitionend"),xp=new Map,Af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Af.push("scrollEnd");function fr(t,i){xp.set(t,i),cr(i,[t])}var Cp=new WeakMap;function $n(t,i){if(typeof t=="object"&&t!==null){var a=Cp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ra(i)},Cp.set(t,i),i)}return{value:t,source:i,stack:Ra(i)}}var Zn=[],ja=0,Rf=0;function ec(){for(var t=ja,i=Rf=ja=0;i<t;){var a=Zn[i];Zn[i++]=null;var l=Zn[i];Zn[i++]=null;var h=Zn[i];Zn[i++]=null;var d=Zn[i];if(Zn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Ip(a,h,d)}}function tc(t,i,a,l){Zn[ja++]=t,Zn[ja++]=i,Zn[ja++]=a,Zn[ja++]=l,Rf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xf(t,i,a,l){return tc(t,i,a,l),nc(t)}function za(t,i){return tc(t,null,null,i),nc(t)}function Ip(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Tt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function nc(t){if(50<Cl)throw Cl=0,Md=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ba={};function IS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,i,a,l){return new IS(t,i,a,l)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hi(t,i){var a=t.alternate;return a===null?(a=Ln(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Dp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function rc(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")Cf(t)&&(_=1);else if(typeof t=="string")_=Nw(t,a,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Ln(31,a,i,h),t.elementType=I,t.lanes=d,t;case B:return Ys(a.children,h,d,i);case K:_=8,h|=24;break;case L:return t=Ln(12,a,i,h|2),t.elementType=L,t.lanes=d,t;case ae:return t=Ln(13,a,i,h),t.elementType=ae,t.lanes=d,t;case se:return t=Ln(19,a,i,h),t.elementType=se,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case X:_=10;break e;case $:_=9;break e;case ne:_=11;break e;case C:_=14;break e;case A:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Ln(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Ys(t,i,a,l){return t=Ln(7,t,l,i),t.lanes=a,t}function If(t,i,a){return t=Ln(6,t,null,i),t.lanes=a,t}function Df(t,i,a){return i=Ln(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var qa=[],Ha=0,ic=null,sc=0,Wn=[],Jn=0,Qs=null,fi=1,di="";function Xs(t,i){qa[Ha++]=sc,qa[Ha++]=ic,ic=t,sc=i}function Np(t,i,a){Wn[Jn++]=fi,Wn[Jn++]=di,Wn[Jn++]=Qs,Qs=t;var l=fi;t=di;var h=32-Tt(l)-1;l&=~(1<<h),a+=1;var d=32-Tt(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,fi=1<<32-Tt(i)+h|a<<h|l,di=d+t}else fi=1<<d|a<<h|l,di=t}function Nf(t){t.return!==null&&(Xs(t,1),Np(t,1,0))}function Of(t){for(;t===ic;)ic=qa[--Ha],qa[Ha]=null,sc=qa[--Ha],qa[Ha]=null;for(;t===Qs;)Qs=Wn[--Jn],Wn[Jn]=null,di=Wn[--Jn],Wn[Jn]=null,fi=Wn[--Jn],Wn[Jn]=null}var xn=null,wt=null,Ze=!1,$s=null,Mr=!1,Mf=Error(s(519));function Zs(t){var i=Error(s(418,""));throw al($n(i,t)),Mf}function Op(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[rt]=t,i[$e]=l,a){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(a=0;a<Dl.length;a++)Pe(Dl[a],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),Vs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),xa(i);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Ps(i,l.value,l.defaultValue,l.children),xa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Xv(i.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),l.onScroll!=null&&Pe("scroll",i),l.onScrollEnd!=null&&Pe("scrollend",i),l.onClick!=null&&(i.onclick=jc),i=!0):i=!1,i||Zs(t)}function Mp(t){for(xn=t.return;xn;)switch(xn.tag){case 5:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:xn=xn.return}}function il(t){if(t!==xn)return!1;if(!Ze)return Mp(t),Ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xd(t.type,t.memoizedProps)),a=!a),a&&wt&&Zs(t),Mp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){wt=gr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}wt=null}}else i===27?(i=wt,es(t.type)?(t=Jd,Jd=null,wt=t):wt=i):wt=xn?gr(t.stateNode.nextSibling):null;return!0}function sl(){wt=xn=null,Ze=!1}function kp(){var t=$s;return t!==null&&(Nn===null?Nn=t:Nn.push.apply(Nn,t),$s=null),t}function al(t){$s===null?$s=[t]:$s.push(t)}var kf=re(null),Ws=null,gi=null;function ji(t,i,a){le(kf,i._currentValue),i._currentValue=a}function mi(t){t._currentValue=kf.current,ue(kf)}function Vf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Pf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var O=0;O<i.length;O++)if(E.context===i[O]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Vf(d.return,a,t),l||(_=null);break e}d=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Vf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ol(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var E=h.type;Pn(h.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(h===dt.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}h=h.return}t!==null&&Pf(i,t,a,l),i.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!Pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Js(t){Ws=t,gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mn(t){return Vp(Ws,t)}function oc(t,i){return Ws===null&&Js(t),Vp(t,i)}function Vp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},gi===null){if(t===null)throw Error(s(308));gi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else gi=gi.next=i;return a}var DS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},NS=r.unstable_scheduleCallback,OS=r.unstable_NormalPriority,Ft={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new DS,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&NS(OS,function(){t.controller.abort()})}var ul=null,Uf=0,Fa=0,Ga=null;function MS(t,i){if(ul===null){var a=ul=[];Uf=0,Fa=zd(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Uf++,i.then(Pp,Pp),i}function Pp(){if(--Uf===0&&ul!==null){Ga!==null&&(Ga.status="fulfilled");var t=ul;ul=null,Fa=0,Ga=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function kS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Lp=Z.S;Z.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&MS(t,i),Lp!==null&&Lp(t,i)};var ea=re(null);function jf(){var t=ea.current;return t!==null?t:ht.pooledCache}function lc(t,i){i===null?le(ea,ea.current):le(ea,i.pool)}function Up(){var t=jf();return t===null?null:{parent:Ft._currentValue,pool:t}}var cl=Error(s(460)),jp=Error(s(474)),uc=Error(s(542)),zf={then:function(){}};function zp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cc(){}function Bp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(cc,cc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Hp(t),t;default:if(typeof i.status=="string")i.then(cc,cc);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Hp(t),t}throw hl=i,cl}}var hl=null;function qp(){if(hl===null)throw Error(s(459));var t=hl;return hl=null,t}function Hp(t){if(t===cl||t===uc)throw Error(s(483))}var zi=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Bi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=nc(t),Ip(t,null,a),i}return tc(t,l,i,a),nc(t)}function fl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Cn(t,a)}}function Hf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Ff=!1;function dl(){if(Ff){var t=Ga;if(t!==null)throw t}}function gl(t,i,a,l){Ff=!1;var h=t.updateQueue;zi=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var O=E,H=O.next;O.next=null,_===null?d=H:_.next=H,_=O;var W=t.alternate;W!==null&&(W=W.updateQueue,E=W.lastBaseUpdate,E!==_&&(E===null?W.firstBaseUpdate=H:E.next=H,W.lastBaseUpdate=O))}if(d!==null){var te=h.baseState;_=0,W=H=O=null,E=d;do{var F=E.lane&-536870913,G=F!==E.lane;if(G?(Ke&F)===F:(l&F)===F){F!==0&&F===Fa&&(Ff=!0),W!==null&&(W=W.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Se=t,_e=E;F=i;var ot=a;switch(_e.tag){case 1:if(Se=_e.payload,typeof Se=="function"){te=Se.call(ot,te,F);break e}te=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=_e.payload,F=typeof Se=="function"?Se.call(ot,te,F):Se,F==null)break e;te=b({},te,F);break e;case 2:zi=!0}}F=E.callback,F!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[F]:G.push(F))}else G={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},W===null?(H=W=G,O=te):W=W.next=G,_|=F;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;G=E,E=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);W===null&&(O=te),h.baseState=O,h.firstBaseUpdate=H,h.lastBaseUpdate=W,d===null&&(h.shared.lanes=0),$i|=_,t.lanes=_,t.memoizedState=te}}function Fp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Gp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Fp(a[t],i)}var Ka=re(null),hc=re(0);function Kp(t,i){t=Ti,le(hc,t),le(Ka,i),Ti=t|i.baseLanes}function Gf(){le(hc,Ti),le(Ka,Ka.current)}function Kf(){Ti=hc.current,ue(Ka),ue(hc)}var Hi=0,Oe=null,st=null,kt=null,fc=!1,Ya=!1,ta=!1,dc=0,ml=0,Qa=null,VS=0;function Ct(){throw Error(s(321))}function Yf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Pn(t[a],i[a]))return!1;return!0}function Qf(t,i,a,l,h,d){return Hi=d,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=t===null||t.memoizedState===null?Iy:Dy,ta=!1,d=a(l,h),ta=!1,Ya&&(d=Qp(i,a,l,h)),Yp(t),d}function Yp(t){Z.H=_c;var i=st!==null&&st.next!==null;if(Hi=0,kt=st=Oe=null,fc=!1,ml=0,Qa=null,i)throw Error(s(300));t===null||Zt||(t=t.dependencies,t!==null&&ac(t)&&(Zt=!0))}function Qp(t,i,a,l){Oe=t;var h=0;do{if(Ya&&(Qa=null),ml=0,Ya=!1,25<=h)throw Error(s(301));if(h+=1,kt=st=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Z.H=qS,d=i(a,l)}while(Ya);return d}function PS(){var t=Z.H,i=t.useState()[0];return i=typeof i.then=="function"?pl(i):i,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Oe.flags|=1024),i}function Xf(){var t=dc!==0;return dc=0,t}function $f(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Zf(t){if(fc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}fc=!1}Hi=0,kt=st=Oe=null,Ya=!1,ml=dc=0,Qa=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Oe.memoizedState=kt=t:kt=kt.next=t,kt}function Vt(){if(st===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var i=kt===null?Oe.memoizedState:kt.next;if(i!==null)kt=i,st=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?Oe.memoizedState=kt=t:kt=kt.next=t}return kt}function Wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(t){var i=ml;return ml+=1,Qa===null&&(Qa=[]),t=Bp(Qa,t,i),i=Oe,(kt===null?i.memoizedState:kt.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?Iy:Dy),t}function gc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pl(t);if(t.$$typeof===X)return mn(t)}throw Error(s(438,String(t)))}function Jf(t){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wf(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=M;return i.index++,a}function pi(t,i){return typeof i=="function"?i(t):i}function mc(t){var i=Vt();return ed(i,st,t)}function ed(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var E=_=null,O=null,H=i,W=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(Ke&te)===te:(Hi&te)===te){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===Fa&&(W=!0);else if((Hi&F)===F){H=H.next,F===Fa&&(W=!0);continue}else te={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(E=O=te,_=d):O=O.next=te,Oe.lanes|=F,$i|=F;te=H.action,ta&&a(d,te),d=H.hasEagerState?H.eagerState:a(d,te)}else F={lane:te,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(E=O=F,_=d):O=O.next=F,Oe.lanes|=te,$i|=te;H=H.next}while(H!==null&&H!==i);if(O===null?_=d:O.next=E,!Pn(d,t.memoizedState)&&(Zt=!0,W&&(a=Ga,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=O,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function td(t){var i=Vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Pn(d,i.memoizedState)||(Zt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Xp(t,i,a){var l=Oe,h=Vt(),d=Ze;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Pn((st||h).memoizedState,a);_&&(h.memoizedState=a,Zt=!0),h=h.queue;var E=Wp.bind(null,l,h,t);if(yl(2048,8,E,[t]),h.getSnapshot!==i||_||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,Xa(9,pc(),Zp.bind(null,l,h,a,i),null),ht===null)throw Error(s(349));d||(Hi&124)!==0||$p(l,i,a)}return a}function $p(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Wf(),Oe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Zp(t,i,a,l){i.value=a,i.getSnapshot=l,Jp(i)&&ey(t)}function Wp(t,i,a){return a(function(){Jp(i)&&ey(t)})}function Jp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Pn(t,a)}catch{return!0}}function ey(t){var i=za(t,2);i!==null&&qn(i,t,2)}function nd(t){var i=In();if(typeof t=="function"){var a=t;if(t=a(),ta){Nt(!0);try{a()}finally{Nt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:t},i}function ty(t,i,a,l){return t.baseState=a,ed(t,st,typeof l=="function"?l:pi)}function LS(t,i,a,l,h){if(vc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Z.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ny(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ny(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=Z.T,_={};Z.T=_;try{var E=a(h,l),O=Z.S;O!==null&&O(_,E),ry(t,i,E)}catch(H){rd(t,i,H)}finally{Z.T=d}}else try{d=a(h,l),ry(t,i,d)}catch(H){rd(t,i,H)}}function ry(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){iy(t,i,l)},function(l){return rd(t,i,l)}):iy(t,i,a)}function iy(t,i,a){i.status="fulfilled",i.value=a,sy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ny(t,a)))}function rd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,sy(i),i=i.next;while(i!==l)}t.action=null}function sy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ay(t,i){return i}function oy(t,i){if(Ze){var a=ht.formState;if(a!==null){e:{var l=Oe;if(Ze){if(wt){t:{for(var h=wt,d=Mr;h.nodeType!==8;){if(!d){h=null;break t}if(h=gr(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){wt=gr(h.nextSibling),l=h.data==="F!";break e}}Zs(l)}l=!1}l&&(i=a[0])}}return a=In(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ay,lastRenderedState:i},a.queue=l,a=Ry.bind(null,Oe,l),l.dispatch=a,l=nd(!1),d=ld.bind(null,Oe,!1,l.queue),l=In(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=LS.bind(null,Oe,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function ly(t){var i=Vt();return uy(i,st,t)}function uy(t,i,a){if(i=ed(t,i,ay)[0],t=mc(pi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=pl(i)}catch(_){throw _===cl?uc:_}else l=i;i=Vt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Xa(9,pc(),US.bind(null,h,a),null)),[l,d,t]}function US(t,i){t.action=i}function cy(t){var i=Vt(),a=st;if(a!==null)return uy(i,a,t);Vt(),i=i.memoizedState,a=Vt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Xa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Wf(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function pc(){return{destroy:void 0,resource:void 0}}function hy(){return Vt().memoizedState}function yc(t,i,a,l){var h=In();l=l===void 0?null:l,Oe.flags|=t,h.memoizedState=Xa(1|i,pc(),a,l)}function yl(t,i,a,l){var h=Vt();l=l===void 0?null:l;var d=h.memoizedState.inst;st!==null&&l!==null&&Yf(l,st.memoizedState.deps)?h.memoizedState=Xa(i,d,a,l):(Oe.flags|=t,h.memoizedState=Xa(1|i,d,a,l))}function fy(t,i){yc(8390656,8,t,i)}function dy(t,i){yl(2048,8,t,i)}function gy(t,i){return yl(4,2,t,i)}function my(t,i){return yl(4,4,t,i)}function py(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function yy(t,i,a){a=a!=null?a.concat([t]):null,yl(4,4,py.bind(null,i,t),a)}function id(){}function vy(t,i){var a=Vt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Yf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function _y(t,i){var a=Vt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Yf(i,l[1]))return l[0];if(l=t(),ta){Nt(!0);try{t()}finally{Nt(!1)}}return a.memoizedState=[l,i],l}function sd(t,i,a){return a===void 0||(Hi&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Tv(),Oe.lanes|=t,$i|=t,a)}function by(t,i,a,l){return Pn(a,i)?a:Ka.current!==null?(t=sd(t,a,l),Pn(t,i)||(Zt=!0),t):(Hi&42)===0?(Zt=!0,t.memoizedState=a):(t=Tv(),Oe.lanes|=t,$i|=t,i)}function Ey(t,i,a,l,h){var d=oe.p;oe.p=d!==0&&8>d?d:8;var _=Z.T,E={};Z.T=E,ld(t,!1,i,a);try{var O=h(),H=Z.S;if(H!==null&&H(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=kS(O,l);vl(t,i,W,Bn(t))}else vl(t,i,l,Bn(t))}catch(te){vl(t,i,{then:function(){},status:"rejected",reason:te},Bn())}finally{oe.p=d,Z.T=_}}function jS(){}function ad(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Ty(t).queue;Ey(t,h,i,de,a===null?jS:function(){return Sy(t),a(l)})}function Ty(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Sy(t){var i=Ty(t).next.queue;vl(t,i,{},Bn())}function od(){return mn(Pl)}function wy(){return Vt().memoizedState}function Ay(){return Vt().memoizedState}function zS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Bn();t=Bi(a);var l=qi(i,t,a);l!==null&&(qn(l,i,a),fl(l,i,a)),i={cache:Lf()},t.payload=i;return}i=i.return}}function BS(t,i,a){var l=Bn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},vc(t)?xy(i,a):(a=xf(t,i,a,l),a!==null&&(qn(a,t,l),Cy(a,i,l)))}function Ry(t,i,a){var l=Bn();vl(t,i,a,l)}function vl(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(vc(t))xy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,E=d(_,a);if(h.hasEagerState=!0,h.eagerState=E,Pn(E,_))return tc(t,i,h,0),ht===null&&ec(),!1}catch{}finally{}if(a=xf(t,i,h,l),a!==null)return qn(a,t,l),Cy(a,i,l),!0}return!1}function ld(t,i,a,l){if(l={lane:2,revertLane:zd(),action:l,hasEagerState:!1,eagerState:null,next:null},vc(t)){if(i)throw Error(s(479))}else i=xf(t,a,l,2),i!==null&&qn(i,t,2)}function vc(t){var i=t.alternate;return t===Oe||i!==null&&i===Oe}function xy(t,i){Ya=fc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Cy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Cn(t,a)}}var _c={readContext:mn,use:gc,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},Iy={readContext:mn,use:gc,useCallback:function(t,i){return In().memoizedState=[t,i===void 0?null:i],t},useContext:mn,useEffect:fy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,yc(4194308,4,py.bind(null,i,t),a)},useLayoutEffect:function(t,i){return yc(4194308,4,t,i)},useInsertionEffect:function(t,i){yc(4,2,t,i)},useMemo:function(t,i){var a=In();i=i===void 0?null:i;var l=t();if(ta){Nt(!0);try{t()}finally{Nt(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=In();if(a!==void 0){var h=a(i);if(ta){Nt(!0);try{a(i)}finally{Nt(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=BS.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var i=In();return t={current:t},i.memoizedState=t},useState:function(t){t=nd(t);var i=t.queue,a=Ry.bind(null,Oe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:id,useDeferredValue:function(t,i){var a=In();return sd(a,t,i)},useTransition:function(){var t=nd(!1);return t=Ey.bind(null,Oe,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Oe,h=In();if(Ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ht===null)throw Error(s(349));(Ke&124)!==0||$p(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,fy(Wp.bind(null,l,d,t),[t]),l.flags|=2048,Xa(9,pc(),Zp.bind(null,l,d,a,i),null),a},useId:function(){var t=In(),i=ht.identifierPrefix;if(Ze){var a=di,l=fi;a=(l&~(1<<32-Tt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=dc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=VS++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:od,useFormState:oy,useActionState:oy,useOptimistic:function(t){var i=In();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ld.bind(null,Oe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Jf,useCacheRefresh:function(){return In().memoizedState=zS.bind(null,Oe)}},Dy={readContext:mn,use:gc,useCallback:vy,useContext:mn,useEffect:dy,useImperativeHandle:yy,useInsertionEffect:gy,useLayoutEffect:my,useMemo:_y,useReducer:mc,useRef:hy,useState:function(){return mc(pi)},useDebugValue:id,useDeferredValue:function(t,i){var a=Vt();return by(a,st.memoizedState,t,i)},useTransition:function(){var t=mc(pi)[0],i=Vt().memoizedState;return[typeof t=="boolean"?t:pl(t),i]},useSyncExternalStore:Xp,useId:wy,useHostTransitionStatus:od,useFormState:ly,useActionState:ly,useOptimistic:function(t,i){var a=Vt();return ty(a,st,t,i)},useMemoCache:Jf,useCacheRefresh:Ay},qS={readContext:mn,use:gc,useCallback:vy,useContext:mn,useEffect:dy,useImperativeHandle:yy,useInsertionEffect:gy,useLayoutEffect:my,useMemo:_y,useReducer:td,useRef:hy,useState:function(){return td(pi)},useDebugValue:id,useDeferredValue:function(t,i){var a=Vt();return st===null?sd(a,t,i):by(a,st.memoizedState,t,i)},useTransition:function(){var t=td(pi)[0],i=Vt().memoizedState;return[typeof t=="boolean"?t:pl(t),i]},useSyncExternalStore:Xp,useId:wy,useHostTransitionStatus:od,useFormState:cy,useActionState:cy,useOptimistic:function(t,i){var a=Vt();return st!==null?ty(a,st,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Jf,useCacheRefresh:Ay},$a=null,_l=0;function bc(t){var i=_l;return _l+=1,$a===null&&($a=[]),Bp($a,t,i)}function bl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ec(t,i){throw i.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ny(t){var i=t._init;return i(t._payload)}function Oy(t){function i(U,P){if(t){var q=U.deletions;q===null?(U.deletions=[P],U.flags|=16):q.push(P)}}function a(U,P){if(!t)return null;for(;P!==null;)i(U,P),P=P.sibling;return null}function l(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function h(U,P){return U=hi(U,P),U.index=0,U.sibling=null,U}function d(U,P,q){return U.index=q,t?(q=U.alternate,q!==null?(q=q.index,q<P?(U.flags|=67108866,P):q):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,P,q,J){return P===null||P.tag!==6?(P=If(q,U.mode,J),P.return=U,P):(P=h(P,q),P.return=U,P)}function O(U,P,q,J){var ge=q.type;return ge===B?W(U,P,q.props.children,J,q.key):P!==null&&(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===A&&Ny(ge)===P.type)?(P=h(P,q.props),bl(P,q),P.return=U,P):(P=rc(q.type,q.key,q.props,null,U.mode,J),bl(P,q),P.return=U,P)}function H(U,P,q,J){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=Df(q,U.mode,J),P.return=U,P):(P=h(P,q.children||[]),P.return=U,P)}function W(U,P,q,J,ge){return P===null||P.tag!==7?(P=Ys(q,U.mode,J,ge),P.return=U,P):(P=h(P,q),P.return=U,P)}function te(U,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=If(""+P,U.mode,q),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return q=rc(P.type,P.key,P.props,null,U.mode,q),bl(q,P),q.return=U,q;case x:return P=Df(P,U.mode,q),P.return=U,P;case A:var J=P._init;return P=J(P._payload),te(U,P,q)}if(Xe(P)||V(P))return P=Ys(P,U.mode,q,null),P.return=U,P;if(typeof P.then=="function")return te(U,bc(P),q);if(P.$$typeof===X)return te(U,oc(U,P),q);Ec(U,P)}return null}function F(U,P,q,J){var ge=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:E(U,P,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return q.key===ge?O(U,P,q,J):null;case x:return q.key===ge?H(U,P,q,J):null;case A:return ge=q._init,q=ge(q._payload),F(U,P,q,J)}if(Xe(q)||V(q))return ge!==null?null:W(U,P,q,J,null);if(typeof q.then=="function")return F(U,P,bc(q),J);if(q.$$typeof===X)return F(U,P,oc(U,q),J);Ec(U,q)}return null}function G(U,P,q,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(q)||null,E(P,U,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return U=U.get(J.key===null?q:J.key)||null,O(P,U,J,ge);case x:return U=U.get(J.key===null?q:J.key)||null,H(P,U,J,ge);case A:var Me=J._init;return J=Me(J._payload),G(U,P,q,J,ge)}if(Xe(J)||V(J))return U=U.get(q)||null,W(P,U,J,ge,null);if(typeof J.then=="function")return G(U,P,q,bc(J),ge);if(J.$$typeof===X)return G(U,P,q,oc(P,J),ge);Ec(P,J)}return null}function Se(U,P,q,J){for(var ge=null,Me=null,ye=P,be=P=0,Jt=null;ye!==null&&be<q.length;be++){ye.index>be?(Jt=ye,ye=null):Jt=ye.sibling;var Qe=F(U,ye,q[be],J);if(Qe===null){ye===null&&(ye=Jt);break}t&&ye&&Qe.alternate===null&&i(U,ye),P=d(Qe,P,be),Me===null?ge=Qe:Me.sibling=Qe,Me=Qe,ye=Jt}if(be===q.length)return a(U,ye),Ze&&Xs(U,be),ge;if(ye===null){for(;be<q.length;be++)ye=te(U,q[be],J),ye!==null&&(P=d(ye,P,be),Me===null?ge=ye:Me.sibling=ye,Me=ye);return Ze&&Xs(U,be),ge}for(ye=l(ye);be<q.length;be++)Jt=G(ye,U,be,q[be],J),Jt!==null&&(t&&Jt.alternate!==null&&ye.delete(Jt.key===null?be:Jt.key),P=d(Jt,P,be),Me===null?ge=Jt:Me.sibling=Jt,Me=Jt);return t&&ye.forEach(function(ss){return i(U,ss)}),Ze&&Xs(U,be),ge}function _e(U,P,q,J){if(q==null)throw Error(s(151));for(var ge=null,Me=null,ye=P,be=P=0,Jt=null,Qe=q.next();ye!==null&&!Qe.done;be++,Qe=q.next()){ye.index>be?(Jt=ye,ye=null):Jt=ye.sibling;var ss=F(U,ye,Qe.value,J);if(ss===null){ye===null&&(ye=Jt);break}t&&ye&&ss.alternate===null&&i(U,ye),P=d(ss,P,be),Me===null?ge=ss:Me.sibling=ss,Me=ss,ye=Jt}if(Qe.done)return a(U,ye),Ze&&Xs(U,be),ge;if(ye===null){for(;!Qe.done;be++,Qe=q.next())Qe=te(U,Qe.value,J),Qe!==null&&(P=d(Qe,P,be),Me===null?ge=Qe:Me.sibling=Qe,Me=Qe);return Ze&&Xs(U,be),ge}for(ye=l(ye);!Qe.done;be++,Qe=q.next())Qe=G(ye,U,be,Qe.value,J),Qe!==null&&(t&&Qe.alternate!==null&&ye.delete(Qe.key===null?be:Qe.key),P=d(Qe,P,be),Me===null?ge=Qe:Me.sibling=Qe,Me=Qe);return t&&ye.forEach(function(Hw){return i(U,Hw)}),Ze&&Xs(U,be),ge}function ot(U,P,q,J){if(typeof q=="object"&&q!==null&&q.type===B&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case w:e:{for(var ge=q.key;P!==null;){if(P.key===ge){if(ge=q.type,ge===B){if(P.tag===7){a(U,P.sibling),J=h(P,q.props.children),J.return=U,U=J;break e}}else if(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===A&&Ny(ge)===P.type){a(U,P.sibling),J=h(P,q.props),bl(J,q),J.return=U,U=J;break e}a(U,P);break}else i(U,P);P=P.sibling}q.type===B?(J=Ys(q.props.children,U.mode,J,q.key),J.return=U,U=J):(J=rc(q.type,q.key,q.props,null,U.mode,J),bl(J,q),J.return=U,U=J)}return _(U);case x:e:{for(ge=q.key;P!==null;){if(P.key===ge)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){a(U,P.sibling),J=h(P,q.children||[]),J.return=U,U=J;break e}else{a(U,P);break}else i(U,P);P=P.sibling}J=Df(q,U.mode,J),J.return=U,U=J}return _(U);case A:return ge=q._init,q=ge(q._payload),ot(U,P,q,J)}if(Xe(q))return Se(U,P,q,J);if(V(q)){if(ge=V(q),typeof ge!="function")throw Error(s(150));return q=ge.call(q),_e(U,P,q,J)}if(typeof q.then=="function")return ot(U,P,bc(q),J);if(q.$$typeof===X)return ot(U,P,oc(U,q),J);Ec(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(a(U,P.sibling),J=h(P,q),J.return=U,U=J):(a(U,P),J=If(q,U.mode,J),J.return=U,U=J),_(U)):a(U,P)}return function(U,P,q,J){try{_l=0;var ge=ot(U,P,q,J);return $a=null,ge}catch(ye){if(ye===cl||ye===uc)throw ye;var Me=Ln(29,ye,null,U.mode);return Me.lanes=J,Me.return=U,Me}finally{}}}var Za=Oy(!0),My=Oy(!1),er=re(null),kr=null;function Fi(t){var i=t.alternate;le(Gt,Gt.current&1),le(er,t),kr===null&&(i===null||Ka.current!==null||i.memoizedState!==null)&&(kr=t)}function ky(t){if(t.tag===22){if(le(Gt,Gt.current),le(er,t),kr===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(kr=t)}}else Gi()}function Gi(){le(Gt,Gt.current),le(er,er.current)}function yi(t){ue(er),kr===t&&(kr=null),ue(Gt)}var Gt=re(0);function Tc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Wd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function ud(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var cd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Bn(),h=Bi(l);h.payload=i,a!=null&&(h.callback=a),i=qi(t,h,l),i!==null&&(qn(i,t,l),fl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Bn(),h=Bi(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=qi(t,h,l),i!==null&&(qn(i,t,l),fl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Bn(),l=Bi(a);l.tag=2,i!=null&&(l.callback=i),i=qi(t,l,a),i!==null&&(qn(i,t,a),fl(i,t,a))}};function Vy(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!nl(a,l)||!nl(h,d):!0}function Py(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&cd.enqueueReplaceState(i,i.state,null)}function na(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Sc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ly(t){Sc(t)}function Uy(t){console.error(t)}function jy(t){Sc(t)}function wc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function zy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hd(t,i,a){return a=Bi(a),a.tag=3,a.payload={element:null},a.callback=function(){wc(t,i)},a}function By(t){return t=Bi(t),t.tag=3,t}function qy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){zy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){zy(i,a,l),typeof h!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function HS(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ol(i,a,h,!0),a=er.current,a!==null){switch(a.tag){case 13:return kr===null?Vd():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===zf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Ld(t,l,h)),!1;case 22:return a.flags|=65536,l===zf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Ld(t,l,h)),!1}throw Error(s(435,a.tag))}return Ld(t,l,h),Vd(),!1}if(Ze)return i=er.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Mf&&(t=Error(s(422),{cause:l}),al($n(t,a)))):(l!==Mf&&(i=Error(s(423),{cause:l}),al($n(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=$n(l,a),h=hd(t.stateNode,l,h),Hf(t,h),At!==4&&(At=2)),!1;var d=Error(s(520),{cause:l});if(d=$n(d,a),xl===null?xl=[d]:xl.push(d),At!==4&&(At=2),i===null)return!0;l=$n(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=hd(a.stateNode,l,t),Hf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Zi===null||!Zi.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=By(h),qy(h,t,a,l),Hf(a,h),!1}a=a.return}while(a!==null);return!1}var Hy=Error(s(461)),Zt=!1;function ln(t,i,a,l){i.child=t===null?My(i,null,a,l):Za(i,t.child,a,l)}function Fy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return Js(i),l=Qf(t,i,a,_,d,h),E=Xf(),t!==null&&!Zt?($f(t,i,h),vi(t,i,h)):(Ze&&E&&Nf(i),i.flags|=1,ln(t,i,l,h),i.child)}function Gy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Cf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Ky(t,i,d,l,h)):(t=rc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!_d(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(_,l)&&t.ref===i.ref)return vi(t,i,h)}return i.flags|=1,t=hi(d,l),t.ref=i.ref,t.return=i,i.child=t}function Ky(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(nl(d,l)&&t.ref===i.ref)if(Zt=!1,i.pendingProps=l=d,_d(t,h))(t.flags&131072)!==0&&(Zt=!0);else return i.lanes=t.lanes,vi(t,i,h)}return fd(t,i,a,l,h)}function Yy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Qy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lc(i,d!==null?d.cachePool:null),d!==null?Kp(i,d):Gf(),ky(i);else return i.lanes=i.childLanes=536870912,Qy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(lc(i,d.cachePool),Kp(i,d),Gi(),i.memoizedState=null):(t!==null&&lc(i,null),Gf(),Gi());return ln(t,i,h,a),i.child}function Qy(t,i,a,l){var h=jf();return h=h===null?null:{parent:Ft._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&lc(i,null),Gf(),ky(i),t!==null&&ol(t,i,l,!0),null}function Ac(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function fd(t,i,a,l,h){return Js(i),a=Qf(t,i,a,l,void 0,h),l=Xf(),t!==null&&!Zt?($f(t,i,h),vi(t,i,h)):(Ze&&l&&Nf(i),i.flags|=1,ln(t,i,a,h),i.child)}function Xy(t,i,a,l,h,d){return Js(i),i.updateQueue=null,a=Qp(i,l,a,h),Yp(t),l=Xf(),t!==null&&!Zt?($f(t,i,d),vi(t,i,d)):(Ze&&l&&Nf(i),i.flags|=1,ln(t,i,a,d),i.child)}function $y(t,i,a,l,h){if(Js(i),i.stateNode===null){var d=Ba,_=a.contextType;typeof _=="object"&&_!==null&&(d=mn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=cd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Bf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?mn(_):Ba,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(ud(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&cd.enqueueReplaceState(d,d.state,null),gl(i,l,d,h),dl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var E=i.memoizedProps,O=na(a,E);d.props=O;var H=d.context,W=a.contextType;_=Ba,typeof W=="object"&&W!==null&&(_=mn(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||H!==_)&&Py(i,d,l,_),zi=!1;var F=i.memoizedState;d.state=F,gl(i,l,d,h),dl(),H=i.memoizedState,E||F!==H||zi?(typeof te=="function"&&(ud(i,a,te,l),H=i.memoizedState),(O=zi||Vy(i,a,O,l,F,H,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=_,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,qf(t,i),_=i.memoizedProps,W=na(a,_),d.props=W,te=i.pendingProps,F=d.context,H=a.contextType,O=Ba,typeof H=="object"&&H!==null&&(O=mn(H)),E=a.getDerivedStateFromProps,(H=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==te||F!==O)&&Py(i,d,l,O),zi=!1,F=i.memoizedState,d.state=F,gl(i,l,d,h),dl();var G=i.memoizedState;_!==te||F!==G||zi||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof E=="function"&&(ud(i,a,E,l),G=i.memoizedState),(W=zi||Vy(i,a,W,l,F,G,O)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=O,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ac(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Za(i,t.child,null,h),i.child=Za(i,null,a,h)):ln(t,i,a,h),i.memoizedState=d.state,t=i.child):t=vi(t,i,h),t}function Zy(t,i,a,l){return sl(),i.flags|=256,ln(t,i,a,l),i.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gd(t){return{baseLanes:t,cachePool:Up()}}function md(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=tr),t}function Wy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Gt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ze){if(h?Fi(i):Gi(),Ze){var E=wt,O;if(O=E){e:{for(O=E,E=Mr;O.nodeType!==8;){if(!E){E=null;break e}if(O=gr(O.nextSibling),O===null){E=null;break e}}E=O}E!==null?(i.memoizedState={dehydrated:E,treeContext:Qs!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},O=Ln(18,null,null,0),O.stateNode=E,O.return=i,i.child=O,xn=i,wt=null,O=!0):O=!1}O||Zs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Wd(E)?i.lanes=32:i.lanes=536870912,null;yi(i)}return E=l.children,l=l.fallback,h?(Gi(),h=i.mode,E=Rc({mode:"hidden",children:E},h),l=Ys(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=gd(a),h.childLanes=md(t,_,a),i.memoizedState=dd,l):(Fi(i),pd(i,E))}if(O=t.memoizedState,O!==null&&(E=O.dehydrated,E!==null)){if(d)i.flags&256?(Fi(i),i.flags&=-257,i=yd(t,i,a)):i.memoizedState!==null?(Gi(),i.child=t.child,i.flags|=128,i=null):(Gi(),h=l.fallback,E=i.mode,l=Rc({mode:"visible",children:l.children},E),h=Ys(h,E,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Za(i,t.child,null,a),l=i.child,l.memoizedState=gd(a),l.childLanes=md(t,_,a),i.memoizedState=dd,i=h);else if(Fi(i),Wd(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var H=_.dgst;_=H,l=Error(s(419)),l.stack="",l.digest=_,al({value:l,source:null,stack:null}),i=yd(t,i,a)}else if(Zt||ol(t,i,a,!1),_=(a&t.childLanes)!==0,Zt||_){if(_=ht,_!==null&&(l=a&-a,l=(l&42)!==0?1:Rt(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,za(t,l),qn(_,t,l),Hy;E.data==="$?"||Vd(),i=yd(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,wt=gr(E.nextSibling),xn=i,Ze=!0,$s=null,Mr=!1,t!==null&&(Wn[Jn++]=fi,Wn[Jn++]=di,Wn[Jn++]=Qs,fi=t.id,di=t.overflow,Qs=i),i=pd(i,l.children),i.flags|=4096);return i}return h?(Gi(),h=l.fallback,E=i.mode,O=t.child,H=O.sibling,l=hi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,H!==null?h=hi(H,h):(h=Ys(h,E,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=t.child.memoizedState,E===null?E=gd(a):(O=E.cachePool,O!==null?(H=Ft._currentValue,O=O.parent!==H?{parent:H,pool:H}:O):O=Up(),E={baseLanes:E.baseLanes|a,cachePool:O}),h.memoizedState=E,h.childLanes=md(t,_,a),i.memoizedState=dd,l):(Fi(i),a=t.child,t=a.sibling,a=hi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function pd(t,i){return i=Rc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Rc(t,i){return t=Ln(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function yd(t,i,a){return Za(i,t.child,null,a),t=pd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Jy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Vf(t.return,i,a)}function vd(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function ev(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(ln(t,i,l.children,a),l=Gt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jy(t,a,i);else if(t.tag===19)Jy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(le(Gt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Tc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),vd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Tc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}vd(i,!0,a,null,d);break;case"together":vd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),$i|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ol(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=hi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=hi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function _d(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function FS(t,i,a){switch(i.tag){case 3:ke(i,i.stateNode.containerInfo),ji(i,Ft,t.memoizedState.cache),sl();break;case 27:case 5:Ne(i);break;case 4:ke(i,i.stateNode.containerInfo);break;case 10:ji(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Fi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Wy(t,i,a):(Fi(i),t=vi(t,i,a),t!==null?t.sibling:null);Fi(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ol(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ev(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(Gt,Gt.current),l)break;return null;case 22:case 23:return i.lanes=0,Yy(t,i,a);case 24:ji(i,Ft,t.memoizedState.cache)}return vi(t,i,a)}function tv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Zt=!0;else{if(!_d(t,a)&&(i.flags&128)===0)return Zt=!1,FS(t,i,a);Zt=(t.flags&131072)!==0}else Zt=!1,Ze&&(i.flags&1048576)!==0&&Np(i,sc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Cf(l)?(t=na(l,t),i.tag=1,i=$y(null,i,l,t,a)):(i.tag=0,i=fd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ne){i.tag=11,i=Fy(null,i,l,t,a);break e}else if(h===C){i.tag=14,i=Gy(null,i,l,t,a);break e}}throw i=Be(l)||l,Error(s(306,i,""))}}return i;case 0:return fd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=na(l,i.pendingProps),$y(t,i,l,h,a);case 3:e:{if(ke(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,qf(t,i),gl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,ji(i,Ft,l),l!==d.cache&&Pf(i,[Ft],a,!0),dl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Zy(t,i,l,a);break e}else if(l!==h){h=$n(Error(s(424)),i),al(h),i=Zy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(wt=gr(t.firstChild),xn=i,Ze=!0,$s=null,Mr=!0,a=My(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(sl(),l===h){i=vi(t,i,a);break e}ln(t,i,l,a)}i=i.child}return i;case 26:return Ac(t,i),t===null?(a=s_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ze||(a=i.type,t=i.pendingProps,l=zc(pe.current).createElement(a),l[rt]=i,l[$e]=t,cn(l,a,t),xt(l),i.stateNode=l):i.memoizedState=s_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ne(i),t===null&&Ze&&(l=i.stateNode=n_(i.type,i.pendingProps,pe.current),xn=i,Mr=!0,h=wt,es(i.type)?(Jd=h,wt=gr(l.firstChild)):wt=h),ln(t,i,i.pendingProps.children,a),Ac(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ze&&((h=l=wt)&&(l=vw(l,i.type,i.pendingProps,Mr),l!==null?(i.stateNode=l,xn=i,wt=gr(l.firstChild),Mr=!1,h=!0):h=!1),h||Zs(i)),Ne(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Xd(h,d)?l=null:_!==null&&Xd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Qf(t,i,PS,null,null,a),Pl._currentValue=h),Ac(t,i),ln(t,i,l,a),i.child;case 6:return t===null&&Ze&&((t=a=wt)&&(a=_w(a,i.pendingProps,Mr),a!==null?(i.stateNode=a,xn=i,wt=null,t=!0):t=!1),t||Zs(i)),null;case 13:return Wy(t,i,a);case 4:return ke(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Za(i,null,l,a):ln(t,i,l,a),i.child;case 11:return Fy(t,i,i.type,i.pendingProps,a);case 7:return ln(t,i,i.pendingProps,a),i.child;case 8:return ln(t,i,i.pendingProps.children,a),i.child;case 12:return ln(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ji(i,i.type,l.value),ln(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Js(i),h=mn(h),l=l(h),i.flags|=1,ln(t,i,l,a),i.child;case 14:return Gy(t,i,i.type,i.pendingProps,a);case 15:return Ky(t,i,i.type,i.pendingProps,a);case 19:return ev(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Rc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=hi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Yy(t,i,a);case 24:return Js(i),l=mn(Ft),t===null?(h=jf(),h===null&&(h=ht,d=Lf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Bf(i),ji(i,Ft,h)):((t.lanes&a)!==0&&(qf(t,i),gl(i,null,null,a),dl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ji(i,Ft,l)):(l=d.cache,ji(i,Ft,l),l!==h.cache&&Pf(i,[Ft],a,!0))),ln(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function _i(t){t.flags|=4}function nv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!c_(i)){if(i=er.current,i!==null&&((Ke&4194048)===Ke?kr!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||i!==kr))throw hl=zf,jp;t.flags|=8192}}function xc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ns():536870912,t.lanes|=i,to|=i)}function El(t,i){if(!Ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function GS(t,i,a){var l=i.pendingProps;switch(Of(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(i),null;case 1:return _t(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),mi(Ft),Et(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(il(i)?_i(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kp())),_t(i),null;case 26:return a=i.memoizedState,t===null?(_i(i),a!==null?(_t(i),nv(i,a)):(_t(i),i.flags&=-16777217)):a?a!==t.memoizedState?(_i(i),_t(i),nv(i,a)):(_t(i),i.flags&=-16777217):(t.memoizedProps!==l&&_i(i),_t(i),i.flags&=-16777217),null;case 27:nn(i),a=pe.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&_i(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return _t(i),null}t=me.current,il(i)?Op(i):(t=n_(h,l,a),i.stateNode=t,_i(i))}return _t(i),null;case 5:if(nn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&_i(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return _t(i),null}if(t=me.current,il(i))Op(i);else{switch(h=zc(pe.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[rt]=i,t[$e]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(cn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&_i(i)}}return _t(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&_i(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=pe.current,il(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=xn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[rt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Xv(t.nodeValue,a)),t||Zs(i)}else t=zc(t).createTextNode(l),t[rt]=i,i.stateNode=t}return _t(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=il(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[rt]=i}else sl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_t(i),h=!1}else h=kp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(yi(i),i):(yi(i),null)}if(yi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),xc(i,i.updateQueue),_t(i),null;case 4:return Et(),t===null&&Fd(i.stateNode.containerInfo),_t(i),null;case 10:return mi(i.type),_t(i),null;case 19:if(ue(Gt),h=i.memoizedState,h===null)return _t(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)El(h,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Tc(t),d!==null){for(i.flags|=128,El(h,!1),t=d.updateQueue,i.updateQueue=t,xc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Dp(a,t),a=a.sibling;return le(Gt,Gt.current&1|2),i.child}t=t.sibling}h.tail!==null&&rn()>Dc&&(i.flags|=128,l=!0,El(h,!1),i.lanes=4194304)}else{if(!l)if(t=Tc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,xc(i,t),El(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ze)return _t(i),null}else 2*rn()-h.renderingStartTime>Dc&&a!==536870912&&(i.flags|=128,l=!0,El(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=rn(),i.sibling=null,t=Gt.current,le(Gt,l?t&1|2:t&1),i):(_t(i),null);case 22:case 23:return yi(i),Kf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(_t(i),i.subtreeFlags&6&&(i.flags|=8192)):_t(i),a=i.updateQueue,a!==null&&xc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ue(ea),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),mi(Ft),_t(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function KS(t,i){switch(Of(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return mi(Ft),Et(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return nn(i),null;case 13:if(yi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));sl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(Gt),null;case 4:return Et(),null;case 10:return mi(i.type),null;case 22:case 23:return yi(i),Kf(),t!==null&&ue(ea),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return mi(Ft),null;case 25:return null;default:return null}}function rv(t,i){switch(Of(i),i.tag){case 3:mi(Ft),Et();break;case 26:case 27:case 5:nn(i);break;case 4:Et();break;case 13:yi(i);break;case 19:ue(Gt);break;case 10:mi(i.type);break;case 22:case 23:yi(i),Kf(),t!==null&&ue(ea);break;case 24:mi(Ft)}}function Tl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(E){ut(i,i.return,E)}}function Ki(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=i;var O=a,H=E;try{H()}catch(W){ut(h,O,W)}}}l=l.next}while(l!==d)}}catch(W){ut(i,i.return,W)}}function iv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Gp(i,a)}catch(l){ut(t,t.return,l)}}}function sv(t,i,a){a.props=na(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,i,l)}}function Sl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ut(t,i,h)}}function Vr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(t,i,h)}else a.current=null}function av(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(t,t.return,h)}}function bd(t,i,a){try{var l=t.stateNode;dw(l,t.type,a,i),l[$e]=i}catch(h){ut(t,t.return,h)}}function ov(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function Ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ov(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=jc));else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Td(t,i,a),t=t.sibling;t!==null;)Td(t,i,a),t=t.sibling}function Cc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cc(t,i,a),t=t.sibling;t!==null;)Cc(t,i,a),t=t.sibling}function lv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);cn(i,l,a),i[rt]=t,i[$e]=a}catch(d){ut(t,t.return,d)}}var bi=!1,It=!1,Sd=!1,uv=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function YS(t,i){if(t=t.containerInfo,Yd=Kc,t=bp(t),Ef(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,E=-1,O=-1,H=0,W=0,te=t,F=null;t:for(;;){for(var G;te!==a||h!==0&&te.nodeType!==3||(E=_+h),te!==d||l!==0&&te.nodeType!==3||(O=_+l),te.nodeType===3&&(_+=te.nodeValue.length),(G=te.firstChild)!==null;)F=te,te=G;for(;;){if(te===t)break t;if(F===a&&++H===h&&(E=_),F===d&&++W===l&&(O=_),(G=te.nextSibling)!==null)break;te=F,F=te.parentNode}te=G}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:t,selectionRange:a},Kc=!1,Wt=i;Wt!==null;)if(i=Wt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Wt=t;else for(;Wt!==null;){switch(i=Wt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Se=na(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){ut(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Zd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Wt=t;break}Wt=i.return}}function cv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Yi(t,a),l&4&&Tl(5,a);break;case 1:if(Yi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){ut(a,a.return,_)}else{var h=na(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ut(a,a.return,_)}}l&64&&iv(a),l&512&&Sl(a,a.return);break;case 3:if(Yi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Gp(t,i)}catch(_){ut(a,a.return,_)}}break;case 27:i===null&&l&4&&lv(a);case 26:case 5:Yi(t,a),i===null&&l&4&&av(a),l&512&&Sl(a,a.return);break;case 12:Yi(t,a);break;case 13:Yi(t,a),l&4&&dv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=nw.bind(null,a),bw(t,a))));break;case 22:if(l=a.memoizedState!==null||bi,!l){i=i!==null&&i.memoizedState!==null||It,h=bi;var d=It;bi=l,(It=i)&&!d?Qi(t,a,(a.subtreeFlags&8772)!==0):Yi(t,a),bi=h,It=d}break;case 30:break;default:Yi(t,a)}}function hv(t){var i=t.alternate;i!==null&&(t.alternate=null,hv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Vi(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,Dn=!1;function Ei(t,i,a){for(a=a.child;a!==null;)fv(t,i,a),a=a.sibling}function fv(t,i,a){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:It||Vr(a,i),Ei(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Vr(a,i);var l=yt,h=Dn;es(a.type)&&(yt=a.stateNode,Dn=!1),Ei(t,i,a),Ol(a.stateNode),yt=l,Dn=h;break;case 5:It||Vr(a,i);case 6:if(l=yt,h=Dn,yt=null,Ei(t,i,a),yt=l,Dn=h,yt!==null)if(Dn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(d){ut(a,i,d)}else try{yt.removeChild(a.stateNode)}catch(d){ut(a,i,d)}break;case 18:yt!==null&&(Dn?(t=yt,e_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),zl(t)):e_(yt,a.stateNode));break;case 4:l=yt,h=Dn,yt=a.stateNode.containerInfo,Dn=!0,Ei(t,i,a),yt=l,Dn=h;break;case 0:case 11:case 14:case 15:It||Ki(2,a,i),It||Ki(4,a,i),Ei(t,i,a);break;case 1:It||(Vr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&sv(a,i,l)),Ei(t,i,a);break;case 21:Ei(t,i,a);break;case 22:It=(l=It)||a.memoizedState!==null,Ei(t,i,a),It=l;break;default:Ei(t,i,a)}}function dv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(a){ut(i,i.return,a)}}function QS(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new uv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new uv),i;default:throw Error(s(435,t.tag))}}function wd(t,i){var a=QS(t);i.forEach(function(l){var h=rw.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Un(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(es(E.type)){yt=E.stateNode,Dn=!1;break e}break;case 5:yt=E.stateNode,Dn=!1;break e;case 3:case 4:yt=E.stateNode.containerInfo,Dn=!0;break e}E=E.return}if(yt===null)throw Error(s(160));fv(d,_,h),yt=null,Dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)gv(i,t),i=i.sibling}var dr=null;function gv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Un(i,t),jn(t),l&4&&(Ki(3,t,t.return),Tl(3,t),Ki(5,t,t.return));break;case 1:Un(i,t),jn(t),l&512&&(It||a===null||Vr(a,a.return)),l&64&&bi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=dr;if(Un(i,t),jn(t),l&512&&(It||a===null||Vr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ur]||d[rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),cn(d,l,a),d[rt]=t,xt(d),l=d;break e;case"link":var _=l_("link","href",h).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(d=_[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}d=h.createElement(l),cn(d,l,a),h.head.appendChild(d);break;case"meta":if(_=l_("meta","content",h).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(d=_[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}d=h.createElement(l),cn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[rt]=t,xt(d),l=d}t.stateNode=l}else u_(h,t.type,t.stateNode);else t.stateNode=o_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?u_(h,t.type,t.stateNode):o_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&bd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Un(i,t),jn(t),l&512&&(It||a===null||Vr(a,a.return)),a!==null&&l&4&&bd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Un(i,t),jn(t),l&512&&(It||a===null||Vr(a,a.return)),t.flags&32){h=t.stateNode;try{Kn(h,"")}catch(G){ut(t,t.return,G)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,bd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Sd=!0);break;case 6:if(Un(i,t),jn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){ut(t,t.return,G)}}break;case 3:if(Hc=null,h=dr,dr=Bc(i.containerInfo),Un(i,t),dr=h,jn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{zl(i.containerInfo)}catch(G){ut(t,t.return,G)}Sd&&(Sd=!1,mv(t));break;case 4:l=dr,dr=Bc(t.stateNode.containerInfo),Un(i,t),jn(t),dr=l;break;case 12:Un(i,t),jn(t);break;case 13:Un(i,t),jn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dd=rn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,wd(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,H=bi,W=It;if(bi=H||h,It=W||O,Un(i,t),It=W,bi=H,jn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||O||bi||It||ra(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=O.stateNode;var te=O.memoizedProps.style,F=te!=null&&te.hasOwnProperty("display")?te.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(G){ut(O,O.return,G)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(G){ut(O,O.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,wd(t,a))));break;case 19:Un(i,t),jn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,wd(t,l)));break;case 30:break;case 21:break;default:Un(i,t),jn(t)}}function jn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(ov(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Ed(t);Cc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Kn(_,""),a.flags&=-33);var E=Ed(t);Cc(t,E,_);break;case 3:case 4:var O=a.stateNode.containerInfo,H=Ed(t);Td(t,H,O);break;default:throw Error(s(161))}}catch(W){ut(t,t.return,W)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function mv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;mv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Yi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)cv(t,i.alternate,i),i=i.sibling}function ra(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ki(4,i,i.return),ra(i);break;case 1:Vr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&sv(i,i.return,a),ra(i);break;case 27:Ol(i.stateNode);case 26:case 5:Vr(i,i.return),ra(i);break;case 22:i.memoizedState===null&&ra(i);break;case 30:ra(i);break;default:ra(i)}t=t.sibling}}function Qi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Qi(h,d,a),Tl(4,d);break;case 1:if(Qi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ut(l,l.return,H)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Fp(O[h],E)}catch(H){ut(l,l.return,H)}}a&&_&64&&iv(d),Sl(d,d.return);break;case 27:lv(d);case 26:case 5:Qi(h,d,a),a&&l===null&&_&4&&av(d),Sl(d,d.return);break;case 12:Qi(h,d,a);break;case 13:Qi(h,d,a),a&&_&4&&dv(h,d);break;case 22:d.memoizedState===null&&Qi(h,d,a),Sl(d,d.return);break;case 30:break;default:Qi(h,d,a)}i=i.sibling}}function Ad(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ll(a))}function Rd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ll(t))}function Pr(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pv(t,i,a,l),i=i.sibling}function pv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Pr(t,i,a,l),h&2048&&Tl(9,i);break;case 1:Pr(t,i,a,l);break;case 3:Pr(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ll(t)));break;case 12:if(h&2048){Pr(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,E=d.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){ut(i,i.return,O)}}else Pr(t,i,a,l);break;case 13:Pr(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Pr(t,i,a,l):wl(t,i):d._visibility&2?Pr(t,i,a,l):(d._visibility|=2,Wa(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Ad(_,i);break;case 24:Pr(t,i,a,l),h&2048&&Rd(i.alternate,i);break;default:Pr(t,i,a,l)}}function Wa(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,_=i,E=a,O=l,H=_.flags;switch(_.tag){case 0:case 11:case 15:Wa(d,_,E,O,h),Tl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?Wa(d,_,E,O,h):wl(d,_):(W._visibility|=2,Wa(d,_,E,O,h)),h&&H&2048&&Ad(_.alternate,_);break;case 24:Wa(d,_,E,O,h),h&&H&2048&&Rd(_.alternate,_);break;default:Wa(d,_,E,O,h)}i=i.sibling}}function wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:wl(a,l),h&2048&&Ad(l.alternate,l);break;case 24:wl(a,l),h&2048&&Rd(l.alternate,l);break;default:wl(a,l)}i=i.sibling}}var Al=8192;function Ja(t){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)yv(t),t=t.sibling}function yv(t){switch(t.tag){case 26:Ja(t),t.flags&Al&&t.memoizedState!==null&&Mw(dr,t.memoizedState,t.memoizedProps);break;case 5:Ja(t);break;case 3:case 4:var i=dr;dr=Bc(t.stateNode.containerInfo),Ja(t),dr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Al,Al=16777216,Ja(t),Al=i):Ja(t));break;default:Ja(t)}}function vv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Rl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Wt=l,bv(l,t)}vv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_v(t),t=t.sibling}function _v(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&Ki(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ic(t)):Rl(t);break;default:Rl(t)}}function Ic(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Wt=l,bv(l,t)}vv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ki(8,i,i.return),Ic(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ic(i));break;default:Ic(i)}t=t.sibling}}function bv(t,i){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:Ki(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Wt=l;else e:for(a=t;Wt!==null;){l=Wt;var h=l.sibling,d=l.return;if(hv(l),l===a){Wt=null;break e}if(h!==null){h.return=d,Wt=h;break e}Wt=d}}}var XS={getCacheForType:function(t){var i=mn(Ft),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},$S=typeof WeakMap=="function"?WeakMap:Map,et=0,ht=null,Ve=null,Ke=0,tt=0,zn=null,Xi=!1,eo=!1,xd=!1,Ti=0,At=0,$i=0,ia=0,Cd=0,tr=0,to=0,xl=null,Nn=null,Id=!1,Dd=0,Dc=1/0,Nc=null,Zi=null,un=0,Wi=null,no=null,ro=0,Nd=0,Od=null,Ev=null,Cl=0,Md=null;function Bn(){if((et&2)!==0&&Ke!==0)return Ke&-Ke;if(Z.T!==null){var t=Fa;return t!==0?t:zd()}return Bt()}function Tv(){tr===0&&(tr=(Ke&536870912)===0||Ze?Ds():536870912);var t=er.current;return t!==null&&(t.flags|=32),tr}function qn(t,i,a){(t===ht&&(tt===2||tt===9)||t.cancelPendingCommit!==null)&&(io(t,0),Ji(t,Ke,tr,!1)),ct(t,a),((et&2)===0||t!==ht)&&(t===ht&&((et&2)===0&&(ia|=a),At===4&&Ji(t,Ke,tr,!1)),Lr(t))}function Sv(t,i,a){if((et&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Jr(t,i),h=l?JS(t,i):Pd(t,i,!0),d=l;do{if(h===0){eo&&!l&&Ji(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!ZS(a)){h=Pd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=t;h=xl;var O=E.current.memoizedState.isDehydrated;if(O&&(io(E,_).flags|=256),_=Pd(E,_,!1),_!==2){if(xd&&!O){E.errorRecoveryDisabledLanes|=d,ia|=d,h=4;break e}d=Nn,Nn=h,d!==null&&(Nn===null?Nn=d:Nn.push.apply(Nn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){io(t,0),Ji(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ji(l,i,tr,!Xi);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Dd+300-rn(),10<h)){if(Ji(l,i,tr,!Xi),Wr(l,0,!0)!==0)break e;l.timeoutHandle=Wv(wv.bind(null,l,a,Nn,Nc,Id,i,tr,ia,to,Xi,d,2,-0,0),h);break e}wv(l,a,Nn,Nc,Id,i,tr,ia,to,Xi,d,0,-0,0)}}break}while(!0);Lr(t)}function wv(t,i,a,l,h,d,_,E,O,H,W,te,F,G){if(t.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Vl={stylesheets:null,count:0,unsuspend:Ow},yv(i),te=kw(),te!==null)){t.cancelPendingCommit=te(Nv.bind(null,t,i,d,a,l,h,_,E,O,W,1,F,G)),Ji(t,d,_,!H);return}Nv(t,i,d,a,l,h,_,E,O)}function ZS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Pn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ji(t,i,a,l){i&=~Cd,i&=~ia,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Tt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&pt(t,a,i)}function Oc(){return(et&6)===0?(Il(0),!1):!0}function kd(){if(Ve!==null){if(tt===0)var t=Ve.return;else t=Ve,gi=Ws=null,Zf(t),$a=null,_l=0,t=Ve;for(;t!==null;)rv(t.alternate,t),t=t.return;Ve=null}}function io(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,mw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),kd(),ht=t,Ve=a=hi(t.current,null),Ke=i,tt=0,zn=null,Xi=!1,eo=Jr(t,i),xd=!1,to=tr=Cd=ia=$i=At=0,Nn=xl=null,Id=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Tt(l),d=1<<h;i|=t[h],l&=~d}return Ti=i,ec(),a}function Av(t,i){Oe=null,Z.H=_c,i===cl||i===uc?(i=qp(),tt=3):i===jp?(i=qp(),tt=4):tt=i===Hy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zn=i,Ve===null&&(At=1,wc(t,$n(i,t.current)))}function Rv(){var t=Z.H;return Z.H=_c,t===null?_c:t}function xv(){var t=Z.A;return Z.A=XS,t}function Vd(){At=4,Xi||(Ke&4194048)!==Ke&&er.current!==null||(eo=!0),($i&134217727)===0&&(ia&134217727)===0||ht===null||Ji(ht,Ke,tr,!1)}function Pd(t,i,a){var l=et;et|=2;var h=Rv(),d=xv();(ht!==t||Ke!==i)&&(Nc=null,io(t,i)),i=!1;var _=At;e:do try{if(tt!==0&&Ve!==null){var E=Ve,O=zn;switch(tt){case 8:kd(),_=6;break e;case 3:case 2:case 9:case 6:er.current===null&&(i=!0);var H=tt;if(tt=0,zn=null,so(t,E,O,H),a&&eo){_=0;break e}break;default:H=tt,tt=0,zn=null,so(t,E,O,H)}}WS(),_=At;break}catch(W){Av(t,W)}while(!0);return i&&t.shellSuspendCounter++,gi=Ws=null,et=l,Z.H=h,Z.A=d,Ve===null&&(ht=null,Ke=0,ec()),_}function WS(){for(;Ve!==null;)Cv(Ve)}function JS(t,i){var a=et;et|=2;var l=Rv(),h=xv();ht!==t||Ke!==i?(Nc=null,Dc=rn()+500,io(t,i)):eo=Jr(t,i);e:do try{if(tt!==0&&Ve!==null){i=Ve;var d=zn;t:switch(tt){case 1:tt=0,zn=null,so(t,i,d,1);break;case 2:case 9:if(zp(d)){tt=0,zn=null,Iv(i);break}i=function(){tt!==2&&tt!==9||ht!==t||(tt=7),Lr(t)},d.then(i,i);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:zp(d)?(tt=0,zn=null,Iv(i)):(tt=0,zn=null,so(t,i,d,7));break;case 5:var _=null;switch(Ve.tag){case 26:_=Ve.memoizedState;case 5:case 27:var E=Ve;if(!_||c_(_)){tt=0,zn=null;var O=E.sibling;if(O!==null)Ve=O;else{var H=E.return;H!==null?(Ve=H,Mc(H)):Ve=null}break t}}tt=0,zn=null,so(t,i,d,5);break;case 6:tt=0,zn=null,so(t,i,d,6);break;case 8:kd(),At=6;break e;default:throw Error(s(462))}}ew();break}catch(W){Av(t,W)}while(!0);return gi=Ws=null,Z.H=l,Z.A=h,et=a,Ve!==null?0:(ht=null,Ke=0,ec(),At)}function ew(){for(;Ve!==null&&!gn();)Cv(Ve)}function Cv(t){var i=tv(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,i===null?Mc(t):Ve=i}function Iv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Xy(a,i,i.pendingProps,i.type,void 0,Ke);break;case 11:i=Xy(a,i,i.pendingProps,i.type.render,i.ref,Ke);break;case 5:Zf(i);default:rv(a,i),i=Ve=Dp(i,Ti),i=tv(a,i,Ti)}t.memoizedProps=t.pendingProps,i===null?Mc(t):Ve=i}function so(t,i,a,l){gi=Ws=null,Zf(i),$a=null,_l=0;var h=i.return;try{if(HS(t,h,i,a,Ke)){At=1,wc(t,$n(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;At=1,wc(t,$n(a,t.current)),Ve=null;return}i.flags&32768?(Ze||l===1?t=!0:eo||(Ke&536870912)!==0?t=!1:(Xi=t=!0,(l===2||l===9||l===3||l===6)&&(l=er.current,l!==null&&l.tag===13&&(l.flags|=16384))),Dv(i,t)):Mc(i)}function Mc(t){var i=t;do{if((i.flags&32768)!==0){Dv(i,Xi);return}t=i.return;var a=GS(i.alternate,i,Ti);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);At===0&&(At=5)}function Dv(t,i){do{var a=KS(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);At=6,Ve=null}function Nv(t,i,a,l,h,d,_,E,O){t.cancelPendingCommit=null;do kc();while(un!==0);if((et&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Rf,zt(t,a,d,_,E,O),t===ht&&(Ve=ht=null,Ke=0),no=i,Wi=t,ro=a,Nd=d,Od=h,Ev=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,iw(Fn,function(){return Pv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null,h=oe.p,oe.p=2,_=et,et|=4;try{YS(t,i,a)}finally{et=_,oe.p=h,Z.T=l}}un=1,Ov(),Mv(),kv()}}function Ov(){if(un===1){un=0;var t=Wi,i=no,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null;var l=oe.p;oe.p=2;var h=et;et|=4;try{gv(i,t);var d=Qd,_=bp(t.containerInfo),E=d.focusedElem,O=d.selectionRange;if(_!==E&&E&&E.ownerDocument&&_p(E.ownerDocument.documentElement,E)){if(O!==null&&Ef(E)){var H=O.start,W=O.end;if(W===void 0&&(W=H),"selectionStart"in E)E.selectionStart=H,E.selectionEnd=Math.min(W,E.value.length);else{var te=E.ownerDocument||document,F=te&&te.defaultView||window;if(F.getSelection){var G=F.getSelection(),Se=E.textContent.length,_e=Math.min(O.start,Se),ot=O.end===void 0?_e:Math.min(O.end,Se);!G.extend&&_e>ot&&(_=ot,ot=_e,_e=_);var U=vp(E,_e),P=vp(E,ot);if(U&&P&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==P.node||G.focusOffset!==P.offset)){var q=te.createRange();q.setStart(U.node,U.offset),G.removeAllRanges(),_e>ot?(G.addRange(q),G.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),G.addRange(q))}}}}for(te=[],G=E;G=G.parentNode;)G.nodeType===1&&te.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<te.length;E++){var J=te[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Kc=!!Yd,Qd=Yd=null}finally{et=h,oe.p=l,Z.T=a}}t.current=i,un=2}}function Mv(){if(un===2){un=0;var t=Wi,i=no,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Z.T,Z.T=null;var l=oe.p;oe.p=2;var h=et;et|=4;try{cv(t,i.alternate,i)}finally{et=h,oe.p=l,Z.T=a}}un=3}}function kv(){if(un===4||un===3){un=0,En();var t=Wi,i=no,a=ro,l=Ev;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?un=5:(un=0,no=Wi=null,Vv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Zi=null),Ot(a),i=i.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(mt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Z.T,h=oe.p,oe.p=2,Z.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];d(E.value,{componentStack:E.stack})}}finally{Z.T=i,oe.p=h}}(ro&3)!==0&&kc(),Lr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Md?Cl++:(Cl=0,Md=t):Cl=0,Il(0)}}function Vv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,ll(i)))}function kc(t){return Ov(),Mv(),kv(),Pv()}function Pv(){if(un!==5)return!1;var t=Wi,i=Nd;Nd=0;var a=Ot(ro),l=Z.T,h=oe.p;try{oe.p=32>a?32:a,Z.T=null,a=Od,Od=null;var d=Wi,_=ro;if(un=0,no=Wi=null,ro=0,(et&6)!==0)throw Error(s(331));var E=et;if(et|=4,_v(d.current),pv(d,d.current,_,a),et=E,Il(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(mt,d)}catch{}return!0}finally{oe.p=h,Z.T=l,Vv(t,i)}}function Lv(t,i,a){i=$n(a,i),i=hd(t.stateNode,i,2),t=qi(t,i,2),t!==null&&(ct(t,2),Lr(t))}function ut(t,i,a){if(t.tag===3)Lv(t,t,a);else for(;i!==null;){if(i.tag===3){Lv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Zi===null||!Zi.has(l))){t=$n(a,t),a=By(2),l=qi(i,a,2),l!==null&&(qy(a,l,i,t),ct(l,2),Lr(l));break}}i=i.return}}function Ld(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new $S;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(xd=!0,h.add(a),t=tw.bind(null,t,i,a),i.then(t,t))}function tw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(Ke&a)===a&&(At===4||At===3&&(Ke&62914560)===Ke&&300>rn()-Dd?(et&2)===0&&io(t,0):Cd|=a,to===Ke&&(to=0)),Lr(t)}function Uv(t,i){i===0&&(i=Ns()),t=za(t,i),t!==null&&(ct(t,i),Lr(t))}function nw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Uv(t,a)}function rw(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Uv(t,a)}function iw(t,i){return nt(t,i)}var Vc=null,ao=null,Ud=!1,Pc=!1,jd=!1,sa=0;function Lr(t){t!==ao&&t.next===null&&(ao===null?Vc=ao=t:ao=ao.next=t),Pc=!0,Ud||(Ud=!0,aw())}function Il(t,i){if(!jd&&Pc){jd=!0;do for(var a=!1,l=Vc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-Tt(42|t)+1)-1,d&=h&~(_&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,qv(l,d))}else d=Ke,d=Wr(l,l===ht?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Jr(l,d)||(a=!0,qv(l,d));l=l.next}while(a);jd=!1}}function sw(){jv()}function jv(){Pc=Ud=!1;var t=0;sa!==0&&(gw()&&(t=sa),sa=0);for(var i=rn(),a=null,l=Vc;l!==null;){var h=l.next,d=zv(l,i);d===0?(l.next=null,a===null?Vc=h:a.next=h,h===null&&(ao=a)):(a=l,(t!==0||(d&3)!==0)&&(Pc=!0)),l=h}Il(t)}function zv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Tt(d),E=1<<_,O=h[_];O===-1?((E&a)===0||(E&l)!==0)&&(h[_]=ki(E,i)):O<=i&&(t.expiredLanes|=E),d&=~E}if(i=ht,a=Ke,a=Wr(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(tt===2||tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&vt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Jr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&vt(l),Ot(a)){case 2:case 8:a=Tn;break;case 32:a=Fn;break;case 268435456:a=Xr;break;default:a=Fn}return l=Bv.bind(null,t),a=nt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&vt(l),t.callbackPriority=2,t.callbackNode=null,2}function Bv(t,i){if(un!==0&&un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(kc()&&t.callbackNode!==a)return null;var l=Ke;return l=Wr(t,t===ht?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Sv(t,l,i),zv(t,rn()),t.callbackNode!=null&&t.callbackNode===a?Bv.bind(null,t):null)}function qv(t,i){if(kc())return null;Sv(t,i,!0)}function aw(){pw(function(){(et&6)!==0?nt(Qr,sw):jv()})}function zd(){return sa===0&&(sa=Ds()),sa}function Hv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function Fv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function ow(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Hv((h[$e]||null).action),_=l.submitter;_&&(i=(i=_[$e]||null)?Hv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var E=new Ia("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sa!==0){var O=_?Fv(h,_):new FormData(h);ad(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(E.preventDefault(),O=_?Fv(h,_):new FormData(h),ad(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var Bd=0;Bd<Af.length;Bd++){var qd=Af[Bd],lw=qd.toLowerCase(),uw=qd[0].toUpperCase()+qd.slice(1);fr(lw,"on"+uw)}fr(Sp,"onAnimationEnd"),fr(wp,"onAnimationIteration"),fr(Ap,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(RS,"onTransitionRun"),fr(xS,"onTransitionStart"),fr(CS,"onTransitionCancel"),fr(Rp,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function Gv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var E=l[_],O=E.instance,H=E.currentTarget;if(E=E.listener,O!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=H;try{d(h)}catch(W){Sc(W)}h.currentTarget=null,d=O}else for(_=0;_<l.length;_++){if(E=l[_],O=E.instance,H=E.currentTarget,E=E.listener,O!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=H;try{d(h)}catch(W){Sc(W)}h.currentTarget=null,d=O}}}}function Pe(t,i){var a=i[lr];a===void 0&&(a=i[lr]=new Set);var l=t+"__bubble";a.has(l)||(Kv(i,t,2,!1),a.add(l))}function Hd(t,i,a){var l=0;i&&(l|=4),Kv(a,t,l,i)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[Lc]){t[Lc]=!0,qo.forEach(function(a){a!=="selectionchange"&&(cw.has(a)||Hd(a,!1,t),Hd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Lc]||(i[Lc]=!0,Hd("selectionchange",!1,i))}}function Kv(t,i,a,l){switch(p_(i)){case 2:var h=Lw;break;case 8:h=Uw;break;default:h=ig}a=h.bind(null,i,a,t),h=void 0,!Qn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Gd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=ti(E),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=d=_;continue e}E=E.parentNode}}l=l.return}ju(function(){var H=d,W=Yn(a),te=[];e:{var F=xp.get(t);if(F!==void 0){var G=Ia,Se=t;switch(t){case"keypress":if(Cr(a)===0)break e;case"keydown":case"keyup":G=Va;break;case"focusin":Se="focus",G=Oa;break;case"focusout":Se="blur",G=Oa;break;case"beforeblur":case"afterblur":G=Oa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=yf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Yu;break;case Sp:case wp:case Ap:G=Ma;break;case Rp:G=Xu;break;case"scroll":case"scrollend":G=zu;break;case"wheel":G=Pa;break;case"copy":case"cut":case"paste":G=ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=el;break;case"toggle":case"beforetoggle":G=Zu}var _e=(i&4)!==0,ot=!_e&&(t==="scroll"||t==="scrollend"),U=_e?F!==null?F+"Capture":null:F;_e=[];for(var P=H,q;P!==null;){var J=P;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||U===null||(J=Us(P,U),J!=null&&_e.push(Nl(P,J,q))),ot)break;P=P.return}0<_e.length&&(F=new G(F,Se,null,a,W),te.push({event:F,listeners:_e}))}}if((i&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",F&&a!==si&&(Se=a.relatedTarget||a.fromElement)&&(ti(Se)||Se[St]))break e;if((G||F)&&(F=W.window===W?W:(F=W.ownerDocument)?F.defaultView||F.parentWindow:window,G?(Se=a.relatedTarget||a.toElement,G=H,Se=Se?ti(Se):null,Se!==null&&(ot=u(Se),_e=Se.tag,Se!==ot||_e!==5&&_e!==27&&_e!==6)&&(Se=null)):(G=null,Se=H),G!==Se)){if(_e=Xn,J="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(_e=el,J="onPointerLeave",U="onPointerEnter",P="pointer"),ot=G==null?F:wr(G),q=Se==null?F:wr(Se),F=new _e(J,P+"leave",G,a,W),F.target=ot,F.relatedTarget=q,J=null,ti(W)===H&&(_e=new _e(U,P+"enter",Se,a,W),_e.target=q,_e.relatedTarget=ot,J=_e),ot=J,G&&Se)t:{for(_e=G,U=Se,P=0,q=_e;q;q=oo(q))P++;for(q=0,J=U;J;J=oo(J))q++;for(;0<P-q;)_e=oo(_e),P--;for(;0<q-P;)U=oo(U),q--;for(;P--;){if(_e===U||U!==null&&_e===U.alternate)break t;_e=oo(_e),U=oo(U)}_e=null}else _e=null;G!==null&&Yv(te,F,G,_e,!1),Se!==null&&ot!==null&&Yv(te,ot,Se,_e,!0)}}e:{if(F=H?wr(H):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var ge=fp;else if(Ht(F))if(dp)ge=SS;else{ge=ES;var Me=bS}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Yo(H.elementType)&&(ge=fp):ge=TS;if(ge&&(ge=ge(t,H))){ci(te,ge,a,W);break e}Me&&Me(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Li(F,"number",F.value)}switch(Me=H?wr(H):window,t){case"focusin":(Ht(Me)||Me.contentEditable==="true")&&(La=Me,Tf=H,rl=null);break;case"focusout":rl=Tf=La=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,Ep(te,a,W);break;case"selectionchange":if(AS)break;case"keydown":case"keyup":Ep(te,a,W)}var ye;if(Nr)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Fe?Q(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(Fe||be!=="onCompositionStart"?be==="onCompositionEnd"&&Fe&&(ye=Xo()):(xr=W,Ui="value"in xr?xr.value:xr.textContent,Fe=!0)),Me=Uc(H,be),0<Me.length&&(be=new Wo(be,t,null,a,W),te.push({event:be,listeners:Me}),ye?be.data=ye:(ye=ce(a),ye!==null&&(be.data=ye)))),(ye=y?qt(t,a):Ge(t,a))&&(be=Uc(H,"onBeforeInput"),0<be.length&&(Me=new Wo("onBeforeInput","beforeinput",null,a,W),te.push({event:Me,listeners:be}),Me.data=ye)),ow(te,t,H,a,W)}Gv(te,i)})}function Nl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Uc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Us(t,a),h!=null&&l.unshift(Nl(t,h,d)),h=Us(t,i),h!=null&&l.push(Nl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yv(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var E=a,O=E.alternate,H=E.stateNode;if(E=E.tag,O!==null&&O===l)break;E!==5&&E!==26&&E!==27||H===null||(O=H,h?(H=Us(a,d),H!=null&&_.unshift(Nl(a,H,O))):h||(H=Us(a,d),H!=null&&_.push(Nl(a,H,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var hw=/\r\n?/g,fw=/\u0000|\uFFFD/g;function Qv(t){return(typeof t=="string"?t:""+t).replace(hw,`
`).replace(fw,"")}function Xv(t,i){return i=Qv(i),Qv(t)===i}function jc(){}function at(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Kn(t,""+l);break;case"className":Ar(t,"class",l);break;case"tabIndex":Ar(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(t,a,l);break;case"style":Ko(t,l,d);break;case"data":if(i!=="object"){Ar(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&at(t,i,"name",h.name,h,null),at(t,i,"formEncType",h.formEncType,h,null),at(t,i,"formMethod",h.formMethod,h,null),at(t,i,"formTarget",h.formTarget,h,null)):(at(t,i,"encType",h.encType,h,null),at(t,i,"method",h.method,h,null),at(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=jc);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Pi(t,"popover",l);break;case"xlinkActuate":an(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":an(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":an(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":an(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":an(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":an(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":an(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":an(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":an(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mf.get(a)||a,Pi(t,a,l))}}function Kd(t,i,a,l,h,d){switch(a){case"style":Ko(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&Kn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[$e]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Pi(t,a,l)}}}function cn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:at(t,i,d,_,a,null)}}h&&at(t,i,"srcSet",a.srcSet,a,null),l&&at(t,i,"src",a.src,a,null);return;case"input":Pe("invalid",t);var E=d=_=h=null,O=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":_=W;break;case"checked":O=W;break;case"defaultChecked":H=W;break;case"value":d=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:at(t,i,l,W,a,null)}}Vs(t,d,E,O,H,_,h,!1),xa(t);return;case"select":Pe("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:at(t,i,h,E,a,null)}i=d,a=_,t.multiple=!!l,i!=null?ii(t,!!l,i,!1):a!=null&&ii(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:at(t,i,_,E,a,null)}Ps(t,l,h,d),xa(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,i,O,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Pe(Dl[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:at(t,i,H,l,a,null)}return;default:if(Yo(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Kd(t,i,W,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&at(t,i,E,l,a,null))}function dw(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,E=null,O=null,H=null,W=null;for(G in a){var te=a[G];if(a.hasOwnProperty(G)&&te!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":O=te;default:l.hasOwnProperty(G)||at(t,i,G,null,l,te)}}for(var F in l){var G=l[F];if(te=a[F],l.hasOwnProperty(F)&&(G!=null||te!=null))switch(F){case"type":d=G;break;case"name":h=G;break;case"checked":H=G;break;case"defaultChecked":W=G;break;case"value":_=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==te&&at(t,i,F,G,l,te)}}Vn(t,_,E,O,H,W,d,h);return;case"select":G=_=E=F=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":G=O;default:l.hasOwnProperty(d)||at(t,i,d,null,l,O)}for(h in l)if(d=l[h],O=a[h],l.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":F=d;break;case"defaultValue":E=d;break;case"multiple":_=d;default:d!==O&&at(t,i,h,d,l,O)}i=E,a=_,l=G,F!=null?ii(t,!!a,F,!1):!!l!=!!a&&(i!=null?ii(t,!!a,i,!0):ii(t,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:at(t,i,E,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":F=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&at(t,i,_,h,l,d)}it(t,F,G);return;case"option":for(var Se in a)if(F=a[Se],a.hasOwnProperty(Se)&&F!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:at(t,i,Se,null,l,F)}for(O in l)if(F=l[O],G=a[O],l.hasOwnProperty(O)&&F!==G&&(F!=null||G!=null))switch(O){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:at(t,i,O,F,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)F=a[_e],a.hasOwnProperty(_e)&&F!=null&&!l.hasOwnProperty(_e)&&at(t,i,_e,null,l,F);for(H in l)if(F=l[H],G=a[H],l.hasOwnProperty(H)&&F!==G&&(F!=null||G!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:at(t,i,H,F,l,G)}return;default:if(Yo(i)){for(var ot in a)F=a[ot],a.hasOwnProperty(ot)&&F!==void 0&&!l.hasOwnProperty(ot)&&Kd(t,i,ot,void 0,l,F);for(W in l)F=l[W],G=a[W],!l.hasOwnProperty(W)||F===G||F===void 0&&G===void 0||Kd(t,i,W,F,l,G);return}}for(var U in a)F=a[U],a.hasOwnProperty(U)&&F!=null&&!l.hasOwnProperty(U)&&at(t,i,U,null,l,F);for(te in l)F=l[te],G=a[te],!l.hasOwnProperty(te)||F===G||F==null&&G==null||at(t,i,te,F,l,G)}var Yd=null,Qd=null;function zc(t){return t.nodeType===9?t:t.ownerDocument}function $v(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Xd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $d=null;function gw(){var t=window.event;return t&&t.type==="popstate"?t===$d?!1:($d=t,!0):($d=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,pw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(t){return Jv.resolve(null).then(t).catch(yw)}:Wv;function yw(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function e_(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&Ol(_.documentElement),a&2&&Ol(_.body),a&4)for(a=_.head,Ol(a),_=a.firstChild;_;){var E=_.nextSibling,O=_.nodeName;_[ur]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=E}}if(h===0){t.removeChild(d),zl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);zl(i)}function Zd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zd(a),Vi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function vw(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ur])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=gr(t.nextSibling),t===null)break}return null}function _w(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=gr(t.nextSibling),t===null))return null;return t}function Wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function bw(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function gr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Jd=null;function t_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function n_(t,i,a){switch(i=zc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ol(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Vi(t)}var nr=new Map,r_=new Set;function Bc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Si=oe.d;oe.d={f:Ew,r:Tw,D:Sw,C:ww,L:Aw,m:Rw,X:Cw,S:xw,M:Iw};function Ew(){var t=Si.f(),i=Oc();return t||i}function Tw(t){var i=Sr(t);i!==null&&i.tag===5&&i.type==="form"?Sy(i):Si.r(t)}var lo=typeof document>"u"?null:document;function i_(t,i,a){var l=lo;if(l&&typeof i=="string"&&i){var h=Mt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),r_.has(h)||(r_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),cn(i,"link",t),xt(i),l.head.appendChild(i)))}}function Sw(t){Si.D(t),i_("dns-prefetch",t,null)}function ww(t,i){Si.C(t,i),i_("preconnect",t,i)}function Aw(t,i,a){Si.L(t,i,a);var l=lo;if(l&&t&&i){var h='link[rel="preload"][as="'+Mt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Mt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Mt(a.imageSizes)+'"]')):h+='[href="'+Mt(t)+'"]';var d=h;switch(i){case"style":d=uo(t);break;case"script":d=co(t)}nr.has(d)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),nr.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ml(d))||i==="script"&&l.querySelector(kl(d))||(i=l.createElement("link"),cn(i,"link",t),xt(i),l.head.appendChild(i)))}}function Rw(t,i){Si.m(t,i);var a=lo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Mt(l)+'"][href="'+Mt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=co(t)}if(!nr.has(d)&&(t=b({rel:"modulepreload",href:t},i),nr.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(d)))return}l=a.createElement("link"),cn(l,"link",t),xt(l),a.head.appendChild(l)}}}function xw(t,i,a){Si.S(t,i,a);var l=lo;if(l&&t){var h=wn(l).hoistableStyles,d=uo(t);i=i||"default";var _=h.get(d);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(Ml(d)))E.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=nr.get(d))&&eg(t,a);var O=_=l.createElement("link");xt(O),cn(O,"link",t),O._p=new Promise(function(H,W){O.onload=H,O.onerror=W}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,qc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(d,_)}}}function Cw(t,i){Si.X(t,i);var a=lo;if(a&&t){var l=wn(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=b({src:t,async:!0},i),(i=nr.get(h))&&tg(t,i),d=a.createElement("script"),xt(d),cn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Iw(t,i){Si.M(t,i);var a=lo;if(a&&t){var l=wn(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=b({src:t,async:!0,type:"module"},i),(i=nr.get(h))&&tg(t,i),d=a.createElement("script"),xt(d),cn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function s_(t,i,a,l){var h=(h=pe.current)?Bc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=uo(a.href),a=wn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uo(a.href);var d=wn(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Ml(t)))&&!d._p&&(_.instance=d,_.state.loading=5),nr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},nr.set(t,a),d||Dw(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=co(a),a=wn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function uo(t){return'href="'+Mt(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function a_(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Dw(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),cn(i,"link",a),xt(i),t.head.appendChild(i))}function co(t){return'[src="'+Mt(t)+'"]'}function kl(t){return"script[async]"+t}function o_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Mt(a.href)+'"]');if(l)return i.instance=l,xt(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),cn(l,"style",h),qc(l,a.precedence,t),i.instance=l;case"stylesheet":h=uo(a.href);var d=t.querySelector(Ml(h));if(d)return i.state.loading|=4,i.instance=d,xt(d),d;l=a_(a),(h=nr.get(h))&&eg(l,h),d=(t.ownerDocument||t).createElement("link"),xt(d);var _=d;return _._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),cn(d,"link",l),i.state.loading|=4,qc(d,a.precedence,t),i.instance=d;case"script":return d=co(a.src),(h=t.querySelector(kl(d)))?(i.instance=h,xt(h),h):(l=a,(h=nr.get(d))&&(l=b({},a),tg(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),xt(h),cn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,qc(l,a.precedence,t));return i.instance}function qc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function eg(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function tg(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Hc=null;function l_(t,i,a){if(Hc===null){var l=new Map,h=Hc=new Map;h.set(a,l)}else h=Hc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ur]||d[rt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var E=l.get(_);E?E.push(d):l.set(_,[d])}}return l}function u_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Nw(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function c_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Vl=null;function Ow(){}function Mw(t,i,a){if(Vl===null)throw Error(s(475));var l=Vl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=uo(a.href),d=t.querySelector(Ml(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Fc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,xt(d);return}d=t.ownerDocument||t,a=a_(a),(h=nr.get(h))&&eg(a,h),d=d.createElement("link"),xt(d);var _=d;_._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),cn(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Fc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function kw(){if(Vl===null)throw Error(s(475));var t=Vl;return t.stylesheets&&t.count===0&&ng(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&ng(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Fc(){if(this.count--,this.count===0){if(this.stylesheets)ng(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Gc=null;function ng(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Gc=new Map,i.forEach(Vw,t),Gc=null,Fc.call(t))}function Vw(t,i){if(!(i.state.loading&4)){var a=Gc.get(t);if(a)var l=a.get(null);else{a=new Map,Gc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Fc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Pl={$$typeof:X,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Pw(t,i,a,l,h,d,_,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.hiddenUpdates=ar(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function h_(t,i,a,l,h,d,_,E,O,H,W,te){return t=new Pw(t,i,a,_,E,O,H,te),i=1,d===!0&&(i|=24),d=Ln(3,null,null,i),t.current=d,d.stateNode=t,i=Lf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Bf(d),t}function f_(t){return t?(t=Ba,t):Ba}function d_(t,i,a,l,h,d){h=f_(h),l.context===null?l.context=h:l.pendingContext=h,l=Bi(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=qi(t,l,i),a!==null&&(qn(a,t,i),fl(a,t,i))}function g_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function rg(t,i){g_(t,i),(t=t.alternate)&&g_(t,i)}function m_(t){if(t.tag===13){var i=za(t,67108864);i!==null&&qn(i,t,67108864),rg(t,67108864)}}var Kc=!0;function Lw(t,i,a,l){var h=Z.T;Z.T=null;var d=oe.p;try{oe.p=2,ig(t,i,a,l)}finally{oe.p=d,Z.T=h}}function Uw(t,i,a,l){var h=Z.T;Z.T=null;var d=oe.p;try{oe.p=8,ig(t,i,a,l)}finally{oe.p=d,Z.T=h}}function ig(t,i,a,l){if(Kc){var h=sg(l);if(h===null)Gd(t,i,l,Yc,a),y_(t,l);else if(zw(h,t,i,a,l))l.stopPropagation();else if(y_(t,l),i&4&&-1<jw.indexOf(t)){for(;h!==null;){var d=Sr(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Sn(d.pendingLanes);if(_!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var O=1<<31-Tt(_);E.entanglements[1]|=O,_&=~O}Lr(d),(et&6)===0&&(Dc=rn()+500,Il(0))}}break;case 13:E=za(d,2),E!==null&&qn(E,d,2),Oc(),rg(d,2)}if(d=sg(l),d===null&&Gd(t,i,l,Yc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Gd(t,i,l,null,a)}}function sg(t){return t=Yn(t),ag(t)}var Yc=null;function ag(t){if(Yc=null,t=ti(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Yc=t,null}function p_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ea()){case Qr:return 2;case Tn:return 8;case Fn:case Oi:return 32;case Xr:return 268435456;default:return 32}default:return 32}}var og=!1,ts=null,ns=null,rs=null,Ll=new Map,Ul=new Map,is=[],jw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y_(t,i){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(i.pointerId)}}function jl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Sr(i),i!==null&&m_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function zw(t,i,a,l,h){switch(i){case"focusin":return ts=jl(ts,t,i,a,l,h),!0;case"dragenter":return ns=jl(ns,t,i,a,l,h),!0;case"mouseover":return rs=jl(rs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ll.set(d,jl(Ll.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ul.set(d,jl(Ul.get(d)||null,t,i,a,l,h)),!0}return!1}function v_(t){var i=ti(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,or(t.priority,function(){if(a.tag===13){var l=Bn();l=Rt(l);var h=za(a,l);h!==null&&qn(h,a,l),rg(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=sg(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);si=l,a.target.dispatchEvent(l),si=null}else return i=Sr(a),i!==null&&m_(i),t.blockedOn=a,!1;i.shift()}return!0}function __(t,i,a){Qc(t)&&a.delete(i)}function Bw(){og=!1,ts!==null&&Qc(ts)&&(ts=null),ns!==null&&Qc(ns)&&(ns=null),rs!==null&&Qc(rs)&&(rs=null),Ll.forEach(__),Ul.forEach(__)}function Xc(t,i){t.blockedOn===i&&(t.blockedOn=null,og||(og=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bw)))}var $c=null;function b_(t){$c!==t&&($c=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$c===t&&($c=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(ag(l||a)===null)continue;break}var d=Sr(a);d!==null&&(t.splice(i,3),i-=3,ad(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function zl(t){function i(O){return Xc(O,t)}ts!==null&&Xc(ts,t),ns!==null&&Xc(ns,t),rs!==null&&Xc(rs,t),Ll.forEach(i),Ul.forEach(i);for(var a=0;a<is.length;a++){var l=is[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<is.length&&(a=is[0],a.blockedOn===null);)v_(a),a.blockedOn===null&&is.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[$e]||null;if(typeof d=="function")_||b_(a);else if(_){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[$e]||null)E=_.formAction;else if(ag(h)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),b_(a)}}}function lg(t){this._internalRoot=t}Zc.prototype.render=lg.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Bn();d_(a,l,t,i,null,null)},Zc.prototype.unmount=lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;d_(t.current,2,null,t,null,null),Oc(),i[St]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Bt();t={blockedOn:null,target:t,priority:i};for(var a=0;a<is.length&&i!==0&&i<is[a].priority;a++);is.splice(a,0,t),a===0&&v_(t)}};var E_=e.version;if(E_!=="19.1.1")throw Error(s(527,E_,"19.1.1"));oe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(i),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var qw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{mt=Wc.inject(qw),Le=Wc}catch{}}return ql.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ly,d=Uy,_=jy,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=h_(t,1,!1,null,null,a,l,h,d,_,E,null),t[St]=i.current,Fd(t),new lg(i)},ql.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ly,_=Uy,E=jy,O=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),i=h_(t,1,!0,i,a??null,l,h,d,_,E,O,H),i.context=f_(null),a=i.current,l=Bn(),l=Rt(l),h=Bi(l),h.callback=null,qi(a,h,l),a=l,i.current.lanes=a,ct(i,a),Lr(i),t[St]=i.current,Fd(t),new Zc(i)},ql.version="19.1.1",ql}var N_;function Ww(){if(N_)return hg.exports;N_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hg.exports=Zw(),hg.exports}var Jw=Ww();const eA=()=>{};var O_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},tA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],g=r[n++],m=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},xb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,g=f?r[o+1]:0,m=o+2<r.length,p=m?r[o+2]:0,b=u>>2,T=(u&3)<<4|g>>4;let w=(g&15)<<2|p>>6,x=p&63;m||(x=64,f||(w=64)),s.push(n[b],n[T],n[w],n[x])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Rb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):tA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],g=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||g==null||p==null||T==null)throw new nA;const w=u<<2|g>>4;if(s.push(w),p!==64){const x=g<<4&240|p>>2;if(s.push(x),T!==64){const B=p<<6&192|T;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rA=function(r){const e=Rb(r);return xb.encodeByteArray(e,!0)},vh=function(r){return rA(r).replace(/\./g,"")},Cb=function(r){try{return xb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=()=>iA().__FIREBASE_DEFAULTS__,aA=()=>{if(typeof process>"u"||typeof O_>"u")return;const r=O_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},oA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Cb(r[1]);return e&&JSON.parse(e)},qh=()=>{try{return eA()||sA()||aA()||oA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ib=r=>qh()?.emulatorHosts?.[r],lA=r=>{const e=Ib(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Db=()=>qh()?.config,Nb=r=>qh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ob(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[vh(JSON.stringify(n)),vh(JSON.stringify(f)),""].join(".")}const $l={};function hA(){const r={prod:[],emulator:[]};for(const e of Object.keys($l))$l[e]?r.emulator.push(e):r.prod.push(e);return r}function fA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let M_=!1;function Mb(r,e){if(typeof window>"u"||typeof document>"u"||!No(window.location.host)||$l[r]===e||$l[r]||M_)return;$l[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=hA().prod.length>0;function f(){const w=document.getElementById(s);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,x){w.setAttribute("width","24"),w.setAttribute("id",x),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{M_=!0,f()},w}function b(w,x){w.setAttribute("id",x),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=fA(s),x=n("text"),B=document.getElementById(x)||document.createElement("span"),K=n("learnmore"),L=document.getElementById(K)||document.createElement("a"),Y=n("preprendIcon"),$=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const X=w.element;g(X),b(L,K);const ne=p();m($,Y),X.append($,B,L,ne),document.body.appendChild(X)}u?(B.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function gA(){const r=qh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function yA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vA(){const r=bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function _A(){return!gA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bA(){try{return typeof indexedDB=="object"}catch{return!1}}function EA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="FirebaseError";class Ni extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=TA,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?SA(u,s):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Ni(o,g,s)}}function SA(r,e){return r.replace(wA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const wA=/\{\$([^}]+)}/g;function AA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ha(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(k_(u)&&k_(f)){if(!ha(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function k_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Hl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Fl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function RA(r,e){const n=new xA(r,e);return n.subscribe.bind(n)}class xA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");CA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=mg),o.error===void 0&&(o.error=mg),o.complete===void 0&&(o.complete=mg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r){return r&&r._delegate?r._delegate:r}class fa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new uA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NA(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:DA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DA(r){return r===oa?void 0:r}function NA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const MA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},kA=Ue.INFO,VA={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},PA=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=VA[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=kA,this._logHandler=PA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const LA=(r,e)=>e.some(n=>r instanceof n);let V_,P_;function UA(){return V_||(V_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jA(){return P_||(P_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kb=new WeakMap,Ng=new WeakMap,Vb=new WeakMap,pg=new WeakMap,hm=new WeakMap;function zA(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ds(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&kb.set(n,r)}).catch(()=>{}),hm.set(e,r),e}function BA(r){if(Ng.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Ng.set(r,e)}let Og={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Ng.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Vb.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function qA(r){Og=r(Og)}function HA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(yg(this),e,...n);return Vb.set(s,e.sort?e.sort():[e]),ds(s)}:jA().includes(r)?function(...e){return r.apply(yg(this),e),ds(kb.get(this))}:function(...e){return ds(r.apply(yg(this),e))}}function FA(r){return typeof r=="function"?HA(r):(r instanceof IDBTransaction&&BA(r),LA(r,UA())?new Proxy(r,Og):r)}function ds(r){if(r instanceof IDBRequest)return zA(r);if(pg.has(r))return pg.get(r);const e=FA(r);return e!==r&&(pg.set(r,e),hm.set(e,r)),e}const yg=r=>hm.get(r);function GA(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),g=ds(f);return s&&f.addEventListener("upgradeneeded",m=>{s(ds(f.result),m.oldVersion,m.newVersion,ds(f.transaction),m)}),n&&f.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),g.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const KA=["get","getKey","getAll","getAllKeys","count"],YA=["put","add","delete","clear"],vg=new Map;function L_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=YA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||KA.includes(n)))return;const u=async function(f,...g){const m=this.transaction(f,o?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&m.done]))[0]};return vg.set(e,u),u}qA(r=>({...r,get:(e,n,s)=>L_(e,n)||r.get(e,n,s),has:(e,n)=>!!L_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function XA(r){return r.getComponent()?.type==="VERSION"}const Mg="@firebase/app",U_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new cm("@firebase/app"),$A="@firebase/app-compat",ZA="@firebase/analytics-compat",WA="@firebase/analytics",JA="@firebase/app-check-compat",e1="@firebase/app-check",t1="@firebase/auth",n1="@firebase/auth-compat",r1="@firebase/database",i1="@firebase/data-connect",s1="@firebase/database-compat",a1="@firebase/functions",o1="@firebase/functions-compat",l1="@firebase/installations",u1="@firebase/installations-compat",c1="@firebase/messaging",h1="@firebase/messaging-compat",f1="@firebase/performance",d1="@firebase/performance-compat",g1="@firebase/remote-config",m1="@firebase/remote-config-compat",p1="@firebase/storage",y1="@firebase/storage-compat",v1="@firebase/firestore",_1="@firebase/ai",b1="@firebase/firestore-compat",E1="firebase",T1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",S1={[Mg]:"fire-core",[$A]:"fire-core-compat",[WA]:"fire-analytics",[ZA]:"fire-analytics-compat",[e1]:"fire-app-check",[JA]:"fire-app-check-compat",[t1]:"fire-auth",[n1]:"fire-auth-compat",[r1]:"fire-rtdb",[i1]:"fire-data-connect",[s1]:"fire-rtdb-compat",[a1]:"fire-fn",[o1]:"fire-fn-compat",[l1]:"fire-iid",[u1]:"fire-iid-compat",[c1]:"fire-fcm",[h1]:"fire-fcm-compat",[f1]:"fire-perf",[d1]:"fire-perf-compat",[g1]:"fire-rc",[m1]:"fire-rc-compat",[p1]:"fire-gcs",[y1]:"fire-gcs-compat",[v1]:"fire-fst",[b1]:"fire-fst-compat",[_1]:"fire-vertex","fire-js":"fire-js",[E1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,w1=new Map,Vg=new Map;function j_(r,e){try{r.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function So(r){const e=r.name;if(Vg.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,r);for(const n of _h.values())j_(n,r);for(const n of w1.values())j_(n,r);return!0}function fm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ir(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new _u("app","Firebase",A1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=T1;function Pb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:kg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw gs.create("bad-app-name",{appName:String(o)});if(n||(n=Db()),!n)throw gs.create("no-options");const u=_h.get(o);if(u){if(ha(n,u.options)&&ha(s,u.config))return u;throw gs.create("duplicate-app",{appName:o})}const f=new OA(o);for(const m of Vg.values())f.addComponent(m);const g=new R1(n,s,f);return _h.set(o,g),g}function Lb(r=kg){const e=_h.get(r);if(!e&&r===kg&&Db())return Pb();if(!e)throw gs.create("no-app",{appName:r});return e}function ms(r,e,n){let s=S1[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(f.join(" "));return}So(new fa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebase-heartbeat-database",C1=1,su="firebase-heartbeat-store";let _g=null;function Ub(){return _g||(_g=GA(x1,C1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(su)}catch(n){console.warn(n)}}}}).catch(r=>{throw gs.create("idb-open",{originalErrorMessage:r.message})})),_g}async function I1(r){try{const n=(await Ub()).transaction(su),s=await n.objectStore(su).get(jb(r));return await n.done,s}catch(e){if(e instanceof Ni)xi.warn(e.message);else{const n=gs.create("idb-get",{originalErrorMessage:e?.message});xi.warn(n.message)}}}async function z_(r,e){try{const s=(await Ub()).transaction(su,"readwrite");await s.objectStore(su).put(e,jb(r)),await s.done}catch(n){if(n instanceof Ni)xi.warn(n.message);else{const s=gs.create("idb-set",{originalErrorMessage:n?.message});xi.warn(s.message)}}}function jb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=1024,N1=30;class O1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new k1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=B_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>N1){const o=V1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=B_(),{heartbeatsToSend:n,unsentEntries:s}=M1(this._heartbeatsCache.heartbeats),o=vh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return xi.warn(e),""}}}function B_(){return new Date().toISOString().substring(0,10)}function M1(r,e=D1){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),q_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),q_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class k1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bA()?EA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function q_(r){return vh(JSON.stringify({version:2,heartbeats:r})).length}function V1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r){So(new fa("platform-logger",e=>new QA(e),"PRIVATE")),So(new fa("heartbeat",e=>new O1(e),"PRIVATE")),ms(Mg,U_,r),ms(Mg,U_,"esm2020"),ms("fire-js","")}P1("");var H_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,zb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function I(){}I.prototype=A.prototype,C.D=A.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(M,D,V){for(var N=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)N[Be-2]=arguments[Be];return A.prototype[D].apply(M,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,I){I||(I=0);var M=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)M[D]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(D=0;16>D;++D)M[D]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=C.g[0],I=C.g[1],D=C.g[2];var V=C.g[3],N=A+(V^I&(D^V))+M[0]+3614090360&4294967295;A=I+(N<<7&4294967295|N>>>25),N=V+(D^A&(I^D))+M[1]+3905402710&4294967295,V=A+(N<<12&4294967295|N>>>20),N=D+(I^V&(A^I))+M[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(A^D&(V^A))+M[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=A+(V^I&(D^V))+M[4]+4118548399&4294967295,A=I+(N<<7&4294967295|N>>>25),N=V+(D^A&(I^D))+M[5]+1200080426&4294967295,V=A+(N<<12&4294967295|N>>>20),N=D+(I^V&(A^I))+M[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(A^D&(V^A))+M[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=A+(V^I&(D^V))+M[8]+1770035416&4294967295,A=I+(N<<7&4294967295|N>>>25),N=V+(D^A&(I^D))+M[9]+2336552879&4294967295,V=A+(N<<12&4294967295|N>>>20),N=D+(I^V&(A^I))+M[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(A^D&(V^A))+M[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=A+(V^I&(D^V))+M[12]+1804603682&4294967295,A=I+(N<<7&4294967295|N>>>25),N=V+(D^A&(I^D))+M[13]+4254626195&4294967295,V=A+(N<<12&4294967295|N>>>20),N=D+(I^V&(A^I))+M[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=I+(A^D&(V^A))+M[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=A+(D^V&(I^D))+M[1]+4129170786&4294967295,A=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(A^I))+M[6]+3225465664&4294967295,V=A+(N<<9&4294967295|N>>>23),N=D+(A^I&(V^A))+M[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^A&(D^V))+M[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=A+(D^V&(I^D))+M[5]+3593408605&4294967295,A=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(A^I))+M[10]+38016083&4294967295,V=A+(N<<9&4294967295|N>>>23),N=D+(A^I&(V^A))+M[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^A&(D^V))+M[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=A+(D^V&(I^D))+M[9]+568446438&4294967295,A=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(A^I))+M[14]+3275163606&4294967295,V=A+(N<<9&4294967295|N>>>23),N=D+(A^I&(V^A))+M[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^A&(D^V))+M[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=A+(D^V&(I^D))+M[13]+2850285829&4294967295,A=I+(N<<5&4294967295|N>>>27),N=V+(I^D&(A^I))+M[2]+4243563512&4294967295,V=A+(N<<9&4294967295|N>>>23),N=D+(A^I&(V^A))+M[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=I+(V^A&(D^V))+M[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=A+(I^D^V)+M[5]+4294588738&4294967295,A=I+(N<<4&4294967295|N>>>28),N=V+(A^I^D)+M[8]+2272392833&4294967295,V=A+(N<<11&4294967295|N>>>21),N=D+(V^A^I)+M[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^A)+M[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=A+(I^D^V)+M[1]+2763975236&4294967295,A=I+(N<<4&4294967295|N>>>28),N=V+(A^I^D)+M[4]+1272893353&4294967295,V=A+(N<<11&4294967295|N>>>21),N=D+(V^A^I)+M[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^A)+M[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=A+(I^D^V)+M[13]+681279174&4294967295,A=I+(N<<4&4294967295|N>>>28),N=V+(A^I^D)+M[0]+3936430074&4294967295,V=A+(N<<11&4294967295|N>>>21),N=D+(V^A^I)+M[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^A)+M[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=A+(I^D^V)+M[9]+3654602809&4294967295,A=I+(N<<4&4294967295|N>>>28),N=V+(A^I^D)+M[12]+3873151461&4294967295,V=A+(N<<11&4294967295|N>>>21),N=D+(V^A^I)+M[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=I+(D^V^A)+M[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=A+(D^(I|~V))+M[0]+4096336452&4294967295,A=I+(N<<6&4294967295|N>>>26),N=V+(I^(A|~D))+M[7]+1126891415&4294967295,V=A+(N<<10&4294967295|N>>>22),N=D+(A^(V|~I))+M[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~A))+M[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=A+(D^(I|~V))+M[12]+1700485571&4294967295,A=I+(N<<6&4294967295|N>>>26),N=V+(I^(A|~D))+M[3]+2399980690&4294967295,V=A+(N<<10&4294967295|N>>>22),N=D+(A^(V|~I))+M[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~A))+M[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=A+(D^(I|~V))+M[8]+1873313359&4294967295,A=I+(N<<6&4294967295|N>>>26),N=V+(I^(A|~D))+M[15]+4264355552&4294967295,V=A+(N<<10&4294967295|N>>>22),N=D+(A^(V|~I))+M[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~A))+M[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=A+(D^(I|~V))+M[4]+4149444226&4294967295,A=I+(N<<6&4294967295|N>>>26),N=V+(I^(A|~D))+M[11]+3174756917&4294967295,V=A+(N<<10&4294967295|N>>>22),N=D+(A^(V|~I))+M[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=I+(V^(D|~A))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+V&4294967295}s.prototype.u=function(C,A){A===void 0&&(A=C.length);for(var I=A-this.blockSize,M=this.B,D=this.h,V=0;V<A;){if(D==0)for(;V<=I;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<A;)if(M[D++]=C.charCodeAt(V++),D==this.blockSize){o(this,M),D=0;break}}else for(;V<A;)if(M[D++]=C[V++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=A},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;var I=8*this.o;for(A=C.length-8;A<C.length;++A)C[A]=I&255,I/=256;for(this.u(C),C=Array(16),A=I=0;4>A;++A)for(var M=0;32>M;M+=8)C[I++]=this.g[A]>>>M&255;return C};function u(C,A){var I=g;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=A(C)}function f(C,A){this.h=A;for(var I=[],M=!0,D=C.length-1;0<=D;D--){var V=C[D]|0;M&&V==A||(I[D]=V,M=!1)}this.g=I}var g={};function m(C){return-128<=C&&128>C?u(C,function(A){return new f([A|0],0>A?-1:0)}):new f([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return T;if(0>C)return L(p(-C));for(var A=[],I=1,M=0;C>=I;M++)A[M]=C/I|0,I*=4294967296;return new f(A,0)}function b(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return L(b(C.substring(1),A));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(A,8)),M=T,D=0;D<C.length;D+=8){var V=Math.min(8,C.length-D),N=parseInt(C.substring(D,D+V),A);8>V?(V=p(Math.pow(A,V)),M=M.j(V).add(p(N))):(M=M.j(I),M=M.add(p(N)))}return M}var T=m(0),w=m(1),x=m(16777216);r=f.prototype,r.m=function(){if(K(this))return-L(this).m();for(var C=0,A=1,I=0;I<this.g.length;I++){var M=this.i(I);C+=(0<=M?M:4294967296+M)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(B(this))return"0";if(K(this))return"-"+L(this).toString(C);for(var A=p(Math.pow(C,6)),I=this,M="";;){var D=ne(I,A).g;I=Y(I,D.j(A));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,B(I))return V+M;for(;6>V.length;)V="0"+V;M=V+M}},r.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function B(C){if(C.h!=0)return!1;for(var A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function K(C){return C.h==-1}r.l=function(C){return C=Y(this,C),K(C)?-1:B(C)?0:1};function L(C){for(var A=C.g.length,I=[],M=0;M<A;M++)I[M]=~C.g[M];return new f(I,~C.h).add(w)}r.abs=function(){return K(this)?L(this):this},r.add=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],M=0,D=0;D<=A;D++){var V=M+(this.i(D)&65535)+(C.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);M=N>>>16,V&=65535,N&=65535,I[D]=N<<16|V}return new f(I,I[I.length-1]&-2147483648?-1:0)};function Y(C,A){return C.add(L(A))}r.j=function(C){if(B(this)||B(C))return T;if(K(this))return K(C)?L(this).j(L(C)):L(L(this).j(C));if(K(C))return L(this.j(L(C)));if(0>this.l(x)&&0>C.l(x))return p(this.m()*C.m());for(var A=this.g.length+C.g.length,I=[],M=0;M<2*A;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<C.g.length;D++){var V=this.i(M)>>>16,N=this.i(M)&65535,Be=C.i(D)>>>16,Xe=C.i(D)&65535;I[2*M+2*D]+=N*Xe,$(I,2*M+2*D),I[2*M+2*D+1]+=V*Xe,$(I,2*M+2*D+1),I[2*M+2*D+1]+=N*Be,$(I,2*M+2*D+1),I[2*M+2*D+2]+=V*Be,$(I,2*M+2*D+2)}for(M=0;M<A;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=A;M<2*A;M++)I[M]=0;return new f(I,0)};function $(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function X(C,A){this.g=C,this.h=A}function ne(C,A){if(B(A))throw Error("division by zero");if(B(C))return new X(T,T);if(K(C))return A=ne(L(C),A),new X(L(A.g),L(A.h));if(K(A))return A=ne(C,L(A)),new X(L(A.g),A.h);if(30<C.g.length){if(K(C)||K(A))throw Error("slowDivide_ only works with positive integers.");for(var I=w,M=A;0>=M.l(C);)I=ae(I),M=ae(M);var D=se(I,1),V=se(M,1);for(M=se(M,2),I=se(I,2);!B(M);){var N=V.add(M);0>=N.l(C)&&(D=D.add(I),V=N),M=se(M,1),I=se(I,1)}return A=Y(C,D.j(A)),new X(D,A)}for(D=T;0<=C.l(A);){for(I=Math.max(1,Math.floor(C.m()/A.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),V=p(I),N=V.j(A);K(N)||0<N.l(C);)I-=M,V=p(I),N=V.j(A);B(V)&&(V=w),D=D.add(V),C=Y(C,N)}return new X(D,C)}r.A=function(C){return ne(this,C).h},r.and=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],M=0;M<A;M++)I[M]=this.i(M)&C.i(M);return new f(I,this.h&C.h)},r.or=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],M=0;M<A;M++)I[M]=this.i(M)|C.i(M);return new f(I,this.h|C.h)},r.xor=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],M=0;M<A;M++)I[M]=this.i(M)^C.i(M);return new f(I,this.h^C.h)};function ae(C){for(var A=C.g.length+1,I=[],M=0;M<A;M++)I[M]=C.i(M)<<1|C.i(M-1)>>>31;return new f(I,C.h)}function se(C,A){var I=A>>5;A%=32;for(var M=C.g.length-I,D=[],V=0;V<M;V++)D[V]=0<A?C.i(V+I)>>>A|C.i(V+I+1)<<32-A:C.i(V+I);return new f(D,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,zb=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=b,ps=f}).apply(typeof H_<"u"?H_:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bb,Gl,qb,oh,Pg,Hb,Fb,Gb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in v))break e;v=v[z]}c=c[c.length-1],S=v[c],y=y(S),y!=S&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,S=!1,z={next:function(){if(!S&&v<c.length){var Q=v++;return{value:y(Q,c[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function m(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function b(c,y,v){return c.call.apply(c.bind,arguments)}function T(c,y,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),c.apply(y,z)}}return function(){return c.apply(y,arguments)}}function w(c,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:T,w.apply(null,arguments)}function x(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function B(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,z,Q){for(var ce=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ce[Fe-2]=arguments[Fe];return y.prototype[z].apply(S,ce)}}function K(c){const y=c.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=c[S];return v}return[]}function L(c,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(m(S)){const z=c.length||0,Q=S.length||0;c.length=z+Q;for(let ce=0;ce<Q;ce++)c[z+ce]=S[ce]}else c.push(S)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var ae=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function se(c,y,v){for(const S in c)y.call(v,c[S],S,c)}function C(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function A(c){const y={};for(const v in c)y[v]=c[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,y){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)c[v]=S[v];for(let Q=0;Q<I.length;Q++)v=I[Q],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function D(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function V(c){g.setTimeout(()=>{throw c},0)}function N(){var c=Ae;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Be{constructor(){this.h=this.g=null}add(y,v){const S=Xe.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Xe=new Y(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,Ae=new Be,k=()=>{const c=g.Promise.resolve(void 0);oe=()=>{c.then(re)}};var re=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(v){V(v)}var y=Xe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}de=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var me=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};g.addEventListener("test",v,y),g.removeEventListener("test",v,y)}catch{}return c})();function we(c,y){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ae){e:{try{ne(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}B(we,le);var pe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),ke=0;function Et(c,y,v,S,z){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=z,this.key=++ke,this.da=this.fa=!1}function Ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function nn(c){this.src=c,this.g={},this.h=0}nn.prototype.add=function(c,y,v,S,z){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var ce=nt(c,y,S,z);return-1<ce?(y=c[ce],v||(y.fa=!1)):(y=new Et(y,this.src,Q,!!S,z),y.fa=v,c.push(y)),y};function qe(c,y){var v=y.type;if(v in c.g){var S=c.g[v],z=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(S,z,1),Q&&(Ne(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function nt(c,y,v,S){for(var z=0;z<c.length;++z){var Q=c[z];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==S)return z}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),gn={};function En(c,y,v,S,z){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)En(c,y[Q],v,S,z);return null}return v=Ta(v),c&&c[dt]?c.K(y,v,p(S)?!!S.capture:!1,z):rn(c,y,v,!1,S,z)}function rn(c,y,v,S,z,Q){if(!y)throw Error("Invalid event type");var ce=p(z)?!!z.capture:!!z,Fe=Xr(c);if(Fe||(c[vt]=Fe=new nn(c)),v=Fe.add(y,v,S,ce,Q),v.proxy)return v;if(S=Ea(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)me||(z=ce),z===void 0&&(z=!1),c.addEventListener(y.toString(),S,z);else if(c.attachEvent)c.attachEvent(Fn(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ea(){function c(v){return y.call(c.src,c.listener,v)}const y=Oi;return c}function Qr(c,y,v,S,z){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Qr(c,y[Q],v,S,z);else S=p(S)?!!S.capture:!!S,v=Ta(v),c&&c[dt]?(c=c.i,y=String(y).toString(),y in c.g&&(Q=c.g[y],v=nt(Q,v,S,z),-1<v&&(Ne(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete c.g[y],c.h--)))):c&&(c=Xr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=nt(y,v,S,z)),(v=-1<c?y[c]:null)&&Tn(v))}function Tn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[dt])qe(y.i,c);else{var v=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(v,S,c.capture):y.detachEvent?y.detachEvent(Fn(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Xr(y))?(qe(v,c),v.h==0&&(v.src=null,y[vt]=null)):Ne(c)}}}function Fn(c){return c in gn?gn[c]:gn[c]="on"+c}function Oi(c,y){if(c.da)c=!0;else{y=new we(y,this);var v=c.listener,S=c.ha||c.src;c.fa&&Tn(c),c=v.call(S,y)}return c}function Xr(c){return c=c[vt],c instanceof nn?c:null}var Mi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(c){return typeof c=="function"?c:(c[Mi]||(c[Mi]=function(y){return c.handleEvent(y)}),c[Mi])}function mt(){ue.call(this),this.i=new nn(this),this.M=this,this.F=null}B(mt,ue),mt.prototype[dt]=!0,mt.prototype.removeEventListener=function(c,y,v,S){Qr(this,c,y,v,S)};function Le(c,y){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new le(y,c);else if(y instanceof le)y.target=y.target||c;else{var z=y;y=new le(S,c),M(y,z)}if(z=!0,v)for(var Q=v.length-1;0<=Q;Q--){var ce=y.g=v[Q];z=Nt(ce,S,!0,y)&&z}if(ce=y.g=c,z=Nt(ce,S,!0,y)&&z,z=Nt(ce,S,!1,y)&&z,v)for(Q=0;Q<v.length;Q++)ce=y.g=v[Q],z=Nt(ce,S,!1,y)&&z}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],S=0;S<v.length;S++)Ne(v[S]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,S){return this.i.add(String(c),y,!1,v,S)},mt.prototype.L=function(c,y,v,S){return this.i.add(String(c),y,!0,v,S)};function Nt(c,y,v,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Q=0;Q<y.length;++Q){var ce=y[Q];if(ce&&!ce.da&&ce.capture==v){var Fe=ce.listener,qt=ce.ha||ce.src;ce.fa&&qe(c.i,ce),z=Fe.call(qt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Tt(c,y,v){if(typeof c=="function")v&&(c=w(c,v));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:g.setTimeout(c,y||0)}function Is(c){c.g=Tt(()=>{c.g=null,c.i&&(c.i=!1,Is(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Gn extends ue{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Is(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(c){ue.call(this),this.h=c,this.g={}}B(Er,ue);var $r=[];function Zr(c){se(c.g,function(y,v){this.g.hasOwnProperty(v)&&Tn(y)},c),c.g={}}Er.prototype.N=function(){Er.aa.N.call(this),Zr(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=g.JSON.stringify,Wr=g.JSON.parse,Jr=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function ki(){}ki.prototype.h=null;function Ds(c){return c.h||(c.h=c.i())}function Ns(){}var ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ct(){le.call(this,"d")}B(ct,le);function zt(){le.call(this,"c")}B(zt,le);var pt={},Cn=null;function Rt(){return Cn=Cn||new mt}pt.La="serverreachability";function Ot(c){le.call(this,pt.La,c)}B(Ot,le);function Bt(c){const y=Rt();Le(y,new Ot(y))}pt.STAT_EVENT="statevent";function or(c,y){le.call(this,pt.STAT_EVENT,c),this.stat=y}B(or,le);function Ce(c){const y=Rt();Le(y,new or(y,c))}pt.Ma="timingevent";function rt(c,y){le.call(this,pt.Ma,c),this.size=y}B(rt,le);function $e(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},y)}function St(){this.g=!0}St.prototype.xa=function(){this.g=!1};function lr(c,y,v,S,z,Q){c.info(function(){if(c.g)if(Q)for(var ce="",Fe=Q.split("&"),qt=0;qt<Fe.length;qt++){var Ge=Fe[qt].split("=");if(1<Ge.length){var $t=Ge[0];Ge=Ge[1];var Ht=$t.split("_");ce=2<=Ht.length&&Ht[1]=="type"?ce+($t+"="+Ge+"&"):ce+($t+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+v+`
`+ce})}function ei(c,y,v,S,z,Q,ce){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+v+`
`+Q+" "+ce})}function sn(c,y,v,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ur(c,v)+(S?" "+S:"")})}function Tr(c,y){c.info(function(){return"TIMEOUT: "+y})}St.prototype.info=function(){};function ur(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return Sn(v)}catch{return y}}var Vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sr;function wr(){}B(wr,ki),wr.prototype.g=function(){return new XMLHttpRequest},wr.prototype.i=function(){return{}},Sr=new wr;function wn(c,y,v,S){this.j=c,this.i=y,this.l=v,this.R=S||1,this.U=new Er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var qo={},Sa={};function cr(c,y,v){c.L=1,c.v=Ps(Vn(y)),c.m=v,c.P=!0,ni(c,null)}function ni(c,y){c.F=Date.now(),Os(c),c.A=Vn(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Qo(v.i,"t",S),c.C=0,v=c.j.J,c.h=new xt,c.g=Xu(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Gn(w(c.Y,c,c.g),c.O)),y=c.U,v=c.g,S=c.ca;var z="readystatechange";Array.isArray(z)||(z&&($r[0]=z.toString()),z=$r);for(var Q=0;Q<z.length;Q++){var ce=En(v,z[Q],S||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Bt(),lr(c.i,c.u,c.A,c.l,c.R,c.m)}wn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Xn(c)==3?y.j():this.Y(c)},wn.prototype.Y=function(c){try{if(c==this.g)e:{const Ht=Xn(this.g);var y=this.g.Ba();const ci=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Bu(this.g)))){this.J||Ht!=4||y==7||(y==8||0>=ci?Bt(3):Bt(2)),Pi(this);var v=this.g.Z();this.X=v;t:if(ku(this)){var S=Bu(this.g);c="";var z=S.length,Q=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Ar(this);var ce="";break t}this.h.i=new g.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(Q&&y==z-1)});S.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,ei(this.i,this.u,this.A,this.l,this.R,Ht,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,qt=this.g;if((Fe=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Fe)){var Ge=Fe;break t}}Ge=null}if(v=Ge)sn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,v);else{this.o=!1,this.s=3,Ce(12),an(this),Ar(this);break e}}if(this.P){v=!0;let on;for(;!this.J&&this.C<ce.length;)if(on=Vu(this,ce),on==Sa){Ht==4&&(this.s=4,Ce(14),v=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(on==qo){this.s=4,Ce(15),sn(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else sn(this.i,this.l,on,null),Ms(this,on);if(ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ce.length!=0||this.h.h||(this.s=1,Ce(16),v=!1),this.o=this.o&&v,!v)sn(this.i,this.l,ce,"[Invalid Chunked Response]"),an(this),Ar(this);else if(0<ce.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Fs($t),$t.M=!0,Ce(11))}}else sn(this.i,this.l,ce,null),Ms(this,ce);Ht==4&&an(this),this.o&&!this.J&&(Ht==4?Ku(this.j,this):(this.o=!1,Os(this)))}else yf(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),an(this),Ar(this)}}}catch{}finally{}};function ku(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Vu(c,y){var v=c.C,S=y.indexOf(`
`,v);return S==-1?Sa:(v=Number(y.substring(v,S)),isNaN(v)?qo:(S+=1,S+v>y.length?Sa:(y=y.slice(S,S+v),c.C=S+v,y)))}wn.prototype.cancel=function(){this.J=!0,an(this)};function Os(c){c.S=Date.now()+c.I,Pu(c,c.I)}function Pu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=$e(w(c.ba,c),y)}function Pi(c){c.B&&(g.clearTimeout(c.B),c.B=null)}wn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Tr(this.i,this.A),this.L!=2&&(Bt(),Ce(17)),an(this),this.s=2,Ar(this)):Pu(this,this.S-c)};function Ar(c){c.j.G==0||c.J||Ku(c.j,c)}function an(c){Pi(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Zr(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ms(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Ho(v.h,c))){if(!c.K&&Ho(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Va(v),Ma(v);else break e;Jo(v),Ce(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=$e(w(v.Za,v),6e3));if(1>=Aa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ui(v,11)}else if((c.K||v.g==c)&&Va(v),!$(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let Ge=z[y];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];const $t=Ge[3];$t!=null&&(v.la=$t,v.j.info("VER="+v.la));const Ht=Ge[4];Ht!=null&&(v.Aa=Ht,v.j.info("SVER="+v.Aa));const ci=Ge[5];ci!=null&&typeof ci=="number"&&0<ci&&(S=1.5*ci,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const on=c.g;if(on){const Or=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Or){var Q=S.h;Q.g||Or.indexOf("spdy")==-1&&Or.indexOf("quic")==-1&&Or.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ra(Q,Q.h),Q.h=null))}if(S.D){const tl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(S.ya=tl,it(S.I,S.D,tl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ce=c;if(S.qa=Qu(S,S.J?S.ia:null,S.W),ce.K){An(S.h,ce);var Fe=ce,qt=S.L;qt&&(Fe.I=qt),Fe.B&&(Pi(Fe),Os(Fe)),S.g=ce}else Fu(S);0<v.i.length&&ka(v)}else Ge[0]!="stop"&&Ge[0]!="close"||ui(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?ui(v,7):Zo(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}Bt(4)}catch{}}var Lu=class{constructor(c,y){this.g=c,this.map=y}};function ri(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Aa(c){return c.h?1:c.g?c.g.size:0}function Ho(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ra(c,y){c.g?c.g.add(y):c.h=y}function An(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}ri.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Fo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return K(c.i)}function df(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(m(c)){for(var y=[],v=c.length,S=0;S<v;S++)y.push(c[S]);return y}y=[],v=0;for(S in c)y[v++]=c[S];return y}function xa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(m(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const S in c)y[v++]=S;return y}}}function Go(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(m(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=xa(c),S=df(c),z=S.length,Q=0;Q<z;Q++)y.call(void 0,S[Q],v&&v[Q],c)}var ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),z=null;if(0<=S){var Q=c[v].substring(0,S);z=c[v].substring(S+1)}else Q=c[v];y(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Mt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Mt){this.h=c.h,Vs(this,c.j),this.o=c.o,this.g=c.g,Li(this,c.s),this.l=c.l;var y=c.i,v=new si;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ii(this,v),this.m=c.m}else c&&(y=String(c).match(ks))?(this.h=!1,Vs(this,y[1]||"",!0),this.o=Kn(y[2]||""),this.g=Kn(y[3]||"",!0),Li(this,y[4]),this.l=Kn(y[5]||"",!0),ii(this,y[6]||"",!0),this.m=Kn(y[7]||"")):(this.h=!1,this.i=new si(null,this.h))}Mt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ls(y,Ko,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ls(y,Ko,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ls(v,v.charAt(0)=="/"?mf:Yo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ls(v,Ca)),c.join("")};function Vn(c){return new Mt(c)}function Vs(c,y,v){c.j=v?Kn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Li(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function ii(c,y,v){y instanceof si?(c.i=y,ju(c.i,c.h)):(v||(y=Ls(y,pf)),c.i=new si(y,c.h))}function it(c,y,v){c.i.set(y,v)}function Ps(c){return it(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Kn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ls(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Uu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Uu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ko=/[#\/\?@]/g,Yo=/[#\?:]/g,mf=/[#\?]/g,pf=/[#\?@]/g,Ca=/#/g;function si(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Yn(c){c.g||(c.g=new Map,c.h=0,c.i&&gf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=si.prototype,r.add=function(c,y){Yn(this),this.i=null,c=Rr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function ai(c,y){Yn(c),y=Rr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function oi(c,y){return Yn(c),y=Rr(c,y),c.g.has(y)}r.forEach=function(c,y){Yn(this),this.g.forEach(function(v,S){v.forEach(function(z){c.call(y,z,S,this)},this)},this)},r.na=function(){Yn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const z=c[S];for(let Q=0;Q<z.length;Q++)v.push(y[S])}return v},r.V=function(c){Yn(this);let y=[];if(typeof c=="string")oi(this,c)&&(y=y.concat(this.g.get(Rr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},r.set=function(c,y){return Yn(this),this.i=null,c=Rr(this,c),oi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Qo(c,y,v){ai(c,y),0<v.length&&(c.i=null,c.g.set(Rr(c,y),K(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Q=encodeURIComponent(String(S)),ce=this.V(S);for(S=0;S<ce.length;S++){var z=Q;ce[S]!==""&&(z+="="+encodeURIComponent(String(ce[S]))),c.push(z)}}return this.i=c.join("&")};function Rr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function ju(c,y){y&&!c.j&&(Yn(c),c.i=null,c.g.forEach(function(v,S){var z=S.toLowerCase();S!=z&&(ai(this,S),Qo(this,z,v))},c)),c.j=y}function Us(c,y){const v=new St;if(g.Image){const S=new Image;S.onload=x(Qn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=x(Qn,v,"TestLoadImage: error",!1,y,S),S.onabort=x(Qn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=x(Qn,v,"TestLoadImage: timeout",!1,y,S),g.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function hr(c,y){const v=new St,S=new AbortController,z=setTimeout(()=>{S.abort(),Qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(z),Q.ok?Qn(v,"TestPingServer: ok",!0,y):Qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Qn(v,"TestPingServer: error",!1,y)})}function Qn(c,y,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function js(){this.g=new Jr}function xr(c,y,v){const S=v||"";try{Go(c,function(z,Q){let ce=z;p(z)&&(ce=Sn(z)),y.push(S+Q+"="+encodeURIComponent(ce))})}catch(z){throw y.push(S+"type="+encodeURIComponent("_badmap")),z}}function Ui(c){this.l=c.Ub||null,this.j=c.eb||!1}B(Ui,ki),Ui.prototype.g=function(){return new li(this.l,this.j)},Ui.prototype.i=(function(c){return function(){return c}})({});function li(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(li,mt),r=li.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ir(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||g).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Cr(this):Ir(this),this.readyState==3&&Xo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Cr(this))},r.Qa=function(c){this.g&&(this.response=c,Cr(this))},r.ga=function(){this.g&&Cr(this)};function Cr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ir(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Ir(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $o(c){let y="";return se(c,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Xt(c,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=$o(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):it(c,y,v))}function We(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(We,mt);var Ia=/^https?$/i,zs=["POST","PUT"];r=We.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sr.g(),this.v=this.o?Ds(this.o):Ds(Sr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){zu(this,Q);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())v.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(zs,y,void 0))||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of v)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bs(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){zu(this,Q)}};function zu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Da(c),Dr(c)}function Da(c){c.A||(c.A=!0,Le(c,"complete"),Le(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Le(this,"complete"),Le(this,"abort"),Dr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),We.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Na(this):this.bb())},r.bb=function(){Na(this)};function Na(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Xn(c)!=4||c.Z()!=2)){if(c.u&&Xn(c)==4)Tt(c.Ea,0,c);else if(Le(c,"readystatechange"),Xn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=ce===0){var z=String(c.D).match(ks)[1]||null;!z&&g.self&&g.self.location&&(z=g.self.location.protocol.slice(0,-1)),S=!Ia.test(z?z.toLowerCase():"")}v=S}if(v)Le(c,"complete"),Le(c,"success");else{c.m=6;try{var Q=2<Xn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",Da(c)}}finally{Dr(c)}}}}function Dr(c,y){if(c.g){Bs(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Le(c,"ready");try{v.onreadystatechange=S}catch{}}}function Bs(c){c.I&&(g.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Xn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Wr(y)}};function Bu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function yf(c){const y={};c=(c.g&&2<=Xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if($(c[S]))continue;var v=D(c[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[z]||[];y[z]=Q,Q.push(v)}C(y,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Oa(c){this.Aa=0,this.i=[],this.j=new St,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,c),this.cb=qs("retryDelaySeedMs",1e4,c),this.Wa=qs("forwardChannelMaxRetries",2,c),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ri(c&&c.concurrentRequestLimit),this.Da=new js,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Oa.prototype,r.la=8,r.G=1,r.connect=function(c,y,v,S){Ce(0),this.W=c,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Qu(this,null,this.W),ka(this)};function Zo(c){if(qu(c),c.G==3){var y=c.U++,v=Vn(c.I);if(it(v,"SID",c.K),it(v,"RID",y),it(v,"TYPE","terminate"),Hs(c,v),y=new wn(c,c.j,y),y.L=2,y.v=Ps(Vn(v)),v=!1,g.navigator&&g.navigator.sendBeacon)try{v=g.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&g.Image&&(new Image().src=y.v,v=!0),v||(y.g=Xu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Os(y)}Yu(c)}function Ma(c){c.g&&(Fs(c),c.g.cancel(),c.g=null)}function qu(c){Ma(c),c.u&&(g.clearTimeout(c.u),c.u=null),Va(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function ka(c){if(!wa(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||k(),de||(oe(),de=!0),Ae.add(y,c),c.B=0}}function vf(c,y){return Aa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=$e(w(c.Ga,c,y),el(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new wn(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=A(Q),M(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Hu(this,z,y),v=Vn(this.I),it(v,"RID",c),it(v,"CVER",22),this.D&&it(v,"X-HTTP-Session-Id",this.D),Hs(this,v),Q&&(this.O?y="headers="+encodeURIComponent(String($o(Q)))+"&"+y:this.m&&Xt(v,this.m,Q)),Ra(this.h,z),this.Ua&&it(v,"TYPE","init"),this.P?(it(v,"$req",y),it(v,"SID","null"),z.T=!0,cr(z,v,null)):cr(z,v,y),this.G=2}}else this.G==3&&(c?Wo(this,c):this.i.length==0||wa(this.h)||Wo(this))};function Wo(c,y){var v;y?v=y.l:v=c.U++;const S=Vn(c.I);it(S,"SID",c.K),it(S,"RID",v),it(S,"AID",c.T),Hs(c,S),c.m&&c.o&&Xt(S,c.m,c.o),v=new wn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Hu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ra(c.h,v),cr(v,S,y)}function Hs(c,y){c.H&&se(c.H,function(v,S){it(y,S,v)}),c.l&&Go({},function(v,S){it(y,S,v)})}function Hu(c,y,v){v=Math.min(c.i.length,v);var S=c.l?w(c.l.Na,c.l,c):null;e:{var z=c.i;let Q=-1;for(;;){const ce=["count="+v];Q==-1?0<v?(Q=z[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let Fe=!0;for(let qt=0;qt<v;qt++){let Ge=z[qt].g;const $t=z[qt].map;if(Ge-=Q,0>Ge)Q=Math.max(0,z[qt].g-100),Fe=!1;else try{xr($t,ce,"req"+Ge+"_")}catch{S&&S($t)}}if(Fe){S=ce.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,S}function Fu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||k(),de||(oe(),de=!0),Ae.add(y,c),c.v=0}}function Jo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=$e(w(c.Fa,c),el(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$e(w(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Ma(this),Gu(this))};function Fs(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function Gu(c){c.g=new wn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Vn(c.qa);it(y,"RID","rpc"),it(y,"SID",c.K),it(y,"AID",c.T),it(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&it(y,"TO",c.ja),it(y,"TYPE","xmlhttp"),Hs(c,y),c.m&&c.o&&Xt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ps(Vn(y)),v.m=null,v.P=!0,ni(v,c)}r.Za=function(){this.C!=null&&(this.C=null,Ma(this),Jo(this),Ce(19))};function Va(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function Ku(c,y){var v=null;if(c.g==y){Va(c),Fs(c),c.g=null;var S=2}else if(Ho(c.h,y))v=y.D,An(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=c.B;S=Rt(),Le(S,new rt(S,v)),ka(c)}else Fu(c);else if(z=y.s,z==3||z==0&&0<y.X||!(S==1&&vf(c,y)||S==2&&Jo(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),z){case 1:ui(c,5);break;case 4:ui(c,10);break;case 3:ui(c,6);break;default:ui(c,2)}}}function el(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function ui(c,y){if(c.j.info("Error code "+y),y==2){var v=w(c.fb,c),S=c.Xa;const z=!S;S=new Mt(S||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Vs(S,"https"),Ps(S),z?Us(S.toString(),v):hr(S.toString(),v)}else Ce(2);c.G=0,c.l&&c.l.sa(y),Yu(c),qu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function Yu(c){if(c.G=0,c.ka=[],c.l){const y=Fo(c.h);(y.length!=0||c.i.length!=0)&&(L(c.ka,y),L(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function Qu(c,y,v){var S=v instanceof Mt?Vn(v):new Mt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Li(S,S.s);else{var z=g.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Q=new Mt(null);S&&Vs(Q,S),y&&(Q.g=y),z&&Li(Q,z),v&&(Q.l=v),S=Q}return v=c.D,y=c.ya,v&&y&&it(S,v,y),it(S,"VER",c.la),Hs(c,S),S}function Xu(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new We(new Ui({eb:v})):new We(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}r=$u.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Pa(){}Pa.prototype.g=function(c,y){return new Rn(c,y)};function Rn(c,y){mt.call(this),this.g=new Oa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!$(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!$(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Nr(this)}B(Rn,mt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Zo(this.g)},Rn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Sn(c),c=v);y.i.push(new Lu(y.Ya++,c)),y.G==3&&ka(y)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,Rn.aa.N.call(this)};function Zu(c){ct.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}B(Zu,ct);function Wu(){zt.call(this),this.status=1}B(Wu,zt);function Nr(c){this.g=c}B(Nr,$u),Nr.prototype.ua=function(){Le(this.g,"a")},Nr.prototype.ta=function(c){Le(this.g,new Zu(c))},Nr.prototype.sa=function(c){Le(this.g,new Wu)},Nr.prototype.ra=function(){Le(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,Gb=function(){return new Pa},Fb=function(){return Rt()},Hb=pt,Pg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,oh=Vi,ti.COMPLETE="complete",qb=ti,Ns.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Gl=Ns,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Bb=We}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",G_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new cm("@firebase/firestore");function ho(){return da.logLevel}function fe(r,...e){if(da.logLevel<=Ue.DEBUG){const n=e.map(dm);da.debug(`Firestore (${Mo}): ${r}`,...n)}}function Ci(r,...e){if(da.logLevel<=Ue.ERROR){const n=e.map(dm);da.error(`Firestore (${Mo}): ${r}`,...n)}}function wo(r,...e){if(da.logLevel<=Ue.WARN){const n=e.map(dm);da.warn(`Firestore (${Mo}): ${r}`,...n)}}function dm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Kb(r,s,n)}function Kb(r,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ci(s),new Error(s)}function Je(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||Kb(e,o,s)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vn.UNAUTHENTICATED)))}shutdown(){}}class U1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let u=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ua,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const m=u;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},g=m=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((m=>g(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?g(m):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ua)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new Yb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class z1{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B1{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new z1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0,3512);const s=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new K_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=H1(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function je(r,e){return r<e?-1:r>e?1:0}function Lg(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return bg(o)===bg(u)?je(o,u):bg(o)?1:-1}return je(r.length,e.length)}const F1=55296,G1=57343;function bg(r){const e=r.charCodeAt(0);return e>=F1&&e<=G1}function Ao(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="__name__";class jr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=jr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return je(e.length,n.length)}static compareSegments(e,n){const s=jr.isNumericId(e),o=jr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?jr.extractNumericId(e).compare(jr.extractNumericId(n)):Lg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class ft extends jr{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ft(n)}static emptyPath(){return new ft([])}}const K1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends jr{construct(e,n,s){return new fn(e,n,s)}static isValidIdentifier(e){return K1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y_}static keyField(){return new fn([Y_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(s+=g,o++):(u(),o++)}if(u(),f)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ft.fromString(e))}static fromName(e){return new ve(ft.fromString(e).popFirst(5))}static empty(){return new ve(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(r,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Y1(r,e,n,s){if(e===!0&&s===!0)throw new he(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Q_(r){if(!ve.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function X_(r){if(ve.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Xb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Hh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function ys(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hh(r);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r,e){const n={typeString:r};return e&&(n.value=e),n}function Eu(r,e){if(!Xb(r))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new he(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=-62135596800,Z_=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Z_);return new gt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$_)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z_}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Ut("string",gt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new gt(0,0))}static max(){return new Re(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=-1;function Q1(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new gt(n+1,0):new gt(n,s));return new _s(o,ve.empty(),e)}function X1(r){return new _s(r.readTime,r.key,au)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(Re.min(),ve.empty(),au)}static max(){return new _s(Re.max(),ve.empty(),au)}}function $1(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==Z1)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,s)=>{n(e)}))}static reject(e){return new ie(((n,s)=>{s(e)}))}static waitFor(e){return new ie(((n,s)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(m=>s(m)))})),f=!0,u===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const s of e)n=n.next((o=>o?ie.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ie(((s,o)=>{const u=e.length,f=new Array(u);let g=0;for(let m=0;m<u;m++){const p=m;n(e[p]).next((b=>{f[p]=b,++g,g===u&&s(f)}),(b=>o(b)))}}))}static doWhile(e,n){return new ie(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function J1(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=-1;function Gh(r){return r==null}function bh(r){return r===0&&1/r==-1/0}function eR(r){return typeof r=="number"&&Number.isInteger(r)&&!bh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="";function tR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=W_(e)),e=nR(r.get(n),e);return W_(e)}function nR(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case $b:n+="";break;default:n+=u}}return n}function W_(r){return r+$b+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function As(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function Zb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??hn.RED,this.left=o??hn.EMPTY,this.right=u??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new hn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new e0(this.data.getIterator())}getIteratorFrom(e){return new e0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class e0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Yt(fn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Wb("Invalid base64 string: "+u):u}})(e);return new dn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const rR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Je(!!r,39018),typeof r=="string"){let e=0;const n=rR.exec(r);if(Je(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dt(r.seconds),nanos:Dt(r.nanos)}}function Dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Es(r){return typeof r=="string"?dn.fromBase64String(r):dn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="server_timestamp",eE="__type__",tE="__previous_value__",nE="__local_write_time__";function pm(r){return(r?.mapValue?.fields||{})[eE]?.stringValue===Jb}function Kh(r){const e=r.mapValue.fields[tE];return pm(e)?Kh(e):e}function ou(r){const e=bs(r.mapValue.fields[nE].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,s,o,u,f,g,m,p,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=b}}const Eh="(default)";class lu{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="__type__",sR="__max__",th={mapValue:{}},iE="__vector__",Th="value";function Ts(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pm(r)?4:oR(r)?9007199254740991:aR(r)?10:11:Te(28295,{value:r})}function Kr(r,e){if(r===e)return!0;const n=Ts(r);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ou(r).isEqual(ou(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=bs(o.timestampValue),g=bs(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Es(o.bytesValue).isEqual(Es(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return Dt(o.geoPointValue.latitude)===Dt(u.geoPointValue.latitude)&&Dt(o.geoPointValue.longitude)===Dt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Dt(o.integerValue)===Dt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Dt(o.doubleValue),g=Dt(u.doubleValue);return f===g?bh(f)===bh(g):isNaN(f)&&isNaN(g)}return!1})(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(J_(f)!==J_(g))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(g[m]===void 0||!Kr(f[m],g[m])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function uu(r,e){return(r.values||[]).find((n=>Kr(n,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const n=Ts(r),s=Ts(e);if(n!==s)return je(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=Dt(u.integerValue||u.doubleValue),m=Dt(f.integerValue||f.doubleValue);return g<m?-1:g>m?1:g===m?0:isNaN(g)?isNaN(m)?0:-1:1})(r,e);case 3:return t0(r.timestampValue,e.timestampValue);case 4:return t0(ou(r),ou(e));case 5:return Lg(r.stringValue,e.stringValue);case 6:return(function(u,f){const g=Es(u),m=Es(f);return g.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),m=f.split("/");for(let p=0;p<g.length&&p<m.length;p++){const b=je(g[p],m[p]);if(b!==0)return b}return je(g.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=je(Dt(u.latitude),Dt(f.latitude));return g!==0?g:je(Dt(u.longitude),Dt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return n0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const g=u.fields||{},m=f.fields||{},p=g[Th]?.arrayValue,b=m[Th]?.arrayValue,T=je(p?.values?.length||0,b?.values?.length||0);return T!==0?T:n0(p,b)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===th.mapValue&&f===th.mapValue)return 0;if(u===th.mapValue)return 1;if(f===th.mapValue)return-1;const g=u.fields||{},m=Object.keys(g),p=f.fields||{},b=Object.keys(p);m.sort(),b.sort();for(let T=0;T<m.length&&T<b.length;++T){const w=Lg(m[T],b[T]);if(w!==0)return w;const x=Ro(g[m[T]],p[b[T]]);if(x!==0)return x}return je(m.length,b.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function t0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const n=bs(r),s=bs(e),o=je(n.seconds,s.seconds);return o!==0?o:je(n.nanos,s.nanos)}function n0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ro(n[o],s[o]);if(u)return u}return je(n.length,s.length)}function xo(r){return Ug(r)}function Ug(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=bs(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Es(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Ug(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Ug(n.fields[f])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function lh(r){switch(Ts(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(r);return e?16+lh(e):16;case 5:return 2*r.stringValue.length;case 6:return Es(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+lh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return As(s.fields,((u,f)=>{o+=u.length+lh(f)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function r0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function jg(r){return!!r&&"integerValue"in r}function ym(r){return!!r&&"arrayValue"in r}function i0(r){return!!r&&"nullValue"in r}function s0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uh(r){return!!r&&"mapValue"in r}function aR(r){return(r?.mapValue?.fields||{})[rE]?.stringValue===iE}function Zl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return As(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Zl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zl(r.arrayValue.values[n]);return e}return{...r}}function oR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===sR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!uh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(n)}setAll(e){let n=fn.emptyPath(),s={},o=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const m=this.getFieldsMap(n);this.applyChanges(m,s,o),s={},o=[],n=g.popLast()}f?s[g.lastSegment()]=Zl(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];uh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){As(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Mn(Zl(this.value))}}function sE(r){const e=[];return As(r.fields,((n,s)=>{const o=new fn([n]);if(uh(s)){const u=sE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n,s,o,u,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new _n(e,0,Re.min(),Re.min(),Re.min(),Mn.empty(),0)}static newFoundDocument(e,n,s,o){return new _n(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new _n(e,2,n,Re.min(),Re.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new _n(e,3,n,Re.min(),Re.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.position=e,this.inclusive=n}}function a0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=Ro(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function o0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Kr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function lR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{}class Lt extends aE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new cR(e,n,s):n==="array-contains"?new dR(e,s):n==="in"?new gR(e,s):n==="not-in"?new mR(e,s):n==="array-contains-any"?new pR(e,s):new Lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new hR(e,s):new fR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vr extends aE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vr(e,n)}matches(e){return oE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oE(r){return r.op==="and"}function lE(r){return uR(r)&&oE(r)}function uR(r){for(const e of r.filters)if(e instanceof vr)return!1;return!0}function zg(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(lE(r))return r.filters.map((e=>zg(e))).join(",");{const e=r.filters.map((n=>zg(n))).join(",");return`${r.op}(${e})`}}function uE(r,e){return r instanceof Lt?(function(s,o){return o instanceof Lt&&s.op===o.op&&s.field.isEqual(o.field)&&Kr(s.value,o.value)})(r,e):r instanceof vr?(function(s,o){return o instanceof vr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,g)=>u&&uE(f,o.filters[g])),!0):!1})(r,e):void Te(19439)}function cE(r){return r instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`})(r):r instanceof vr?(function(n){return n.op.toString()+" {"+n.getFilters().map(cE).join(" ,")+"}"})(r):"Filter"}class cR extends Lt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class hR extends Lt{constructor(e,n){super(e,"in",n),this.keys=hE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fR extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=hE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function hE(r,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}class dR extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ym(n)&&uu(n.arrayValue,this.value)}}class gR extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}}class mR extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uu(this.value.arrayValue,n)}}class pR extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>uu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n=null,s=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function l0(r,e=null,n=[],s=[],o=null,u=null,f=null){return new yR(r,e,n,s,o,u,f)}function vm(r){const e=xe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>zg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Gh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>xo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>xo(s))).join(",")),e.Te=n}return e.Te}function _m(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!lR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!uE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!o0(r.startAt,e.startAt)&&o0(r.endAt,e.endAt)}function Bg(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n=null,s=[],o=[],u=null,f="F",g=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vR(r,e,n,s,o,u,f,g){return new Po(r,e,n,s,o,u,f,g)}function bm(r){return new Po(r)}function u0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function fE(r){return r.collectionGroup!==null}function Wl(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Yt(fn.comparator);return f.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new cu(u,s))})),n.has(fn.keyField().canonicalString())||e.Ie.push(new cu(fn.keyField(),s))}return e.Ie}function zr(r){const e=xe(r);return e.Ee||(e.Ee=_R(e,Wl(r))),e.Ee}function _R(r,e){if(r.limitType==="F")return l0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new cu(o.field,u)}));const n=r.endAt?new Sh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Sh(r.startAt.position,r.startAt.inclusive):null;return l0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function qg(r,e){const n=r.filters.concat([e]);return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Hg(r,e,n){return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Yh(r,e){return _m(zr(r),zr(e))&&r.limitType===e.limitType}function dE(r){return`${vm(zr(r))}|lt:${r.limitType}`}function fo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>cE(o))).join(", ")}]`),Gh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>xo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>xo(o))).join(",")),`Target(${s})`})(zr(r))}; limitType=${r.limitType})`}function Qh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Wl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,g,m){const p=a0(f,g,m);return f.inclusive?p<=0:p<0})(s.startAt,Wl(s),o)||s.endAt&&!(function(f,g,m){const p=a0(f,g,m);return f.inclusive?p>=0:p>0})(s.endAt,Wl(s),o))})(r,e)}function bR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function gE(r){return(e,n)=>{let s=!1;for(const o of Wl(r)){const u=ER(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function ER(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,g){const m=f.data.field(u),p=g.data.field(u);return m!==null&&p!==null?Ro(m,p):Te(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Zb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new bt(ve.comparator);function Ii(){return TR}const mE=new bt(ve.comparator);function Kl(...r){let e=mE;for(const n of r)e=e.insert(n.key,n);return e}function pE(r){let e=mE;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function la(){return Jl()}function yE(){return Jl()}function Jl(){return new ya((r=>r.toString()),((r,e)=>r.isEqual(e)))}const SR=new bt(ve.comparator),wR=new Yt(ve.comparator);function ze(...r){let e=wR;for(const n of r)e=e.add(n);return e}const AR=new Yt(je);function RR(){return AR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function vE(r){return{integerValue:""+r}}function xR(r,e){return eR(e)?vE(e):Em(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function CR(r,e,n){return r instanceof wh?(function(o,u){const f={fields:{[eE]:{stringValue:Jb},[nE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&pm(u)&&(u=Kh(u)),u&&(f.fields[tE]=u),{mapValue:f}})(n,e):r instanceof hu?bE(r,e):r instanceof fu?EE(r,e):(function(o,u){const f=_E(o,u),g=c0(f)+c0(o.Ae);return jg(f)&&jg(o.Ae)?vE(g):Em(o.serializer,g)})(r,e)}function IR(r,e,n){return r instanceof hu?bE(r,e):r instanceof fu?EE(r,e):n}function _E(r,e){return r instanceof Ah?(function(s){return jg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class wh extends Xh{}class hu extends Xh{constructor(e){super(),this.elements=e}}function bE(r,e){const n=TE(e);for(const s of r.elements)n.some((o=>Kr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class fu extends Xh{constructor(e){super(),this.elements=e}}function EE(r,e){let n=TE(e);for(const s of r.elements)n=n.filter((o=>!Kr(o,s)));return{arrayValue:{values:n}}}class Ah extends Xh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function c0(r){return Dt(r.integerValue||r.doubleValue)}function TE(r){return ym(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function DR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof hu&&o instanceof hu||s instanceof fu&&o instanceof fu?Ao(s.elements,o.elements,Kr):s instanceof Ah&&o instanceof Ah?Kr(s.Ae,o.Ae):s instanceof wh&&o instanceof wh})(r.transform,e.transform)}class NR{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $h{}function SE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Tm(r.key,yr.none()):new Tu(r.key,r.data,yr.none());{const n=r.data,s=Mn.empty();let o=new Yt(fn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Rs(r.key,s,new Hn(o.toArray()),yr.none())}}function OR(r,e,n){r instanceof Tu?(function(o,u,f){const g=o.value.clone(),m=f0(o.fieldTransforms,u,f.transformResults);g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):r instanceof Rs?(function(o,u,f){if(!ch(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=f0(o.fieldTransforms,u,f.transformResults),m=u.data;m.setAll(wE(o)),m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function eu(r,e,n,s){return r instanceof Tu?(function(u,f,g,m){if(!ch(u.precondition,f))return g;const p=u.value.clone(),b=d0(u.fieldTransforms,m,f);return p.setAll(b),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null})(r,e,n,s):r instanceof Rs?(function(u,f,g,m){if(!ch(u.precondition,f))return g;const p=d0(u.fieldTransforms,m,f),b=f.data;return b.setAll(wE(u)),b.setAll(p),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,f,g){return ch(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,e,n)}function MR(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=_E(s.transform,o||null);u!=null&&(n===null&&(n=Mn.empty()),n.set(s.field,u))}return n||null}function h0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ao(s,o,((u,f)=>DR(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tu extends $h{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends $h{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function wE(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function f0(r,e,n){const s=new Map;Je(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,g=e.data.field(u.field);s.set(u.field,IR(f,g,n[o]))}return s}function d0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,CR(u,f,e))}return s}class Tm extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kR extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&OR(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=eu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=eu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=yE();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const m=SE(f,g);m!==null&&s.set(o.key,m),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((n,s)=>h0(n,s)))&&Ao(this.baseMutations,e.baseMutations,((n,s)=>h0(n,s)))}}class Sm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return SR})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Sm(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ye;function UR(r){switch(r){case ee.OK:return Te(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function AE(r){if(r===void 0)return Ci("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Pt.OK:return ee.OK;case Pt.CANCELLED:return ee.CANCELLED;case Pt.UNKNOWN:return ee.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ee.INTERNAL;case Pt.UNAVAILABLE:return ee.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ee.NOT_FOUND;case Pt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Pt.ABORTED:return ee.ABORTED;case Pt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Pt.DATA_LOSS:return ee.DATA_LOSS;default:return Te(39323,{code:r})}}(Ye=Pt||(Pt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new ps([4294967295,4294967295],0);function g0(r){const e=jR().encode(r),n=new zb;return n.update(e),new Uint8Array(n.digest())}function m0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ps([n,s],0),new ps([o,u],0)]}class wm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(s<0)throw new Yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ps.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ps.fromNumber(s)));return o.compare(zR)===1&&(o=new ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g0(e),[s,o]=m0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new wm(u,o,n);return s.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const n=g0(e),[s,o]=m0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Zh(Re.min(),o,new bt(je),Ii(),ze())}}class Su{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Su(s,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class RE{constructor(e,n){this.targetId=e,this.Ce=n}}class xE{constructor(e,n,s=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class p0{constructor(){this.ve=0,this.Fe=y0(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),s=ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:u})}})),new Su(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=y0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ii(),this.Je=nh(),this.He=nh(),this.Ye=new bt(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Bg(u))if(s===0){const f=new ve(u.path);this.et(n,f,_n.newNoDocument(f,Re.min()))}else Je(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(e),m=g?this.ct(g,e,f):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=Es(s).toUint8Array()}catch(m){if(m instanceof Wb)return wo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{g=new wm(f,o,u)}catch(m){return wo(m instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&Bg(g.target)){const m=new ve(g.target.path);this.It(m).has(f)||this.Et(f,m)||this.et(f,m,_n.newNoDocument(m,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=ze();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Zh(e,n,this.Ye,this.je,s);return this.je=Ii(),this.Je=nh(),this.He=nh(),this.Ye=new bt(je),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new p0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Yt(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Yt(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nh(){return new bt(ve.comparator)}function y0(){return new bt(ve.comparator)}const qR={asc:"ASCENDING",desc:"DESCENDING"},HR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FR={and:"AND",or:"OR"};class GR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fg(r,e){return r.useProto3Json||Gh(e)?e:{value:e}}function Rh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function KR(r,e){return Rh(r,e.toTimestamp())}function Br(r){return Je(!!r,49232),Re.fromTimestamp((function(n){const s=bs(n);return new gt(s.seconds,s.nanos)})(r))}function Am(r,e){return Gg(r,e).canonicalString()}function Gg(r,e){const n=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function IE(r){const e=ft.fromString(r);return Je(kE(e),10190,{key:e.toString()}),e}function Kg(r,e){return Am(r.databaseId,e.path)}function Eg(r,e){const n=IE(e);if(n.get(1)!==r.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(NE(n))}function DE(r,e){return Am(r.databaseId,e)}function YR(r){const e=IE(r);return e.length===4?ft.emptyPath():NE(e)}function Yg(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function NE(r){return Je(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function v0(r,e,n){return{name:Kg(r,e),fields:n.value.mapValue.fields}}function QR(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?(Je(b===void 0||typeof b=="string",58123),dn.fromBase64String(b||"")):(Je(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),dn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(p){const b=p.code===void 0?ee.UNKNOWN:AE(p.code);return new he(b,p.message||"")})(f);n=new xE(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Eg(r,s.document.name),u=Br(s.document.updateTime),f=s.document.createTime?Br(s.document.createTime):Re.min(),g=new Mn({mapValue:{fields:s.document.fields}}),m=_n.newFoundDocument(o,u,f,g),p=s.targetIds||[],b=s.removedTargetIds||[];n=new hh(p,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Eg(r,s.document),u=s.readTime?Br(s.readTime):Re.min(),f=_n.newNoDocument(o,u),g=s.removedTargetIds||[];n=new hh([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Eg(r,s.document),u=s.removedTargetIds||[];n=new hh([],u,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new LR(o,u),g=s.targetId;n=new RE(g,f)}}return n}function XR(r,e){let n;if(e instanceof Tu)n={update:v0(r,e.key,e.value)};else if(e instanceof Tm)n={delete:Kg(r,e.key)};else if(e instanceof Rs)n={update:v0(r,e.key,e.data),updateMask:ix(e.fieldMask)};else{if(!(e instanceof kR))return Te(16599,{Vt:e.type});n={verify:Kg(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const g=f.transform;if(g instanceof wh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof hu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof fu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Ah)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Te(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:KR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)})(r,e.precondition)),n}function $R(r,e){return r&&r.length>0?(Je(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?Br(o.updateTime):Br(u);return f.isEqual(Re.min())&&(f=Br(u)),new NR(f,o.transformResults||[])})(n,e)))):[]}function ZR(r,e){return{documents:[DE(r,e.path)]}}function WR(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=DE(r,o);const u=(function(p){if(p.length!==0)return ME(vr.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(p){if(p.length!==0)return p.map((b=>(function(w){return{field:go(w.field),direction:tx(w.dir)}})(b)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Fg(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function JR(r){let e=YR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Je(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(T){const w=OE(T);return w instanceof vr&&lE(w)?w.getFilters():[w]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((w=>(function(B){return new cu(mo(B.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(w)))})(n.orderBy));let g=null;n.limit&&(g=(function(T){let w;return w=typeof T=="object"?T.value:T,Gh(w)?null:w})(n.limit));let m=null;n.startAt&&(m=(function(T){const w=!!T.before,x=T.values||[];return new Sh(x,w)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const w=!T.before,x=T.values||[];return new Sh(x,w)})(n.endAt)),vR(e,o,f,u,g,"F",m,p)}function ex(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mo(n.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=mo(n.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Lt.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return vr.create(n.compositeFilter.filters.map((s=>OE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(r):Te(30097,{filter:r})}function tx(r){return qR[r]}function nx(r){return HR[r]}function rx(r){return FR[r]}function go(r){return{fieldPath:r.canonicalString()}}function mo(r){return fn.fromServerFormat(r.fieldPath)}function ME(r){return r instanceof Lt?(function(n){if(n.op==="=="){if(s0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(i0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(s0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(i0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:nx(n.op),value:n.value}}})(r):r instanceof vr?(function(n){const s=n.getFilters().map((o=>ME(o)));return s.length===1?s[0]:{compositeFilter:{op:rx(n.op),filters:s}}})(r):Te(54877,{filter:r})}function ix(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,s,o,u=Re.min(),f=Re.min(),g=dn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=m}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.yt=e}}function ax(r){const e=JR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.Cn=new lx}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(_s.min())}updateCollectionGroup(e,n,s){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class lx{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Yt(ft.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Yt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VE=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(VE,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Co(0)}static cr(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LruGarbageCollector",ux=1048576;function E0([r,e],[n,s]){const o=je(r,n);return o===0?je(e,s):o}class cx{constructor(e){this.Ir=e,this.buffer=new Yt(E0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();E0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hx{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(b0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vo(n)?fe(b0,"Ignoring IndexedDB error during garbage collection: ",n):await ko(n)}await this.Vr(3e5)}))}}class fx{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Fh.ce);const s=new cx(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(_0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,g,m,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),ho()<=Ue.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(m-g)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-b}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function dx(r,e){return new fx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.changes=new ya((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&eu(s.mutation,o,Hn.empty(),gt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ze()){const o=la();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Kl();return u.forEach(((g,m)=>{f=f.insert(g,m.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=la();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ze())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,s,o){let u=Ii();const f=Jl(),g=(function(){return Jl()})();return n.forEach(((m,p)=>{const b=s.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof Rs)?u=u.insert(p.key,p):b!==void 0?(f.set(p.key,b.mutation.getFieldMask()),eu(b.mutation,p,b.mutation.getFieldMask(),gt.now())):f.set(p.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,u).next((m=>(m.forEach(((p,b)=>f.set(p,b))),n.forEach(((p,b)=>g.set(p,new mx(b,f.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=Jl();let o=new bt(((f,g)=>f-g)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let b=s.get(m)||Hn.empty();b=g.applyToLocalView(p,b),s.set(m,b);const T=(o.get(g.batchId)||ze()).add(m);o=o.insert(g.batchId,T)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const m=g.getNext(),p=m.key,b=m.value,T=yE();b.forEach((w=>{if(!u.has(w)){const x=SE(n.get(w),s.get(w));x!==null&&T.set(w,x),u=u.add(w)}})),f.push(this.documentOverlayCache.saveOverlays(e,p,T))}return ie.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ie.resolve(la());let g=au,m=u;return f.next((p=>ie.forEach(p,((b,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(b)?ie.resolve():this.remoteDocumentCache.getEntry(e,b).next((w=>{m=m.insert(b,w)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,m,p,ze()))).next((b=>({batchId:g,changes:pE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=Kl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Kl();return this.indexManager.getCollectionParents(e,u).next((g=>ie.forEach(g,(m=>{const p=(function(T,w){return new Po(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,m.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((b=>{b.forEach(((T,w)=>{f=f.insert(T,w)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((m,p)=>{const b=p.getKey();f.get(b)===null&&(f=f.insert(b,_n.newInvalidDocument(b)))}));let g=Kl();return f.forEach(((m,p)=>{const b=u.get(m);b!==void 0&&eu(b.mutation,p,Hn.empty(),gt.now()),Qh(n,p)&&(g=g.insert(m,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Br(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:ax(o.bundledQuery),readTime:Br(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.overlays=new bt(ve.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=la();return ie.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ie.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,n,s){const o=la(),u=n.length+1,f=new ve(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const m=g.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new bt(((p,b)=>p-b));const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let b=u.get(p.largestBatchId);b===null&&(b=la(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=la(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return ie.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new PR(n,s));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.Qr=new Yt(en.$r),this.Ur=new Yt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new en(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new en(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new ft([])),s=new en(n,e),o=new en(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new ft([])),s=new en(n,e),o=new en(n,e+1);let u=ze();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new en(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class en{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(en.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new VR(u,n,s,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new en(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ie.resolve(f)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?mm:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new en(n,0),o=new en(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Yt(je);return n.forEach((o=>{const u=new en(o,0),f=new en(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{s=s.add(g.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new en(new ve(u),0);let g=new Yt(je);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(g=g.add(m.Yr)),!0)}),f),ie.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(n.mutations,(o=>{const u=new en(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new en(n,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.ri=e,this.docs=(function(){return new bt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ie.resolve(s?s.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let s=Ii();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():_n.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Ii();const f=n.path,g=new ve(f.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(g);for(;m.hasNext();){const{key:p,value:{document:b}}=m.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||$1(X1(b),s)<=0||(o.has(b.key)||Qh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return ie.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new Tx(this)}getSize(e){return ie.resolve(this.size)}}class Tx extends gx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.persistence=e,this.si=new ya((n=>vm(n)),_m),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Rm,this.targetCount=0,this.ai=Co.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ie.waitFor(u).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ie.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ie.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ie.resolve(s)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Fh(0),this.li=!1,this.li=!0,this.hi=new _x,this.referenceDelegate=e(this),this.Pi=new Sx(this),this.indexManager=new ox,this.remoteDocumentCache=(function(o){return new Ex(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new sx(n),this.Ii=new yx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new bx(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const o=new wx(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class wx extends W1{constructor(e){super(),this.currentSequenceNumber=e}}class xm{constructor(e){this.persistence=e,this.Ri=new Rm,this.Vi=null}static mi(e){return new xm(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.pi=new ya((s=>tR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=dx(this,n)}static mi(e,n){return new xh(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ie.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((g=>{g||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lh(e.data.value)),n}br(e,n,s){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ze(),o=ze();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Cm(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _A()?8:J1(bn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Ax;return this.Ss(e,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,f,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ho()<=Ue.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(ho()<=Ue.DEBUG&&fe("QueryEngine","Query:",fo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ho()<=Ue.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):ie.resolve())}ys(e,n){if(u0(n))return ie.resolve(null);let s=zr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Hg(n,null,"F"),s=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=ze(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,s).next((m=>{const p=this.Ds(n,g);return this.Cs(n,p,f,m.readTime)?this.ys(e,Hg(n,null,"F")):this.vs(e,p,n,m)}))))})))))}ws(e,n,s,o){return u0(n)||o.isEqual(Re.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?ie.resolve(null):(ho()<=Ue.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(n)),this.vs(e,f,n,Q1(o,au)).next((g=>g)))}))}Ds(e,n){let s=new Yt(gE(e));return n.forEach(((o,u)=>{Qh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return ho()<=Ue.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",fo(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="LocalStore",xx=3e8;class Cx{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new bt(je),this.xs=new ya((u=>vm(u)),_m),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new px(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Ix(r,e,n,s){return new Cx(r,e,n,s)}async function LE(r,e){const n=xe(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],g=[];let m=ze();for(const p of o){f.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}return n.localDocuments.getDocuments(s,m).next((p=>({Ls:p,removedBatchIds:f,addedBatchIds:g})))}))}))}function Dx(r,e){const n=xe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,m,p,b){const T=p.batch,w=T.keys();let x=ie.resolve();return w.forEach((B=>{x=x.next((()=>b.getEntry(m,B))).next((K=>{const L=p.docVersions.get(B);Je(L!==null,48541),K.version.compareTo(L)<0&&(T.applyToRemoteDocument(K,p),K.isValidDocument()&&(K.setReadTime(p.commitVersion),b.addEntry(K)))}))})),x.next((()=>g.mutationQueue.removeMutationBatch(m,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let m=ze();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(m=m.add(g.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function UE(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Nx(r,e){const n=xe(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((b,T)=>{const w=o.get(T);if(!w)return;g.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,T))));let x=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?x=x.withResumeToken(dn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):b.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(b.resumeToken,s)),o=o.insert(T,x),(function(K,L,Y){return K.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=xx?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(w,x,b)&&g.push(n.Pi.updateTargetData(u,x))}));let m=Ii(),p=ze();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(Ox(u,f,e.documentUpdates).next((b=>{m=b.ks,p=b.qs}))),!s.isEqual(Re.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(b)}return ie.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,m,p))).next((()=>m))})).then((u=>(n.Ms=o,u)))}function Ox(r,e,n){let s=ze(),o=ze();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=Ii();return n.forEach(((g,m)=>{const p=u.get(g);m.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(g,m.readTime),f=f.insert(g,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),f=f.insert(g,m)):fe(Im,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",m.version)})),{ks:f,qs:o}}))}function Mx(r,e){const n=xe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=mm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function kx(r,e){const n=xe(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ie.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new fs(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Qg(r,e,n){const s=xe(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Vo(f))throw f;fe(Im,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function T0(r,e,n){const s=xe(r);let o=Re.min(),u=ze();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(m,p,b){const T=xe(m),w=T.xs.get(b);return w!==void 0?ie.resolve(T.Ms.get(w)):T.Pi.getTargetData(p,b)})(s,f,zr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((m=>{u=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:ze()))).next((g=>(Vx(s,bR(e),g),{documents:g,Qs:u})))))}function Vx(r,e,n){let s=r.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class S0{constructor(){this.activeTargetIds=RR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Px{constructor(){this.Mo=new S0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new S0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="ConnectivityMonitor";class A0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(w0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(w0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Xg(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="RestConnection",Ux={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Eh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=Xg(),g=this.zo(e,n.toUriEncodedString());fe(Tg,`Sending RPC '${e}' ${f}:`,g,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,u);const{host:p}=new URL(g),b=No(p);return this.Jo(e,g,m,s,b).then((T=>(fe(Tg,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw wo(Tg,`RPC '${e}' ${f} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=Ux[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class Bx extends jx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Xg();return new Promise(((g,m)=>{const p=new Bb;p.setWithCredentials(!0),p.listenOnce(qb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case oh.NO_ERROR:const T=p.getResponseJson();fe(yn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),g(T);break;case oh.TIMEOUT:fe(yn,`RPC '${e}' ${f} timed out`),m(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const w=p.getStatus();if(fe(yn,`RPC '${e}' ${f} failed with status:`,w,"response text:",p.getResponseText()),w>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const B=x?.error;if(B&&B.status&&B.message){const K=(function(Y){const $=Y.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf($)>=0?$:ee.UNKNOWN})(B.status);m(new he(K,B.message))}else m(new he(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new he(ee.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{fe(yn,`RPC '${e}' ${f} completed.`)}}));const b=JSON.stringify(o);fe(yn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",b,s,15)}))}T_(e,n,s){const o=Xg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Gb(),g=Fb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const b=u.join("");fe(yn,`Creating RPC '${e}' stream ${o}: ${b}`,m);const T=f.createWebChannel(b,m);this.I_(T);let w=!1,x=!1;const B=new zx({Yo:L=>{x?fe(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(w||(fe(yn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),w=!0),fe(yn,`RPC '${e}' stream ${o} sending:`,L),T.send(L))},Zo:()=>T.close()}),K=(L,Y,$)=>{L.listen(Y,(X=>{try{$(X)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return K(T,Gl.EventType.OPEN,(()=>{x||(fe(yn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),K(T,Gl.EventType.CLOSE,(()=>{x||(x=!0,fe(yn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(T))})),K(T,Gl.EventType.ERROR,(L=>{x||(x=!0,wo(yn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),B.a_(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),K(T,Gl.EventType.MESSAGE,(L=>{if(!x){const Y=L.data[0];Je(!!Y,16349);const $=Y,X=$?.error||$[0]?.error;if(X){fe(yn,`RPC '${e}' stream ${o} received error:`,X);const ne=X.status;let ae=(function(A){const I=Pt[A];if(I!==void 0)return AE(I)})(ne),se=X.message;ae===void 0&&(ae=ee.INTERNAL,se="Unknown error status: "+ne+" with message "+X.message),x=!0,B.a_(new he(ae,se)),T.close()}else fe(yn,`RPC '${e}' stream ${o} received:`,Y),B.u_(Y)}})),K(g,Hb.STAT_EVENT,(L=>{L.stat===Pg.PROXY?fe(yn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Pg.NOPROXY&&fe(yn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(r){return new GR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="PersistentStream";class zE{constructor(e,n,s,o,u,f,g,m){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Ci(n.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(R0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(R0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qx extends zE{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=QR(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?Br(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Yg(this.serializer),n.addTarget=(function(u,f){let g;const m=f.target;if(g=Bg(m)?{documents:ZR(u,m)}:{query:WR(u,m).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=CE(u,f.resumeToken);const p=Fg(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo(Re.min())>0){g.readTime=Rh(u,f.snapshotVersion.toTimestamp());const p=Fg(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const s=ex(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Yg(this.serializer),n.removeTarget=e,this.q_(n)}}class Hx extends zE{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$R(e.writeResults,e.commitTime),s=Br(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Yg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>XR(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{}class Gx extends Fx{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Gg(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,Gg(n,s),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Kx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class Yx{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{va(this)&&(fe(ga,"Restarting streams for network reachability change."),await(async function(m){const p=xe(m);p.Ea.add(4),await wu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Jh(p)})(this))}))})),this.Ra=new Kx(s,o)}}async function Jh(r){if(va(r))for(const e of r.da)await e(!0)}async function wu(r){for(const e of r.da)await e(!1)}function BE(r,e){const n=xe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mm(n)?Om(n):Lo(n).O_()&&Nm(n,e))}function Dm(r,e){const n=xe(r),s=Lo(n);n.Ia.delete(e),s.O_()&&qE(n,e),n.Ia.size===0&&(s.O_()?s.L_():va(n)&&n.Ra.set("Unknown"))}function Nm(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(r).Y_(e)}function qE(r,e){r.Va.Ue(e),Lo(r).Z_(e)}function Om(r){r.Va=new BR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Lo(r).start(),r.Ra.ua()}function Mm(r){return va(r)&&!Lo(r).x_()&&r.Ia.size>0}function va(r){return xe(r).Ea.size===0}function HE(r){r.Va=void 0}async function Qx(r){r.Ra.set("Online")}async function Xx(r){r.Ia.forEach(((e,n)=>{Nm(r,e)}))}async function $x(r,e){HE(r),Mm(r)?(r.Ra.ha(e),Om(r)):r.Ra.set("Unknown")}async function Zx(r,e,n){if(r.Ra.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(r,e)}catch(s){fe(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ch(r,s)}else if(e instanceof hh?r.Va.Ze(e):e instanceof RE?r.Va.st(e):r.Va.tt(e),!n.isEqual(Re.min()))try{const s=await UE(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(m.resumeToken,f))}})),g.targetMismatches.forEach(((m,p)=>{const b=u.Ia.get(m);if(!b)return;u.Ia.set(m,b.withResumeToken(dn.EMPTY_BYTE_STRING,b.snapshotVersion)),qE(u,m);const T=new fs(b.target,m,p,b.sequenceNumber);Nm(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){fe(ga,"Failed to raise snapshot:",s),await Ch(r,s)}}async function Ch(r,e,n){if(!Vo(e))throw e;r.Ea.add(1),await wu(r),r.Ra.set("Offline"),n||(n=()=>UE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(ga,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Jh(r)}))}function FE(r,e){return e().catch((n=>Ch(r,n,e)))}async function ef(r){const e=xe(r),n=Ss(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mm;for(;Wx(e);)try{const o=await Mx(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Jx(e,o)}catch(o){await Ch(e,o)}GE(e)&&KE(e)}function Wx(r){return va(r)&&r.Ta.length<10}function Jx(r,e){r.Ta.push(e);const n=Ss(r);n.O_()&&n.X_&&n.ea(e.mutations)}function GE(r){return va(r)&&!Ss(r).x_()&&r.Ta.length>0}function KE(r){Ss(r).start()}async function eC(r){Ss(r).ra()}async function tC(r){const e=Ss(r);for(const n of r.Ta)e.ea(n.mutations)}async function nC(r,e,n){const s=r.Ta.shift(),o=Sm.from(s,e,n);await FE(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await ef(r)}async function rC(r,e){e&&Ss(r).X_&&await(async function(s,o){if((function(f){return UR(f)&&f!==ee.ABORTED})(o.code)){const u=s.Ta.shift();Ss(s).B_(),await FE(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ef(s)}})(r,e),GE(r)&&KE(r)}async function x0(r,e){const n=xe(r);n.asyncQueue.verifyOperationInProgress(),fe(ga,"RemoteStore received new credentials");const s=va(n);n.Ea.add(3),await wu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jh(n)}async function iC(r,e){const n=xe(r);e?(n.Ea.delete(2),await Jh(n)):e||(n.Ea.add(2),await wu(n),n.Ra.set("Unknown"))}function Lo(r){return r.ma||(r.ma=(function(n,s,o){const u=xe(n);return u.sa(),new qx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Qx.bind(null,r),t_:Xx.bind(null,r),r_:$x.bind(null,r),H_:Zx.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Mm(r)?Om(r):r.Ra.set("Unknown")):(await r.ma.stop(),HE(r))}))),r.ma}function Ss(r){return r.fa||(r.fa=(function(n,s,o){const u=xe(n);return u.sa(),new Hx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eC.bind(null,r),r_:rC.bind(null,r),ta:tC.bind(null,r),na:nC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ef(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(ga,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,g=new km(e,n,f,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(r,e){if(Ci("AsyncQueue",`${e}: ${r}`),Vo(r))return new he(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Kl(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.ga=new bt(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Io{constructor(e,n,s,o,u,f,g,m,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new Io(e,n,yo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aC{constructor(){this.queries=I0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=I0(),u.forEach(((f,g)=>{for(const m of g.Sa)m.onError(s)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function I0(){return new ya((r=>dE(r)),Yh)}async function oC(r,e){const n=xe(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new sC,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=Vm(f,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Pm(n)}async function lC(r,e){const n=xe(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function uC(r,e){const n=xe(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(s=!0);f.wa=o}}s&&Pm(n)}function cC(r,e,n){const s=xe(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Pm(r){r.Ca.forEach((e=>{e.next()}))}var $g,D0;(D0=$g||($g={})).Ma="default",D0.Cache="cache";class hC{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Io(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.key=e}}class QE{constructor(e){this.key=e}}class fC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=gE(e),this.tu=new yo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new C0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,T)=>{const w=o.get(b),x=Qh(this.query,T)?T:null,B=!!w&&this.mutatedKeys.has(w.key),K=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let L=!1;w&&x?w.data.isEqual(x.data)?B!==K&&(s.track({type:3,doc:x}),L=!0):this.su(w,x)||(s.track({type:2,doc:x}),L=!0,(m&&this.eu(x,m)>0||p&&this.eu(x,p)<0)&&(g=!0)):!w&&x?(s.track({type:0,doc:x}),L=!0):w&&!x&&(s.track({type:1,doc:w}),L=!0,(m||p)&&(g=!0)),L&&(x?(f=f.add(x),u=K?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{tu:f,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((b,T)=>(function(x,B){const K=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:L})}};return K(x)-K(B)})(b.type,T.type)||this.eu(b.doc,T.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,p=m!==this.Za;return this.Za=m,f.length!==0||p?{snapshot:new Io(this.query,e.tu,u,f,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new QE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new YE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lm="SyncEngine";class dC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class gC{constructor(e){this.key=e,this.hu=!1}}class mC{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ya((g=>dE(g)),Yh),this.Iu=new Map,this.Eu=new Set,this.du=new bt(ve.comparator),this.Au=new Map,this.Ru=new Rm,this.Vu={},this.mu=new Map,this.fu=Co.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pC(r,e,n=!0){const s=eT(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await XE(s,e,n,!0),o}async function yC(r,e){const n=eT(r);await XE(n,e,!0,!1)}async function XE(r,e,n,s){const o=await kx(r.localStore,zr(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await vC(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&BE(r.remoteStore,o),g}async function vC(r,e,n,s,o){r.pu=(T,w,x)=>(async function(K,L,Y,$){let X=L.view.ru(Y);X.Cs&&(X=await T0(K.localStore,L.query,!1).then((({documents:C})=>L.view.ru(C,X))));const ne=$&&$.targetChanges.get(L.targetId),ae=$&&$.targetMismatches.get(L.targetId)!=null,se=L.view.applyChanges(X,K.isPrimaryClient,ne,ae);return O0(K,L.targetId,se.au),se.snapshot})(r,T,w,x);const u=await T0(r.localStore,e,!0),f=new fC(e,u.Qs),g=f.ru(u.documents),m=Su.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=f.applyChanges(g,r.isPrimaryClient,m);O0(r,n,p.au);const b=new dC(e,n,f);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),p.snapshot}async function _C(r,e,n){const s=xe(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!Yh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Qg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Dm(s.remoteStore,o.targetId),Zg(s,o.targetId)})).catch(ko)):(Zg(s,o.targetId),await Qg(s.localStore,o.targetId,!0))}async function bC(r,e){const n=xe(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Dm(n.remoteStore,s.targetId))}async function EC(r,e,n){const s=CC(r);try{const o=await(function(f,g){const m=xe(f),p=gt.now(),b=g.reduce(((x,B)=>x.add(B.key)),ze());let T,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let B=Ii(),K=ze();return m.Ns.getEntries(x,b).next((L=>{B=L,B.forEach(((Y,$)=>{$.isValidDocument()||(K=K.add(Y))}))})).next((()=>m.localDocuments.getOverlayedDocuments(x,B))).next((L=>{T=L;const Y=[];for(const $ of g){const X=MR($,T.get($.key).overlayedDocument);X!=null&&Y.push(new Rs($.key,X,sE(X.value.mapValue),yr.exists(!0)))}return m.mutationQueue.addMutationBatch(x,p,Y,g)})).next((L=>{w=L;const Y=L.applyToLocalDocumentSet(T,K);return m.documentOverlayCache.saveOverlays(x,L.batchId,Y)}))})).then((()=>({batchId:w.batchId,changes:pE(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,g,m){let p=f.Vu[f.currentUser.toKey()];p||(p=new bt(je)),p=p.insert(g,m),f.Vu[f.currentUser.toKey()]=p})(s,o.batchId,n),await Au(s,o.changes),await ef(s.remoteStore)}catch(o){const u=Vm(o,"Failed to persist write");n.reject(u)}}async function $E(r,e){const n=xe(r);try{const s=await Nx(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Je(f.hu,14607):o.removedDocuments.size>0&&(Je(f.hu,42227),f.hu=!1))})),await Au(n,s,e)}catch(s){await ko(s)}}function N0(r,e,n){const s=xe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const m=xe(f);m.onlineState=g;let p=!1;m.queries.forEach(((b,T)=>{for(const w of T.Sa)w.va(g)&&(p=!0)})),p&&Pm(m)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function TC(r,e,n){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new bt(ve.comparator);f=f.insert(u,_n.newNoDocument(u,Re.min()));const g=ze().add(u),m=new Zh(Re.min(),new Map,new bt(je),f,g);await $E(s,m),s.du=s.du.remove(u),s.Au.delete(e),Um(s)}else await Qg(s.localStore,e,!1).then((()=>Zg(s,e,n))).catch(ko)}async function SC(r,e){const n=xe(r),s=e.batch.batchId;try{const o=await Dx(n.localStore,e);WE(n,s,null),ZE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await ko(o)}}async function wC(r,e,n){const s=xe(r);try{const o=await(function(f,g){const m=xe(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return m.mutationQueue.lookupMutationBatch(p,g).next((T=>(Je(T!==null,37113),b=T.keys(),m.mutationQueue.removeMutationBatch(p,T)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>m.localDocuments.getDocuments(p,b)))}))})(s.localStore,e);WE(s,e,n),ZE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await ko(o)}}function ZE(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function WE(r,e,n){const s=xe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Zg(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||JE(r,s)}))}function JE(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Dm(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Um(r))}function O0(r,e,n){for(const s of n)s instanceof YE?(r.Ru.addReference(s.key,e),AC(r,s)):s instanceof QE?(fe(Lm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||JE(r,s.key)):Te(19791,{wu:s})}function AC(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(fe(Lm,"New document in limbo: "+n),r.Eu.add(s),Um(r))}function Um(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(ft.fromString(e)),s=r.fu.next();r.Au.set(s,new gC(n)),r.du=r.du.insert(n,s),BE(r.remoteStore,new fs(zr(bm(n.path)),s,"TargetPurposeLimboResolution",Fh.ce))}}async function Au(r,e,n){const s=xe(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,m)=>{f.push(s.pu(m,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const b=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(p){o.push(p);const b=Cm.As(m.targetId,p);u.push(b)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(m,p){const b=xe(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ie.forEach(p,(w=>ie.forEach(w.Es,(x=>b.persistence.referenceDelegate.addReference(T,w.targetId,x))).next((()=>ie.forEach(w.ds,(x=>b.persistence.referenceDelegate.removeReference(T,w.targetId,x)))))))))}catch(T){if(!Vo(T))throw T;fe(Im,"Failed to update sequence numbers: "+T)}for(const T of p){const w=T.targetId;if(!T.fromCache){const x=b.Ms.get(w),B=x.snapshotVersion,K=x.withLastLimboFreeSnapshotVersion(B);b.Ms=b.Ms.insert(w,K)}}})(s.localStore,u))}async function RC(r,e){const n=xe(r);if(!n.currentUser.isEqual(e)){fe(Lm,"User change. New user:",e.toKey());const s=await LE(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((m=>{m.reject(new he(ee.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function xC(r,e){const n=xe(r),s=n.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function eT(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TC.bind(null,e),e.Pu.H_=uC.bind(null,e.eventManager),e.Pu.yu=cC.bind(null,e.eventManager),e}function CC(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wC.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ix(this.persistence,new Rx,e.initialUser,this.serializer)}Cu(e){return new PE(xm.mi,this.serializer)}Du(e){return new Px}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class IC extends Ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Je(this.persistence.referenceDelegate instanceof xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hx(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new PE((s=>xh.mi(s,n)),this.serializer)}}class Wg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>N0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RC.bind(null,this.syncEngine),await iC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aC})()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),s=(function(u){return new Bx(u)})(e.databaseInfo);return(function(u,f,g,m){return new Gx(u,f,g,m)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,g){return new Yx(s,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>N0(this.syncEngine,n,0)),(function(){return A0.v()?new A0:new Lx})())}createSyncEngine(e,n){return(function(o,u,f,g,m,p,b){const T=new mC(o,u,f,g,m,p);return b&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=xe(n);fe(ga,"RemoteStore shutting down."),s.Ea.add(5),await wu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wg.provider={build:()=>new Wg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class NC{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=vn.UNAUTHENTICATED,this.clientId=gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{fe(ws,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(fe(ws,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Vm(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function wg(r,e){r.asyncQueue.verifyOperationInProgress(),fe(ws,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await LE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function M0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await OC(r);fe(ws,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>x0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>x0(e.remoteStore,o))),r._onlineComponents=e}async function OC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(ws,"Using user provided OfflineComponentProvider");try{await wg(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await wg(r,new Ih)}}else fe(ws,"Using default OfflineComponentProvider"),await wg(r,new IC(void 0));return r._offlineComponents}async function tT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(ws,"Using user provided OnlineComponentProvider"),await M0(r,r._uninitializedComponentsProvider._online)):(fe(ws,"Using default OnlineComponentProvider"),await M0(r,new Wg))),r._onlineComponents}function MC(r){return tT(r).then((e=>e.syncEngine))}async function k0(r){const e=await tT(r),n=e.eventManager;return n.onListen=pC.bind(null,e.syncEngine),n.onUnlisten=_C.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bC.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firestore.googleapis.com",P0=!0;class L0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rT,this.ssl=P0}else this.host=e.host,this.ssl=e.ssl??P0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ux)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new L1;switch(s.type){case"firstParty":return new B1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=V0.get(n);s&&(fe("ComponentProvider","Removing Datastore"),V0.delete(n),s.terminate())})(this),Promise.resolve()}}function kC(r,e,n,s={}){r=ys(r,tf);const o=No(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${n}`;o&&(Ob(`https://${g}`),Mb("Firestore",!0)),u.host!==rT&&u.host!==g&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:g,ssl:o,emulatorOptions:s};if(!ha(m,f)&&(r._setSettings(m),s.mockUserToken)){let p,b;if(typeof s.mockUserToken=="string")p=s.mockUserToken,b=vn.MOCK_USER;else{p=cA(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new vn(T)}r._authCredentials=new U1(new Yb(p,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _a(this.firestore,e,this._query)}}class jt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Eu(n,jt._jsonSchema))return new jt(e,s||null,new ve(ft.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Ut("string",jt._jsonSchemaVersion),referencePath:Ut("string")};class vs extends _a{constructor(e,n,s){super(e,n,bm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new ve(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function U0(r,e,...n){if(r=Qt(r),Qb("collection","path",e),r instanceof tf){const s=ft.fromString(e,...n);return X_(s),new vs(r,null,s)}{if(!(r instanceof jt||r instanceof vs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...n));return X_(s),new vs(r.firestore,null,s)}}function Ur(r,e,...n){if(r=Qt(r),arguments.length===1&&(e=gm.newId()),Qb("doc","path",e),r instanceof tf){const s=ft.fromString(e,...n);return Q_(s),new jt(r,null,new ve(s))}{if(!(r instanceof jt||r instanceof vs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...n));return Q_(s),new jt(r.firestore,r instanceof vs?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="AsyncQueue";class z0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jE(this,"async_queue_retry"),this._c=()=>{const s=Sg();s&&fe(j0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ua;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vo(e))throw e;fe(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",B0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=km.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:B0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function B0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Do extends tf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new z0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z0(e),this._firestoreClient=void 0,await e}}}function VC(r,e){const n=typeof r=="object"?r:Lb(),s=typeof r=="string"?r:Eh,o=fm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=lA("firestore");u&&kC(o,...u)}return o}function iT(r){if(r._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PC(r),r._firestoreClient}function PC(r){const e=r._freezeSettings(),n=(function(o,u,f,g){return new iR(o,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,nT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new NC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(dn.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:Ut("string",sr._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qr._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,qr._jsonSchema))return new qr(e.latitude,e.longitude)}}qr._jsonSchemaVersion="firestore/geoPoint/1.0",qr._jsonSchema={type:Ut("string",qr._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Hr(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:Ut("string",Hr._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^__.*__$/;class UC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class sT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class zm{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aT(this.Ac)&&LC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Wh(e)}Cc(e,n,s,o=!1){return new zm({Ac:e,methodName:n,Dc:s,path:fn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bm(r){const e=r._freezeSettings(),n=Wh(r._databaseId);return new jC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function zC(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);qm("Data must be an object, but it was:",f,s);const g=oT(s,f);let m,p;if(u.merge)m=new Hn(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const T of u.mergeFields){const w=Jg(e,T,n);if(!f.contains(w))throw new he(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);uT(b,w)||b.push(w)}m=new Hn(b),p=f.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,p=f.fieldTransforms;return new UC(new Mn(g),m,p)}class rf extends jm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rf}}function BC(r,e,n,s){const o=r.Cc(1,e,n);qm("Data must be an object, but it was:",o,s);const u=[],f=Mn.empty();As(s,((m,p)=>{const b=Hm(e,m,n);p=Qt(p);const T=o.yc(b);if(p instanceof rf)u.push(b);else{const w=Ru(p,T);w!=null&&(u.push(b),f.set(b,w))}}));const g=new Hn(u);return new sT(f,g,o.fieldTransforms)}function qC(r,e,n,s,o,u){const f=r.Cc(1,e,n),g=[Jg(e,s,n)],m=[o];if(u.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)g.push(Jg(e,u[w])),m.push(u[w+1]);const p=[],b=Mn.empty();for(let w=g.length-1;w>=0;--w)if(!uT(p,g[w])){const x=g[w];let B=m[w];B=Qt(B);const K=f.yc(x);if(B instanceof rf)p.push(x);else{const L=Ru(B,K);L!=null&&(p.push(x),b.set(x,L))}}const T=new Hn(p);return new sT(b,T,f.fieldTransforms)}function HC(r,e,n,s=!1){return Ru(n,r.Cc(s?4:3,e))}function Ru(r,e){if(lT(r=Qt(r)))return qm("Unsupported field value:",e,r),oT(r,e);if(r instanceof jm)return(function(s,o){if(!aT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const g of s){let m=Ru(g,o.wc(f));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Qt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=gt.fromDate(s);return{timestampValue:Rh(o.serializer,u)}}if(s instanceof gt){const u=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Rh(o.serializer,u)}}if(s instanceof qr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sr)return{bytesValue:CE(o.serializer,s._byteString)};if(s instanceof jt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Am(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Hr)return(function(f,g){return{mapValue:{fields:{[rE]:{stringValue:iE},[Th]:{arrayValue:{values:f.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return Em(g.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Hh(s)}`)})(r,e)}function oT(r,e){const n={};return Zb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(r,((s,o)=>{const u=Ru(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function lT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof qr||r instanceof sr||r instanceof jt||r instanceof jm||r instanceof Hr)}function qm(r,e,n){if(!lT(n)||!Xb(n)){const s=Hh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Jg(r,e,n){if((e=Qt(e))instanceof nf)return e._internalPath;if(typeof e=="string")return Hm(r,e);throw Dh("Field path arguments must be of type string or ",r,!1,void 0,n)}const FC=new RegExp("[~\\*/\\[\\]]");function Hm(r,e,n){if(e.search(FC)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new nf(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Dh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let m="";return(u||f)&&(m+=" (found",u&&(m+=` in field ${s}`),f&&(m+=` in document ${o}`),m+=")"),new he(ee.INVALID_ARGUMENT,g+r+m)}function uT(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GC extends cT{data(){return super.data()}}function Fm(r,e){return typeof e=="string"?Hm(r,e):e instanceof nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gm{}class hT extends Gm{}function YC(r,e,...n){let s=[];e instanceof Gm&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((m=>m instanceof Ym)).length,g=u.filter((m=>m instanceof Km)).length;if(f>1||f>0&&g>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Km extends hT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Km(e,n,s)}_apply(e){const n=this._parse(e);return fT(e._query,n),new _a(e.firestore,e.converter,qg(e._query,n))}_parse(e){const n=Bm(e.firestore);return(function(u,f,g,m,p,b,T){let w;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){F0(T,b);const B=[];for(const K of T)B.push(H0(m,u,K));w={arrayValue:{values:B}}}else w=H0(m,u,T)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||F0(T,b),w=HC(g,f,T,b==="in"||b==="not-in");return Lt.create(p,b,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ym extends Gm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ym(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:vr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const m of g)fT(f,m),f=qg(f,m)})(e._query,n),new _a(e.firestore,e.converter,qg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qm extends hT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qm(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cu(u,f)})(e._query,this._field,this._direction);return new _a(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Po(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function QC(r,e="asc"){const n=e,s=Fm("orderBy",r);return Qm._create(s,n)}function H0(r,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fE(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!ve.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return r0(r,new ve(s))}if(n instanceof jt)return r0(r,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(n)}.`)}function F0(r,e){if(!Array.isArray(r)||r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fT(r,e){const n=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XC{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return As(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Th].arrayValue?.values?.map((s=>Dt(s.doubleValue)));return new Hr(n)}convertGeoPoint(e){return new qr(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const n=bs(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);Je(kE(s),9688,{name:e});const o=new lu(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||Ci(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(r,e,n){let s;return s=r?r.toFirestore(e):e,s}class Ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends cT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Fm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ca._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",ca._jsonSchema={type:Ut("string",ca._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class fh extends ca{data(e={}){return super.data(e)}}class vo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ql(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new fh(this._firestore,this._userDataWriter,s.key,s,new Ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const m=new fh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ql(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const m=new fh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Ql(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),b=f.indexOf(g.doc.key)),{type:ZC(g.type),doc:m,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:Ut("string",vo._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class dT extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function aa(r,e,n,...s){r=ys(r,jt);const o=ys(r.firestore,Do),u=Bm(o);let f;return f=typeof(e=Qt(e))=="string"||e instanceof nf?qC(u,"updateDoc",r._key,e,n,s):BC(u,"updateDoc",r._key,e),Xm(o,[f.toMutation(r._key,yr.exists(!0))])}function G0(r){return Xm(ys(r.firestore,Do),[new Tm(r._key,yr.none())])}function WC(r,e){const n=ys(r.firestore,Do),s=Ur(r),o=$C(r.converter,e);return Xm(n,[zC(Bm(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,yr.exists(!1))]).then((()=>s))}function JC(r,...e){r=Qt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||q0(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(q0(e[s])){const m=e[s];e[s]=m.next?.bind(m),e[s+1]=m.error?.bind(m),e[s+2]=m.complete?.bind(m)}let u,f,g;if(r instanceof jt)f=ys(r.firestore,Do),g=bm(r._key.path),u={next:m=>{e[s]&&e[s](eI(f,r,m))},error:e[s+1],complete:e[s+2]};else{const m=ys(r,_a);f=ys(m.firestore,Do),g=m._query;const p=new dT(f);u={next:b=>{e[s]&&e[s](new vo(f,p,m,b))},error:e[s+1],complete:e[s+2]},KC(r._query)}return(function(p,b,T,w){const x=new DC(w),B=new hC(b,x,T);return p.asyncQueue.enqueueAndForget((async()=>oC(await k0(p),B))),()=>{x.Nu(),p.asyncQueue.enqueueAndForget((async()=>lC(await k0(p),B)))}})(iT(f),g,o,u)}function Xm(r,e){return(function(s,o){const u=new ua;return s.asyncQueue.enqueueAndForget((async()=>EC(await MC(s),o,u))),u.promise})(iT(r),e)}function eI(r,e,n){const s=n.docs.get(e._key),o=new dT(r);return new ca(r,o,e._key,s,new Ql(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Mo=o})(Oo),So(new fa("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new Do(new j1(s.getProvider("auth-internal")),new q1(f,s.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(p.options.projectId,b)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),ms(F_,G_,e),ms(F_,G_,"esm2020")})();var tI="firebase",nI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(tI,nI,"app");function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rI=gT,mT=new _u("auth","Firebase",gT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new cm("@firebase/auth");function iI(r,...e){Nh.logLevel<=Ue.WARN&&Nh.warn(`Auth (${Oo}): ${r}`,...e)}function dh(r,...e){Nh.logLevel<=Ue.ERROR&&Nh.error(`Auth (${Oo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(r,...e){throw $m(r,...e)}function Fr(r,...e){return $m(r,...e)}function pT(r,e,n){const s={...rI(),[e]:n};return new _u("auth","Firebase",s).create(e,{appName:r.name})}function Ri(r){return pT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $m(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return mT.create(r,...e)}function Ee(r,e,...n){if(!r)throw $m(e,...n)}function wi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw dh(e),new Error(e)}function Di(r,e){r||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){return typeof self<"u"&&self.location?.href||""}function sI(){return K0()==="http:"||K0()==="https:"}function K0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sI()||pA()||"connection"in navigator)?navigator.onLine:!0}function oI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=dA()||yA()}get(){return aI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(r,e){Di(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cI=new xu(3e4,6e4);function xs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Cs(r,e,n,s,o={}){return vT(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const g=bu({key:r.config.apiKey,...f}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:m,...u};return mA()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&No(r.emulatorConfig.host)&&(p.credentials="include"),yT.fetch()(await _T(r,r.config.apiHost,n,g),p)})}async function vT(r,e,n){r._canInitEmulator=!1;const s={...lI,...e};try{const o=new fI(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw ih(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[m,p]=g.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(r,"credential-already-in-use",f);if(m==="EMAIL_EXISTS")throw ih(r,"email-already-in-use",f);if(m==="USER_DISABLED")throw ih(r,"user-disabled",f);const b=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw pT(r,b,p);_r(r,b)}}catch(o){if(o instanceof Ni)throw o;_r(r,"network-request-failed",{message:String(o)})}}async function Cu(r,e,n,s,o={}){const u=await Cs(r,e,n,s,o);return"mfaPendingCredential"in u&&_r(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function _T(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Zm(r.config,o):`${r.config.apiScheme}://${o}`;return uI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function hI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Fr(this.auth,"network-request-failed")),cI.get())})}}function ih(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Fr(r,e,s);return o.customData._tokenResponse=n,o}function Y0(r){return r!==void 0&&r.enterprise!==void 0}class dI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gI(r,e){return Cs(r,"GET","/v2/recaptchaConfig",xs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,e){return Cs(r,"POST","/v1/accounts:delete",e)}async function Oh(r,e){return Cs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pI(r,e=!1){const n=Qt(r),s=await n.getIdToken(e),o=Wm(s);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:tu(Ag(o.auth_time)),issuedAtTime:tu(Ag(o.iat)),expirationTime:tu(Ag(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Ag(r){return Number(r)*1e3}function Wm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Cb(n);return o?JSON.parse(o):(dh("Failed to decode base64 JWT payload"),null)}catch(o){return dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Q0(r){const e=Wm(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ni&&yI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function yI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tu(this.lastLoginAt),this.creationTime=tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(r){const e=r.auth,n=await r.getIdToken(),s=await du(r,Oh(e,{idToken:n}));Ee(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?bT(o.providerUserInfo):[],f=bI(r.providerData,u),g=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!f?.length,p=g?m:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new tm(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,b)}async function _I(r){const e=Qt(r);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function bT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e){const n=await vT(r,{},async()=>{const s=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await _T(r,o,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:g,body:s};return r.emulatorConfig&&No(r.emulatorConfig.host)&&(m.credentials="include"),yT.fetch()(f,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TI(r,e){return Cs(r,"POST","/v2/accounts:revokeToken",xs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=Q0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await EI(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new _o;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new vI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new tm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pI(this,e)}reload(){return _I(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await du(this,mI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:T,emailVerified:w,isAnonymous:x,providerData:B,stsTokenManager:K}=n;Ee(T&&K,e,"internal-error");const L=_o.fromJSON(this.name,K);Ee(typeof T=="string",e,"internal-error"),as(s,e.name),as(o,e.name),Ee(typeof w=="boolean",e,"internal-error"),Ee(typeof x=="boolean",e,"internal-error"),as(u,e.name),as(f,e.name),as(g,e.name),as(m,e.name),as(p,e.name),as(b,e.name);const Y=new pr({uid:T,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:x,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:L,createdAt:p,lastLoginAt:b});return B&&Array.isArray(B)&&(Y.providerData=B.map($=>({...$}))),m&&(Y._redirectEventId=m),Y}static async _fromIdTokenResponse(e,n,s=!1){const o=new _o;o.updateFromServerResponse(n);const u=new pr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Mh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?bT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,g=new _o;g.updateFromIdToken(s);const m=new pr({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new tm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;function Ai(r){Di(r instanceof Function,"Expected a class definition");let e=X0.get(r);return e?(Di(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,X0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ET.type="NONE";const $0=ET;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r,e,n){return`firebase:${r}:${e}:${n}`}class bo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=gh(this.userKey,o.apiKey,u),this.fullPersistenceKey=gh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oh(this.auth,{idToken:e}).catch(()=>{});return n?pr._fromGetAccountInfoResponse(this.auth,n,e):null}return pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new bo(Ai($0),e,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Ai($0);const f=gh(s,e.config.apiKey,e.name);let g=null;for(const p of n)try{const b=await p._get(f);if(b){let T;if(typeof b=="string"){const w=await Oh(e,{idToken:b}).catch(()=>{});if(!w)break;T=await pr._fromGetAccountInfoResponse(e,w,b)}else T=pr._fromJSON(e,b);p!==u&&(g=T),u=p;break}}catch{}const m=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new bo(u,e,s):(u=m[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new bo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xT(e))return"Blackberry";if(CT(e))return"Webos";if(ST(e))return"Safari";if((e.includes("chrome/")||wT(e))&&!e.includes("edge/"))return"Chrome";if(RT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function TT(r=bn()){return/firefox\//i.test(r)}function ST(r=bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wT(r=bn()){return/crios\//i.test(r)}function AT(r=bn()){return/iemobile/i.test(r)}function RT(r=bn()){return/android/i.test(r)}function xT(r=bn()){return/blackberry/i.test(r)}function CT(r=bn()){return/webos/i.test(r)}function Jm(r=bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function SI(r=bn()){return Jm(r)&&!!window.navigator?.standalone}function wI(){return vA()&&document.documentMode===10}function IT(r=bn()){return Jm(r)||RT(r)||CT(r)||xT(r)||/windows phone/i.test(r)||AT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(r,e=[]){let n;switch(r){case"Browser":n=Z0(bn());break;case"Worker":n=`${Z0(bn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,g)=>{try{const m=e(u);f(m)}catch(m){g(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(r,e={}){return Cs(r,"GET","/v2/passwordPolicy",xs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=6;class CI{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??xI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W0(this),this.idTokenSubscription=new W0(this),this.beforeStateQueue=new AI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oh(this,{idToken:e}),s=await pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ir(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ri(this));const n=e?Qt(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RI(this),n=new CI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await TI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{f=!0,m()}}else{const m=e.addObserver(n);return()=>{f=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&iI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ba(r){return Qt(r)}class W0{constructor(e){this.auth=e,this.observer=null,this.addObserver=RA(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DI(r){sf=r}function NT(r){return sf.loadJS(r)}function NI(){return sf.recaptchaEnterpriseScript}function OI(){return sf.gapiScript}function MI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class kI{constructor(){this.enterprise=new VI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PI="recaptcha-enterprise",OT="NO_RECAPTCHA";class LI{constructor(e){this.type=PI,this.auth=ba(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{gI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new dI(m);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,f(p.siteKey)}}).catch(m=>{g(m)})})}function o(u,f,g){const m=window.grecaptcha;Y0(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:e}).then(p=>{f(p)}).catch(()=>{f(OT)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kI().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(g=>{if(!n&&Y0(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let m=NI();m.length!==0&&(m+=g),NT(m).then(()=>{o(g,u,f)}).catch(p=>{f(p)})}}).catch(g=>{f(g)})})}}async function J0(r,e,n,s=!1,o=!1){const u=new LI(r);let f;if(o)f=OT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const m=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const m=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function nm(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await J0(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await J0(r,e,n,n==="getOobCode");return s(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r,e){const n=fm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ha(u,e??{}))return o;_r(o,"already-initialized")}return n.initialize({options:e})}function jI(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ai);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function zI(r,e,n){const s=ba(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=MT(e),{host:f,port:g}=BI(e),m=g===null?"":`:${g}`,p={url:`${u}//${f}${m}/`},b=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(ha(p,s.config.emulator)&&ha(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,No(f)?(Ob(`${u}//${f}${m}`),Mb("Auth",!0)):qI()}function MT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function BI(r){const e=MT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:eb(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:eb(f)}}}function eb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function qI(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function HI(r,e){return Cs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(r,e){return Cu(r,"POST","/v1/accounts:signInWithPassword",xs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(r,e){return Cu(r,"POST","/v1/accounts:signInWithEmailLink",xs(r,e))}async function KI(r,e){return Cu(r,"POST","/v1/accounts:signInWithEmailLink",xs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends ep{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new gu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,n,"signInWithPassword",FI);case"emailLink":return GI(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,s,"signUpPassword",HI);case"emailLink":return KI(e,{idToken:n,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e){return Cu(r,"POST","/v1/accounts:signInWithIdp",xs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="http://localhost";class ma extends ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ma(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Eo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Eo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Eo(e,n)}buildRequest(){const e={requestUri:YI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XI(r){const e=Hl(Fl(r)).link,n=e?Hl(Fl(e)).deep_link_id:null,s=Hl(Fl(r)).deep_link_id;return(s?Hl(Fl(s)).link:null)||s||n||e||r}class tp{constructor(e){const n=Hl(Fl(e)),s=n.apiKey??null,o=n.oobCode??null,u=QI(n.mode??null);Ee(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=XI(e);try{return new tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=tp.parseLink(n);return Ee(s,"argument-error"),gu._fromEmailAndCode(e,s.code,s.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends kT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Iu{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ma._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return us.credential(n,s)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Iu{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Iu{constructor(){super("twitter.com")}static credential(e,n){return ma._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return hs.credential(n,s)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(r,e){return Cu(r,"POST","/v1/accounts:signUp",xs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await pr._fromIdTokenResponse(e,s,o),f=tb(s);return new pa({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=tb(s);return new pa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function tb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Ni{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new kh(e,n,s,o)}}function VT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(r,u,e,s):u})}async function ZI(r,e,n=!1){const s=await du(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return pa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(r,e,n=!1){const{auth:s}=r;if(ir(s.app))return Promise.reject(Ri(s));const o="reauthenticate";try{const u=await du(r,VT(s,o,e,r),n);Ee(u.idToken,s,"internal-error");const f=Wm(u.idToken);Ee(f,s,"internal-error");const{sub:g}=f;return Ee(r.uid===g,s,"user-mismatch"),pa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&_r(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(r,e,n=!1){if(ir(r.app))return Promise.reject(Ri(r));const s="signIn",o=await VT(r,s,e),u=await pa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function JI(r,e){return PT(ba(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(r){const e=ba(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eD(r,e,n){if(ir(r.app))return Promise.reject(Ri(r));const s=ba(r),f=await nm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$I).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&LT(r),m}),g=await pa._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(g.user),g}function tD(r,e,n){return ir(r.app)?Promise.reject(Ri(r)):JI(Qt(r),Uo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&LT(r),s})}function nD(r,e,n,s){return Qt(r).onIdTokenChanged(e,n,s)}function rD(r,e,n){return Qt(r).beforeAuthStateChanged(e,n)}function iD(r,e,n,s){return Qt(r).onAuthStateChanged(e,n,s)}function sD(r){return Qt(r).signOut()}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=1e3,oD=10;class jT extends UT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,m)=>{this.notifyListeners(f,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);wI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oD):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},aD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jT.type="LOCAL";const lD=jT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends UT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zT.type="SESSION";const BT=zT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new af(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(f).map(async p=>p(n.origin,u)),m=await uD(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,m)=>{const p=np("",20);o.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const w=T;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(w.data.response);break;default:clearTimeout(b),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function hD(r){Gr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function fD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dD(){return navigator?.serviceWorker?.controller||null}function gD(){return qT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebaseLocalStorageDb",mD=1,Ph="firebaseLocalStorage",FT="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function of(r,e){return r.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function pD(){const r=indexedDB.deleteDatabase(HT);return new Du(r).toPromise()}function rm(){const r=indexedDB.open(HT,mD);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ph,{keyPath:FT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ph)?e(s):(s.close(),await pD(),e(await rm()))})})}async function nb(r,e,n){const s=of(r,!0).put({[FT]:e,value:n});return new Du(s).toPromise()}async function yD(r,e){const n=of(r,!1).get(e),s=await new Du(n).toPromise();return s===void 0?null:s.value}function rb(r,e){const n=of(r,!0).delete(e);return new Du(n).toPromise()}const vD=800,_D=3;class GT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_D)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(gD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fD(),!this.activeServiceWorker)return;this.sender=new cD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rm();return await nb(e,Vh,"1"),await rb(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>nb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yD(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=of(o,!1).getAll();return new Du(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GT.type="LOCAL";const bD=GT;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(r,e){return e?Ai(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TD(r){return PT(r.auth,new rp(r),r.bypassAuthState)}function SD(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),WI(n,new rp(r),r.bypassAuthState)}async function wD(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),ZI(n,new rp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return wD;case"reauthViaPopup":case"reauthViaRedirect":return SD;default:_r(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=new xu(2e3,1e4);class po extends KT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AD.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="pendingRedirect",mh=new Map;class xD extends KT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const s=await CD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CD(r,e){const n=ND(e),s=DD(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function ID(r,e){mh.set(r._key(),e)}function DD(r){return Ai(r._redirectPersistence)}function ND(r){return gh(RD,r.config.apiKey,r.name)}async function OD(r,e,n=!1){if(ir(r.app))return Promise.reject(Ri(r));const s=ba(r),o=ED(s,e),f=await new xD(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=600*1e3;class kD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!YT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ib(e))}saveEventToCache(e){this.cachedEventUids.add(ib(e)),this.lastProcessedEventTime=Date.now()}}function ib(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function YT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function VD(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(r,e={}){return Cs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UD=/^https?/;async function jD(r){if(r.config.emulator)return;const{authorizedDomains:e}=await PD(r);for(const n of e)try{if(zD(n))return}catch{}_r(r,"unauthorized-domain")}function zD(r){const e=em(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!UD.test(n))return!1;if(LD.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new xu(3e4,6e4);function sb(){const r=Gr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function qD(r){return new Promise((e,n)=>{function s(){sb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sb(),n(Fr(r,"network-request-failed"))},timeout:BD.get()})}if(Gr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Gr().gapi?.load)s();else{const o=MI("iframefcb");return Gr()[o]=()=>{gapi.load?s():n(Fr(r,"network-request-failed"))},NT(`${OI()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw ph=null,e})}let ph=null;function HD(r){return ph=ph||qD(r),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new xu(5e3,15e3),GD="__/auth/iframe",KD="emulator/auth/iframe",YD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XD(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Zm(e,KD):`https://${r.config.authDomain}/${GD}`,s={apiKey:e.apiKey,appName:r.name,v:Oo},o=QD.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${bu(s).slice(1)}`}async function $D(r){const e=await HD(r),n=Gr().gapi;return Ee(n,r,"internal-error"),e.open({where:document.body,url:XD(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YD,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Fr(r,"network-request-failed"),g=Gr().setTimeout(()=>{u(f)},FD.get());function m(){Gr().clearTimeout(g),o(s)}s.ping(m).then(m,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WD=500,JD=600,e2="_blank",t2="http://localhost";class ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n2(r,e,n,s=WD,o=JD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const m={...ZD,width:s.toString(),height:o.toString(),top:u,left:f},p=bn().toLowerCase();n&&(g=wT(p)?e2:n),TT(p)&&(e=e||t2,m.scrollbars="yes");const b=Object.entries(m).reduce((w,[x,B])=>`${w}${x}=${B},`,"");if(SI(p)&&g!=="_self")return r2(e||"",g),new ab(null);const T=window.open(e||"",g,b);Ee(T,r,"popup-blocked");try{T.focus()}catch{}return new ab(T)}function r2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="__/auth/handler",s2="emulator/auth/handler",a2=encodeURIComponent("fac");async function ob(r,e,n,s,o,u){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Oo,eventId:o};if(e instanceof kT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",AA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,T]of Object.entries({}))f[b]=T}if(e instanceof Iu){const b=e.getScopes().filter(T=>T!=="");b.length>0&&(f.scopes=b.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const m=await r._getAppCheckToken(),p=m?`#${a2}=${encodeURIComponent(m)}`:"";return`${o2(r)}?${bu(g).slice(1)}${p}`}function o2({config:r}){return r.emulator?Zm(r,s2):`https://${r.authDomain}/${i2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="webStorageSupport";class l2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=OD,this._overrideRedirectResult=ID}async _openPopup(e,n,s,o){Di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await ob(e,n,s,em(),o);return n2(e,u,np())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await ob(e,n,s,em(),o);return hD(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Di(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await $D(e),s=new kD(e);return n.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rg,{type:Rg},o=>{const u=o?.[0]?.[Rg];u!==void 0&&n(!!u),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IT()||ST()||Jm()}}const u2=l2;var lb="@firebase/auth",ub="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f2(r){So(new fa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Ee(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(r)},p=new II(s,o,u,m);return jI(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),So(new fa("auth-internal",e=>{const n=ba(e.getProvider("auth").getImmediate());return(s=>new c2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(lb,ub,h2(r)),ms(lb,ub,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=300,g2=Nb("authIdTokenMaxAge")||d2;let cb=null;const m2=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>g2)return;const o=n?.token;cb!==o&&(cb=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function p2(r=Lb()){const e=fm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=UI(r,{popupRedirectResolver:u2,persistence:[bD,lD,BT]}),s=Nb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=m2(u.toString());rD(n,f,()=>f(n.currentUser)),nD(n,g=>f(g))}}const o=Ib("auth");return o&&zI(n,`http://${o}`),n}function y2(){return document.getElementsByTagName("head")?.[0]??document}DI({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Fr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",y2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f2("Browser");const v2={apiKey:"AIzaSyDJk-S2x1jGD7U_Vi6ri77g6SwlF5qguM4",authDomain:"todo-app-v2-a1c88.firebaseapp.com",projectId:"todo-app-v2-a1c88",storageBucket:"todo-app-v2-a1c88.firebasestorage.app",messagingSenderId:"393713086851",appId:"1:393713086851:web:084daf7c32249483bd46b6"},QT=Pb(v2),Lh=p2(QT),mr=VC(QT);function XT(){const[r,e]=j.useState(null),[n,s]=j.useState(!0);return j.useEffect(()=>iD(Lh,u=>{e(u),s(!1)}),[]),{user:r,loading:n,isAuthenticated:!!r}}const _2=()=>{const[r,e]=j.useState([]),[n,s]=j.useState(!0),{user:o}=XT();j.useEffect(()=>{if(!o){e([]),s(!1);return}const L=U0(mr,"users",o.uid,"tasks"),Y=YC(L,QC("order","asc"));return JC(Y,X=>{const ne=X.docs.map(ae=>({id:ae.id,...ae.data(),createdAt:ae.data().createdAt?.toDate(),dueDate:ae.data().dueDate?.toDate()}));e(ne),s(!1)})},[o]);const u=j.useCallback(async(L,Y,$,X,ne)=>{if(!o)return;const ae=U0(mr,"users",o.uid,"tasks"),se={text:L,completed:!1,createdAt:new Date,status:ne||"pending",category:Y||null,dueDate:$||null,priority:X||null,order:Date.now()};await WC(ae,se)},[o]),f=j.useCallback(async L=>{if(!o)return;const Y=Ur(mr,"users",o.uid,"tasks",L),$=r.find(X=>X.id===L);$&&await aa(Y,{completed:!$.completed})},[o,r]),g=j.useCallback(async L=>{if(!o)return;const Y=Ur(mr,"users",o.uid,"tasks",L);await G0(Y)},[o]),m=j.useCallback(async(L,Y)=>{if(!o)return;const $=Ur(mr,"users",o.uid,"tasks",L);await aa($,{text:Y})},[o]),p=j.useCallback(async(L,Y)=>{if(!o)return;const $=Ur(mr,"users",o.uid,"tasks",L),X={};Y.status&&(X.status=Y.status),Y.category!==void 0&&(X.category=Y.category||null),Y.priority!==void 0&&(X.priority=Y.priority||null),Y.dueDate!==void 0&&(X.dueDate=Y.dueDate||null),await aa($,X)},[o]),b=j.useCallback(async(L,Y)=>{if(!o)return;const $=r.find(se=>se.id===L),X=r.find(se=>se.id===Y);if(!$||!X)return;const ne=X.order,ae=Ur(mr,"users",o.uid,"tasks",L);await aa(ae,{order:ne})},[o,r]),T=j.useCallback(async L=>{if(!o)return;const Y=L.map($=>{const X=Ur(mr,"users",o.uid,"tasks",$);return aa(X,{completed:!0})});await Promise.all(Y)},[o]),w=j.useCallback(async L=>{if(!o)return;const Y=L.map($=>{const X=Ur(mr,"users",o.uid,"tasks",$);return aa(X,{completed:!1})});await Promise.all(Y)},[o]),x=j.useCallback(async L=>{if(!o)return;const Y=L.map($=>{const X=Ur(mr,"users",o.uid,"tasks",$);return G0(X)});await Promise.all(Y)},[o]),B=j.useCallback(async(L,Y)=>{if(!o)return;const $=L.map(X=>{const ne=Ur(mr,"users",o.uid,"tasks",X);return aa(ne,{category:Y||null})});await Promise.all($)},[o]),K=j.useMemo(()=>({all:r.length,active:r.filter(L=>!L.completed).length,completed:r.filter(L=>L.completed).length}),[r]);return{tasks:r,loading:n,addTask:u,toggleTask:f,deleteTask:g,editTask:m,updateTaskDetails:p,reorderTasks:b,bulkComplete:T,bulkUncomplete:w,bulkDelete:x,bulkCategoryChange:B,taskStats:K}};function b2(r,e){const[n,s]=j.useState(()=>{try{const u=window.localStorage.getItem(r);return u?JSON.parse(u):e}catch(u){return console.error(`Error reading localStorage key "${r}":`,u),e}});return[n,u=>{try{const f=u instanceof Function?u(n):u;s(f),window.localStorage.setItem(r,JSON.stringify(f))}catch(f){console.error(`Error setting localStorage key "${r}":`,f)}}]}const E2=[{id:"uncategorized",label:"Uncategorized",color:"#6b7280"},{id:"work",label:"Work",color:"#3b82f6"},{id:"personal",label:"Personal",color:"#10b981"},{id:"shopping",label:"Shopping",color:"#6366f1"},{id:"health",label:"Health",color:"#ef4444"},{id:"learning",label:"Learning",color:"#eab308"}],lf=[{id:"low",label:"Low Priority",color:"bg-green-500"},{id:"medium",label:"Medium Priority",color:"bg-yellow-500"},{id:"high",label:"High Priority",color:"bg-red-500"}],T2=()=>{const[r,e]=b2("todo-categories",E2),n=Ie.useMemo(()=>r.some(b=>b.id==="uncategorized")?r:[{id:"uncategorized",label:"Uncategorized",color:"#6b7280"},...r],[r]),s=j.useCallback((p,b="#6b7280")=>{const T={id:Date.now().toString(),label:p,color:b};e(w=>[...w,T])},[e]),o=j.useCallback((p,b)=>{if(p==="uncategorized")throw new Error("Cannot delete the Uncategorized category");if(b.some(w=>w.category===p))throw new Error("Cannot delete category that is in use by tasks");e(w=>w.filter(x=>x.id!==p))},[e]),u=j.useCallback((p,b)=>{if(p==="uncategorized")throw new Error("Cannot rename the Uncategorized category");e(T=>T.map(w=>w.id===p?{...w,label:b}:w))},[e]),f=j.useCallback((p,b)=>{e(T=>T.map(w=>w.id===p?{...w,color:b}:w))},[e]),g=j.useCallback(p=>r.find(b=>b.id===p),[r]),m=j.useCallback((p,b)=>r.some(T=>T.label.toLowerCase()===p.toLowerCase()&&T.id!==b),[r]);return{categories:n,addCategory:s,deleteCategory:o,renameCategory:u,updateCategoryColor:f,getCategoryById:g,isCategoryNameTaken:m}},lt=({variant:r="primary",size:e="md",children:n,className:s="",...o})=>{const u="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",f={primary:"bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-500 dark:bg-blue-600 dark:hover:bg-blue-700",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 dark:bg-red-600 dark:hover:bg-red-700",success:"bg-green-500 text-white hover:bg-green-600 focus:ring-green-500 dark:bg-green-600 dark:hover:bg-green-700",warning:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-500 dark:bg-orange-600 dark:hover:bg-orange-700",info:"bg-teal-500 text-white hover:bg-teal-600 focus:ring-teal-500 dark:bg-teal-600 dark:hover:bg-teal-700"},g={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},m=`${u} ${f[r]} ${g[e]} ${s}`;return R.jsx("button",{className:m,...o,children:n})},S2=({isDarkMode:r,onToggleDarkMode:e,onLogout:n,userEmail:s})=>R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"fixed top-4 right-4 z-10 flex items-center gap-2",children:[s&&R.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 hidden sm:block",children:s}),n&&R.jsx(lt,{onClick:n,variant:"secondary",size:"sm",className:"text-xs",children:"Logout"}),R.jsx(lt,{onClick:e,variant:"secondary",size:"sm","aria-label":"Toggle dark mode",children:r?"☀️":"🌙"})]}),R.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 text-center",children:"To-Do App"})]}),w2=Ie.memo(S2),A2=({currentFilter:r,onFilterChange:e,taskCounts:n})=>{const s=[{key:"all",label:"All",count:n.all},{key:"active",label:"Active",count:n.active},{key:"completed",label:"Completed",count:n.completed}];return R.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.map(({key:o,label:u,count:f})=>R.jsxs("button",{onClick:()=>e(o),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${r===o?o==="completed"?"bg-green-500 text-white dark:bg-green-600":o==="all"?"bg-indigo-500 text-white dark:bg-indigo-600":o==="active"?"bg-orange-500 text-white dark:bg-orange-600":"bg-blue-500 text-white dark:bg-blue-600":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[u," (",f,")"]},o))})},R2=({searchQuery:r,onSearchChange:e,placeholder:n="Search tasks..."})=>R.jsx("input",{type:"text",value:r,onChange:s=>e(s.target.value),placeholder:n,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400"}),x2=({filter:r,onFilterChange:e,searchQuery:n,onSearchChange:s,categoryFilter:o,onCategoryFilterChange:u,priorityFilter:f,onPriorityFilterChange:g,taskCounts:m,showBulkActions:p,onToggleBulkActions:b,onClearFilters:T,categories:w})=>R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[R.jsx(A2,{currentFilter:r,onFilterChange:e,taskCounts:m}),R.jsxs("div",{className:"flex flex-wrap gap-2 sm:self-start",children:[R.jsx("button",{onClick:b,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${p?"bg-orange-500 text-white dark:bg-orange-600":"bg-orange-200 text-orange-700 hover:bg-orange-300 dark:bg-orange-700 dark:text-orange-300 dark:hover:bg-orange-600"}`,children:p?"Exit Bulk":"Bulk Select"}),R.jsx("button",{onClick:T,className:"px-3 py-2 bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap",children:"Clear Filters"})]})]}),R.jsx("div",{className:"mb-4",children:R.jsxs("div",{className:"space-y-2 sm:space-y-0 sm:flex sm:items-center sm:gap-2",children:[R.jsx("div",{className:"w-full sm:flex-1",children:R.jsx(R2,{searchQuery:n,onSearchChange:s})}),R.jsx("div",{className:"w-full sm:w-auto sm:min-w-[160px]",children:R.jsxs("select",{value:o,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer",children:[R.jsx("option",{value:"",children:"All Categories"}),w.map(x=>R.jsx("option",{value:x.id,children:x.label},x.id))]})}),R.jsx("div",{className:"w-full sm:w-auto sm:min-w-[140px]",children:R.jsxs("select",{value:f,onChange:x=>g(x.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer",children:[R.jsx("option",{value:"",children:"All Priorities"}),lf.map(x=>R.jsx("option",{value:x.id,children:x.label},x.id))]})})]})})]}),C2=Ie.memo(x2);var Xl=Ab();function I2(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return j.useMemo(()=>s=>{e.forEach(o=>o(s))},e)}const uf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jo(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function ip(r){return"nodeType"in r}function kn(r){var e,n;return r?jo(r)?r:ip(r)&&(e=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function sp(r){const{Document:e}=kn(r);return r instanceof e}function Nu(r){return jo(r)?!1:r instanceof kn(r).HTMLElement}function $T(r){return r instanceof kn(r).SVGElement}function zo(r){return r?jo(r)?r.document:ip(r)?sp(r)?r:Nu(r)||$T(r)?r.ownerDocument:document:document:document}const Yr=uf?j.useLayoutEffect:j.useEffect;function ap(r){const e=j.useRef(r);return Yr(()=>{e.current=r}),j.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function D2(){const r=j.useRef(null),e=j.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=j.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,n]}function mu(r,e){e===void 0&&(e=[r]);const n=j.useRef(r);return Yr(()=>{n.current!==r&&(n.current=r)},e),n}function Ou(r,e){const n=j.useRef();return j.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...e])}function Uh(r){const e=ap(r),n=j.useRef(null),s=j.useCallback(o=>{o!==n.current&&e?.(o,n.current),n.current=o},[]);return[n,s]}function im(r){const e=j.useRef();return j.useEffect(()=>{e.current=r},[r]),e.current}let xg={};function Mu(r,e){return j.useMemo(()=>{if(e)return e;const n=xg[r]==null?0:xg[r]+1;return xg[r]=n,r+"-"+n},[r,e])}function ZT(r){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,f)=>{const g=Object.entries(f);for(const[m,p]of g){const b=u[m];b!=null&&(u[m]=b+r*p)}return u},{...e})}}const To=ZT(1),pu=ZT(-1);function N2(r){return"clientX"in r&&"clientY"in r}function op(r){if(!r)return!1;const{KeyboardEvent:e}=kn(r.target);return e&&r instanceof e}function O2(r){if(!r)return!1;const{TouchEvent:e}=kn(r.target);return e&&r instanceof e}function sm(r){if(O2(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:n}=r.touches[0];return{x:e,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:n}=r.changedTouches[0];return{x:e,y:n}}}return N2(r)?{x:r.clientX,y:r.clientY}:null}const yu=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:n}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:n}=r;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[yu.Translate.toString(r),yu.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:n,easing:s}=r;return e+" "+n+"ms "+s}}}),hb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function M2(r){return r.matches(hb)?r:r.querySelector(hb)}const k2={display:"none"};function V2(r){let{id:e,value:n}=r;return Ie.createElement("div",{id:e,style:k2},n)}function P2(r){let{id:e,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ie.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function L2(){const[r,e]=j.useState("");return{announce:j.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const WT=j.createContext(null);function U2(r){const e=j.useContext(WT);j.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function j2(){const[r]=j.useState(()=>new Set),e=j.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[j.useCallback(s=>{let{type:o,event:u}=s;r.forEach(f=>{var g;return(g=f[o])==null?void 0:g.call(f,u)})},[r]),e]}const z2={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},B2={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function q2(r){let{announcements:e=B2,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=z2}=r;const{announce:u,announcement:f}=L2(),g=Mu("DndLiveRegion"),[m,p]=j.useState(!1);if(j.useEffect(()=>{p(!0)},[]),U2(j.useMemo(()=>({onDragStart(T){let{active:w}=T;u(e.onDragStart({active:w}))},onDragMove(T){let{active:w,over:x}=T;e.onDragMove&&u(e.onDragMove({active:w,over:x}))},onDragOver(T){let{active:w,over:x}=T;u(e.onDragOver({active:w,over:x}))},onDragEnd(T){let{active:w,over:x}=T;u(e.onDragEnd({active:w,over:x}))},onDragCancel(T){let{active:w,over:x}=T;u(e.onDragCancel({active:w,over:x}))}}),[u,e])),!m)return null;const b=Ie.createElement(Ie.Fragment,null,Ie.createElement(V2,{id:s,value:o.draggable}),Ie.createElement(P2,{id:g,announcement:f}));return n?Xl.createPortal(b,n):b}var Kt;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Kt||(Kt={}));function jh(){}function fb(r,e){return j.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function H2(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return j.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const br=Object.freeze({x:0,y:0});function JT(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function eS(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return n-s}function F2(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return s-n}function db(r){let{left:e,top:n,height:s,width:o}=r;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+s},{x:e+o,y:n+s}]}function tS(r,e){if(!r||r.length===0)return null;const[n]=r;return n[e]}function gb(r,e,n){return e===void 0&&(e=r.left),n===void 0&&(n=r.top),{x:e+r.width*.5,y:n+r.height*.5}}const G2=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=gb(e,e.left,e.top),u=[];for(const f of s){const{id:g}=f,m=n.get(g);if(m){const p=JT(gb(m),o);u.push({id:g,data:{droppableContainer:f,value:p}})}}return u.sort(eS)},K2=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=db(e),u=[];for(const f of s){const{id:g}=f,m=n.get(g);if(m){const p=db(m),b=o.reduce((w,x,B)=>w+JT(p[B],x),0),T=Number((b/4).toFixed(4));u.push({id:g,data:{droppableContainer:f,value:T}})}}return u.sort(eS)};function Y2(r,e){const n=Math.max(e.top,r.top),s=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),u=Math.min(e.top+e.height,r.top+r.height),f=o-s,g=u-n;if(s<o&&n<u){const m=e.width*e.height,p=r.width*r.height,b=f*g,T=b/(m+p-b);return Number(T.toFixed(4))}return 0}const Q2=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:f}=u,g=n.get(f);if(g){const m=Y2(g,e);m>0&&o.push({id:f,data:{droppableContainer:u,value:m}})}}return o.sort(F2)};function X2(r,e,n){return{...r,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function nS(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:br}function $2(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((f,g)=>({...f,top:f.top+r*g.y,bottom:f.bottom+r*g.y,left:f.left+r*g.x,right:f.right+r*g.x}),{...n})}}const Z2=$2(1);function W2(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function J2(r,e,n){const s=W2(e);if(!s)return r;const{scaleX:o,scaleY:u,x:f,y:g}=s,m=r.left-f-(1-o)*parseFloat(n),p=r.top-g-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),b=o?r.width/o:r.width,T=u?r.height/u:r.height;return{width:b,height:T,top:p,right:m+b,bottom:p+T,left:m}}const eN={ignoreTransform:!1};function Bo(r,e){e===void 0&&(e=eN);let n=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:b}=kn(r).getComputedStyle(r);p&&(n=J2(n,p,b))}const{top:s,left:o,width:u,height:f,bottom:g,right:m}=n;return{top:s,left:o,width:u,height:f,bottom:g,right:m}}function mb(r){return Bo(r,{ignoreTransform:!0})}function tN(r){const e=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function nN(r,e){return e===void 0&&(e=kn(r).getComputedStyle(r)),e.position==="fixed"}function rN(r,e){e===void 0&&(e=kn(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?n.test(u):!1})}function cf(r,e){const n=[];function s(o){if(e!=null&&n.length>=e||!o)return n;if(sp(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Nu(o)||$T(o)||n.includes(o))return n;const u=kn(r).getComputedStyle(o);return o!==r&&rN(o,u)&&n.push(o),nN(o,u)?n:s(o.parentNode)}return r?s(r):n}function rS(r){const[e]=cf(r,1);return e??null}function Cg(r){return!uf||!r?null:jo(r)?r:ip(r)?sp(r)||r===zo(r).scrollingElement?window:Nu(r)?r:null:null}function iS(r){return jo(r)?r.scrollX:r.scrollLeft}function sS(r){return jo(r)?r.scrollY:r.scrollTop}function am(r){return{x:iS(r),y:sS(r)}}var tn;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(tn||(tn={}));function aS(r){return!uf||!r?!1:r===document.scrollingElement}function oS(r){const e={x:0,y:0},n=aS(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=e.y,u=r.scrollLeft<=e.x,f=r.scrollTop>=s.y,g=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:f,isRight:g,maxScroll:s,minScroll:e}}const iN={x:.2,y:.2};function sN(r,e,n,s,o){let{top:u,left:f,right:g,bottom:m}=n;s===void 0&&(s=10),o===void 0&&(o=iN);const{isTop:p,isBottom:b,isLeft:T,isRight:w}=oS(r),x={x:0,y:0},B={x:0,y:0},K={height:e.height*o.y,width:e.width*o.x};return!p&&u<=e.top+K.height?(x.y=tn.Backward,B.y=s*Math.abs((e.top+K.height-u)/K.height)):!b&&m>=e.bottom-K.height&&(x.y=tn.Forward,B.y=s*Math.abs((e.bottom-K.height-m)/K.height)),!w&&g>=e.right-K.width?(x.x=tn.Forward,B.x=s*Math.abs((e.right-K.width-g)/K.width)):!T&&f<=e.left+K.width&&(x.x=tn.Backward,B.x=s*Math.abs((e.left+K.width-f)/K.width)),{direction:x,speed:B}}function aN(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:f}=window;return{top:0,left:0,right:u,bottom:f,width:u,height:f}}const{top:e,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:e,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function lS(r){return r.reduce((e,n)=>To(e,am(n)),br)}function oN(r){return r.reduce((e,n)=>e+iS(n),0)}function lN(r){return r.reduce((e,n)=>e+sS(n),0)}function uN(r,e){if(e===void 0&&(e=Bo),!r)return;const{top:n,left:s,bottom:o,right:u}=e(r);rS(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const cN=[["x",["left","right"],oN],["y",["top","bottom"],lN]];class lp{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=cf(n),o=lS(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,f,g]of cN)for(const m of f)Object.defineProperty(this,m,{get:()=>{const p=g(s),b=o[u]-p;return this.rect[m]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class nu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var o;(o=this.target)==null||o.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function hN(r){const{EventTarget:e}=kn(r);return r instanceof e?r:zo(r)}function Ig(r,e){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var rr;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(rr||(rr={}));function pb(r){r.preventDefault()}function fN(r){r.stopPropagation()}var He;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(He||(He={}));const uS={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},dN=(r,e)=>{let{currentCoordinates:n}=e;switch(r.code){case He.Right:return{...n,x:n.x+25};case He.Left:return{...n,x:n.x-25};case He.Down:return{...n,y:n.y+25};case He.Up:return{...n,y:n.y-25}}};class up{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new nu(zo(n)),this.windowListeners=new nu(kn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(rr.Resize,this.handleCancel),this.windowListeners.add(rr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(rr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&uN(s),n(br)}handleKeyDown(e){if(op(e)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=uS,coordinateGetter:f=dN,scrollBehavior:g="smooth"}=o,{code:m}=e;if(u.end.includes(m)){this.handleEnd(e);return}if(u.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:p}=s.current,b=p?{x:p.left,y:p.top}:br;this.referenceCoordinates||(this.referenceCoordinates=b);const T=f(e,{active:n,context:s.current,currentCoordinates:b});if(T){const w=pu(T,b),x={x:0,y:0},{scrollableAncestors:B}=s.current;for(const K of B){const L=e.code,{isTop:Y,isRight:$,isLeft:X,isBottom:ne,maxScroll:ae,minScroll:se}=oS(K),C=aN(K),A={x:Math.min(L===He.Right?C.right-C.width/2:C.right,Math.max(L===He.Right?C.left:C.left+C.width/2,T.x)),y:Math.min(L===He.Down?C.bottom-C.height/2:C.bottom,Math.max(L===He.Down?C.top:C.top+C.height/2,T.y))},I=L===He.Right&&!$||L===He.Left&&!X,M=L===He.Down&&!ne||L===He.Up&&!Y;if(I&&A.x!==T.x){const D=K.scrollLeft+w.x,V=L===He.Right&&D<=ae.x||L===He.Left&&D>=se.x;if(V&&!w.y){K.scrollTo({left:D,behavior:g});return}V?x.x=K.scrollLeft-D:x.x=L===He.Right?K.scrollLeft-ae.x:K.scrollLeft-se.x,x.x&&K.scrollBy({left:-x.x,behavior:g});break}else if(M&&A.y!==T.y){const D=K.scrollTop+w.y,V=L===He.Down&&D<=ae.y||L===He.Up&&D>=se.y;if(V&&!w.x){K.scrollTo({top:D,behavior:g});return}V?x.y=K.scrollTop-D:x.y=L===He.Down?K.scrollTop-ae.y:K.scrollTop-se.y,x.y&&K.scrollBy({top:-x.y,behavior:g});break}}this.handleMove(e,To(pu(T,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}up.activators=[{eventName:"onKeyDown",handler:(r,e,n)=>{let{keyboardCodes:s=uS,onActivation:o}=e,{active:u}=n;const{code:f}=r.nativeEvent;if(s.start.includes(f)){const g=u.activatorNode.current;return g&&r.target!==g?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function yb(r){return!!(r&&"distance"in r)}function vb(r){return!!(r&&"delay"in r)}class cp{constructor(e,n,s){var o;s===void 0&&(s=hN(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:f}=u;this.props=e,this.events=n,this.document=zo(f),this.documentListeners=new nu(this.document),this.listeners=new nu(s),this.windowListeners=new nu(kn(f)),this.initialCoordinates=(o=sm(u))!=null?o:br,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(rr.Resize,this.handleCancel),this.windowListeners.add(rr.DragStart,pb),this.windowListeners.add(rr.VisibilityChange,this.handleCancel),this.windowListeners.add(rr.ContextMenu,pb),this.documentListeners.add(rr.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vb(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(yb(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(rr.Click,fN,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(rr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:f,options:{activationConstraint:g}}=u;if(!o)return;const m=(n=sm(e))!=null?n:br,p=pu(o,m);if(!s&&g){if(yb(g)){if(g.tolerance!=null&&Ig(p,g.tolerance))return this.handleCancel();if(Ig(p,g.distance))return this.handleStart()}if(vb(g)&&Ig(p,g.tolerance))return this.handleCancel();this.handlePending(g,p);return}e.cancelable&&e.preventDefault(),f(m)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===He.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const gN={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class hp extends cp{constructor(e){const{event:n}=e,s=zo(n.target);super(e,gN,s)}}hp.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const mN={move:{name:"mousemove"},end:{name:"mouseup"}};var om;(function(r){r[r.RightClick=2]="RightClick"})(om||(om={}));class pN extends cp{constructor(e){super(e,mN,zo(e.event.target))}}pN.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return n.button===om.RightClick?!1:(s?.({event:n}),!0)}}];const Dg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yN extends cp{constructor(e){super(e,Dg)}static setup(){return window.addEventListener(Dg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Dg.move.name,e)};function e(){}}}yN.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var ru;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(ru||(ru={}));var zh;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(zh||(zh={}));function vN(r){let{acceleration:e,activator:n=ru.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:f=5,order:g=zh.TreeOrder,pointerCoordinates:m,scrollableAncestors:p,scrollableAncestorRects:b,delta:T,threshold:w}=r;const x=bN({delta:T,disabled:!u}),[B,K]=D2(),L=j.useRef({x:0,y:0}),Y=j.useRef({x:0,y:0}),$=j.useMemo(()=>{switch(n){case ru.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case ru.DraggableRect:return o}},[n,o,m]),X=j.useRef(null),ne=j.useCallback(()=>{const se=X.current;if(!se)return;const C=L.current.x*Y.current.x,A=L.current.y*Y.current.y;se.scrollBy(C,A)},[]),ae=j.useMemo(()=>g===zh.TreeOrder?[...p].reverse():p,[g,p]);j.useEffect(()=>{if(!u||!p.length||!$){K();return}for(const se of ae){if(s?.(se)===!1)continue;const C=p.indexOf(se),A=b[C];if(!A)continue;const{direction:I,speed:M}=sN(se,A,$,e,w);for(const D of["x","y"])x[D][I[D]]||(M[D]=0,I[D]=0);if(M.x>0||M.y>0){K(),X.current=se,B(ne,f),L.current=M,Y.current=I;return}}L.current={x:0,y:0},Y.current={x:0,y:0},K()},[e,ne,s,K,u,f,JSON.stringify($),JSON.stringify(x),B,p,ae,b,JSON.stringify(w)])}const _N={x:{[tn.Backward]:!1,[tn.Forward]:!1},y:{[tn.Backward]:!1,[tn.Forward]:!1}};function bN(r){let{delta:e,disabled:n}=r;const s=im(e);return Ou(o=>{if(n||!s||!o)return _N;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[tn.Backward]:o.x[tn.Backward]||u.x===-1,[tn.Forward]:o.x[tn.Forward]||u.x===1},y:{[tn.Backward]:o.y[tn.Backward]||u.y===-1,[tn.Forward]:o.y[tn.Forward]||u.y===1}}},[n,e,s])}function EN(r,e){const n=e!=null?r.get(e):void 0,s=n?n.node.current:null;return Ou(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function TN(r,e){return j.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(f=>({eventName:f.eventName,handler:e(f.handler,s)}));return[...n,...u]},[]),[r,e])}var vu;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(vu||(vu={}));var lm;(function(r){r.Optimized="optimized"})(lm||(lm={}));const _b=new Map;function SN(r,e){let{dragging:n,dependencies:s,config:o}=e;const[u,f]=j.useState(null),{frequency:g,measure:m,strategy:p}=o,b=j.useRef(r),T=L(),w=mu(T),x=j.useCallback(function(Y){Y===void 0&&(Y=[]),!w.current&&f($=>$===null?Y:$.concat(Y.filter(X=>!$.includes(X))))},[w]),B=j.useRef(null),K=Ou(Y=>{if(T&&!n)return _b;if(!Y||Y===_b||b.current!==r||u!=null){const $=new Map;for(let X of r){if(!X)continue;if(u&&u.length>0&&!u.includes(X.id)&&X.rect.current){$.set(X.id,X.rect.current);continue}const ne=X.node.current,ae=ne?new lp(m(ne),ne):null;X.rect.current=ae,ae&&$.set(X.id,ae)}return $}return Y},[r,u,n,T,m]);return j.useEffect(()=>{b.current=r},[r]),j.useEffect(()=>{T||x()},[n,T]),j.useEffect(()=>{u&&u.length>0&&f(null)},[JSON.stringify(u)]),j.useEffect(()=>{T||typeof g!="number"||B.current!==null||(B.current=setTimeout(()=>{x(),B.current=null},g))},[g,T,x,...s]),{droppableRects:K,measureDroppableContainers:x,measuringScheduled:u!=null};function L(){switch(p){case vu.Always:return!1;case vu.BeforeDragging:return n;default:return!n}}}function cS(r,e){return Ou(n=>r?n||(typeof e=="function"?e(r):r):null,[e,r])}function wN(r,e){return cS(r,e)}function AN(r){let{callback:e,disabled:n}=r;const s=ap(e),o=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function hf(r){let{callback:e,disabled:n}=r;const s=ap(e),o=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function RN(r){return new lp(Bo(r),r)}function bb(r,e,n){e===void 0&&(e=RN);const[s,o]=j.useState(null);function u(){o(m=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=m??n)!=null?p:null}const b=e(r);return JSON.stringify(m)===JSON.stringify(b)?m:b})}const f=AN({callback(m){if(r)for(const p of m){const{type:b,target:T}=p;if(b==="childList"&&T instanceof HTMLElement&&T.contains(r)){u();break}}}}),g=hf({callback:u});return Yr(()=>{u(),r?(g?.observe(r),f?.observe(document.body,{childList:!0,subtree:!0})):(g?.disconnect(),f?.disconnect())},[r]),s}function xN(r){const e=cS(r);return nS(r,e)}const Eb=[];function CN(r){const e=j.useRef(r),n=Ou(s=>r?s&&s!==Eb&&r&&e.current&&r.parentNode===e.current.parentNode?s:cf(r):Eb,[r]);return j.useEffect(()=>{e.current=r},[r]),n}function IN(r){const[e,n]=j.useState(null),s=j.useRef(r),o=j.useCallback(u=>{const f=Cg(u.target);f&&n(g=>g?(g.set(f,am(f)),new Map(g)):null)},[]);return j.useEffect(()=>{const u=s.current;if(r!==u){f(u);const g=r.map(m=>{const p=Cg(m);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,am(p)]):null}).filter(m=>m!=null);n(g.length?new Map(g):null),s.current=r}return()=>{f(r),f(u)};function f(g){g.forEach(m=>{const p=Cg(m);p?.removeEventListener("scroll",o)})}},[o,r]),j.useMemo(()=>r.length?e?Array.from(e.values()).reduce((u,f)=>To(u,f),br):lS(r):br,[r,e])}function Tb(r,e){e===void 0&&(e=[]);const n=j.useRef(null);return j.useEffect(()=>{n.current=null},e),j.useEffect(()=>{const s=r!==br;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?pu(r,n.current):br}function DN(r){j.useEffect(()=>{if(!uf)return;const e=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},r.map(e=>{let{sensor:n}=e;return n}))}function NN(r,e){return j.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=f=>{u(f,e)},n},{}),[r,e])}function hS(r){return j.useMemo(()=>r?tN(r):null,[r])}const Sb=[];function ON(r,e){e===void 0&&(e=Bo);const[n]=r,s=hS(n?kn(n):null),[o,u]=j.useState(Sb);function f(){u(()=>r.length?r.map(m=>aS(m)?s:new lp(e(m),m)):Sb)}const g=hf({callback:f});return Yr(()=>{g?.disconnect(),f(),r.forEach(m=>g?.observe(m))},[r]),o}function MN(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Nu(e)?e:r}function kN(r){let{measure:e}=r;const[n,s]=j.useState(null),o=j.useCallback(p=>{for(const{target:b}of p)if(Nu(b)){s(T=>{const w=e(b);return T?{...T,width:w.width,height:w.height}:w});break}},[e]),u=hf({callback:o}),f=j.useCallback(p=>{const b=MN(p);u?.disconnect(),b&&u?.observe(b),s(b?e(b):null)},[e,u]),[g,m]=Uh(f);return j.useMemo(()=>({nodeRef:g,rect:n,setRef:m}),[n,g,m])}const VN=[{sensor:hp,options:{}},{sensor:up,options:{}}],PN={current:{}},yh={draggable:{measure:mb},droppable:{measure:mb,strategy:vu.WhileDragging,frequency:lm.Optimized},dragOverlay:{measure:Bo}};class iu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const LN={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new iu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yh,measureDroppableContainers:jh,windowRect:null,measuringScheduled:!1},UN={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jh,draggableNodes:new Map,over:null,measureDroppableContainers:jh},ff=j.createContext(UN),fS=j.createContext(LN);function jN(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new iu}}}function zN(r,e){switch(e.type){case Kt.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Kt.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case Kt.DragEnd:case Kt.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Kt.RegisterDroppable:{const{element:n}=e,{id:s}=n,o=new iu(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case Kt.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=e,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const f=new iu(r.droppable.containers);return f.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:f}}}case Kt.UnregisterDroppable:{const{id:n,key:s}=e,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new iu(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function BN(r){let{disabled:e}=r;const{active:n,activatorEvent:s,draggableNodes:o}=j.useContext(ff),u=im(s),f=im(n?.id);return j.useEffect(()=>{if(!e&&!s&&u&&f!=null){if(!op(u)||document.activeElement===u.target)return;const g=o.get(f);if(!g)return;const{activatorNode:m,node:p}=g;if(!m.current&&!p.current)return;requestAnimationFrame(()=>{for(const b of[m.current,p.current]){if(!b)continue;const T=M2(b);if(T){T.focus();break}}})}},[s,e,o,f,u]),null}function qN(r,e){let{transform:n,...s}=e;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function HN(r){return j.useMemo(()=>({draggable:{...yh.draggable,...r?.draggable},droppable:{...yh.droppable,...r?.droppable},dragOverlay:{...yh.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function FN(r){let{activeNode:e,measure:n,initialRect:s,config:o=!0}=r;const u=j.useRef(!1),{x:f,y:g}=typeof o=="boolean"?{x:o,y:o}:o;Yr(()=>{if(!f&&!g||!e){u.current=!1;return}if(u.current||!s)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const b=n(p),T=nS(b,s);if(f||(T.x=0),g||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const w=rS(p);w&&w.scrollBy({top:T.y,left:T.x})}},[e,f,g,s,n])}const dS=j.createContext({...br,scaleX:1,scaleY:1});var os;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(os||(os={}));const GN=j.memo(function(e){var n,s,o,u;let{id:f,accessibility:g,autoScroll:m=!0,children:p,sensors:b=VN,collisionDetection:T=Q2,measuring:w,modifiers:x,...B}=e;const K=j.useReducer(zN,void 0,jN),[L,Y]=K,[$,X]=j2(),[ne,ae]=j.useState(os.Uninitialized),se=ne===os.Initialized,{draggable:{active:C,nodes:A,translate:I},droppable:{containers:M}}=L,D=C!=null?A.get(C):null,V=j.useRef({initial:null,translated:null}),N=j.useMemo(()=>{var ct;return C!=null?{id:C,data:(ct=D?.data)!=null?ct:PN,rect:V}:null},[C,D]),Be=j.useRef(null),[Xe,Z]=j.useState(null),[oe,de]=j.useState(null),Ae=mu(B,Object.values(B)),k=Mu("DndDescribedBy",f),re=j.useMemo(()=>M.getEnabled(),[M]),ue=HN(w),{droppableRects:le,measureDroppableContainers:me,measuringScheduled:we}=SN(re,{dragging:se,dependencies:[I.x,I.y],config:ue.droppable}),pe=EN(A,C),dt=j.useMemo(()=>oe?sm(oe):null,[oe]),ke=ar(),Et=wN(pe,ue.draggable.measure);FN({activeNode:C!=null?A.get(C):null,config:ke.layoutShiftCompensation,initialRect:Et,measure:ue.draggable.measure});const Ne=bb(pe,ue.draggable.measure,Et),nn=bb(pe?pe.parentElement:null),qe=j.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),nt=M.getNodeFor((n=qe.current.over)==null?void 0:n.id),vt=kN({measure:ue.dragOverlay.measure}),gn=(s=vt.nodeRef.current)!=null?s:pe,En=se?(o=vt.rect)!=null?o:Ne:null,rn=!!(vt.nodeRef.current&&vt.rect),Ea=xN(rn?null:Ne),Qr=hS(gn?kn(gn):null),Tn=CN(se?nt??pe:null),Fn=ON(Tn),Oi=qN(x,{transform:{x:I.x-Ea.x,y:I.y-Ea.y,scaleX:1,scaleY:1},activatorEvent:oe,active:N,activeNodeRect:Ne,containerNodeRect:nn,draggingNodeRect:En,over:qe.current.over,overlayNodeRect:vt.rect,scrollableAncestors:Tn,scrollableAncestorRects:Fn,windowRect:Qr}),Xr=dt?To(dt,I):null,Mi=IN(Tn),Ta=Tb(Mi),mt=Tb(Mi,[Ne]),Le=To(Oi,Ta),Nt=En?Z2(En,Oi):null,Tt=N&&Nt?T({active:N,collisionRect:Nt,droppableRects:le,droppableContainers:re,pointerCoordinates:Xr}):null,Is=tS(Tt,"id"),[Gn,Er]=j.useState(null),$r=rn?Oi:To(Oi,mt),Zr=X2($r,(u=Gn?.rect)!=null?u:null,Ne),Sn=j.useRef(null),Wr=j.useCallback((ct,zt)=>{let{sensor:pt,options:Cn}=zt;if(Be.current==null)return;const Rt=A.get(Be.current);if(!Rt)return;const Ot=ct.nativeEvent,Bt=new pt({active:Be.current,activeNode:Rt,event:Ot,options:Cn,context:qe,onAbort(Ce){if(!A.get(Ce))return;const{onDragAbort:$e}=Ae.current,St={id:Ce};$e?.(St),$({type:"onDragAbort",event:St})},onPending(Ce,rt,$e,St){if(!A.get(Ce))return;const{onDragPending:ei}=Ae.current,sn={id:Ce,constraint:rt,initialCoordinates:$e,offset:St};ei?.(sn),$({type:"onDragPending",event:sn})},onStart(Ce){const rt=Be.current;if(rt==null)return;const $e=A.get(rt);if(!$e)return;const{onDragStart:St}=Ae.current,lr={activatorEvent:Ot,active:{id:rt,data:$e.data,rect:V}};Xl.unstable_batchedUpdates(()=>{St?.(lr),ae(os.Initializing),Y({type:Kt.DragStart,initialCoordinates:Ce,active:rt}),$({type:"onDragStart",event:lr}),Z(Sn.current),de(Ot)})},onMove(Ce){Y({type:Kt.DragMove,coordinates:Ce})},onEnd:or(Kt.DragEnd),onCancel:or(Kt.DragCancel)});Sn.current=Bt;function or(Ce){return async function(){const{active:$e,collisions:St,over:lr,scrollAdjustedTranslate:ei}=qe.current;let sn=null;if($e&&ei){const{cancelDrop:Tr}=Ae.current;sn={activatorEvent:Ot,active:$e,collisions:St,delta:ei,over:lr},Ce===Kt.DragEnd&&typeof Tr=="function"&&await Promise.resolve(Tr(sn))&&(Ce=Kt.DragCancel)}Be.current=null,Xl.unstable_batchedUpdates(()=>{Y({type:Ce}),ae(os.Uninitialized),Er(null),Z(null),de(null),Sn.current=null;const Tr=Ce===Kt.DragEnd?"onDragEnd":"onDragCancel";if(sn){const ur=Ae.current[Tr];ur?.(sn),$({type:Tr,event:sn})}})}}},[A]),Jr=j.useCallback((ct,zt)=>(pt,Cn)=>{const Rt=pt.nativeEvent,Ot=A.get(Cn);if(Be.current!==null||!Ot||Rt.dndKit||Rt.defaultPrevented)return;const Bt={active:Ot};ct(pt,zt.options,Bt)===!0&&(Rt.dndKit={capturedBy:zt.sensor},Be.current=Cn,Wr(pt,zt))},[A,Wr]),ki=TN(b,Jr);DN(b),Yr(()=>{Ne&&ne===os.Initializing&&ae(os.Initialized)},[Ne,ne]),j.useEffect(()=>{const{onDragMove:ct}=Ae.current,{active:zt,activatorEvent:pt,collisions:Cn,over:Rt}=qe.current;if(!zt||!pt)return;const Ot={active:zt,activatorEvent:pt,collisions:Cn,delta:{x:Le.x,y:Le.y},over:Rt};Xl.unstable_batchedUpdates(()=>{ct?.(Ot),$({type:"onDragMove",event:Ot})})},[Le.x,Le.y]),j.useEffect(()=>{const{active:ct,activatorEvent:zt,collisions:pt,droppableContainers:Cn,scrollAdjustedTranslate:Rt}=qe.current;if(!ct||Be.current==null||!zt||!Rt)return;const{onDragOver:Ot}=Ae.current,Bt=Cn.get(Is),or=Bt&&Bt.rect.current?{id:Bt.id,rect:Bt.rect.current,data:Bt.data,disabled:Bt.disabled}:null,Ce={active:ct,activatorEvent:zt,collisions:pt,delta:{x:Rt.x,y:Rt.y},over:or};Xl.unstable_batchedUpdates(()=>{Er(or),Ot?.(Ce),$({type:"onDragOver",event:Ce})})},[Is]),Yr(()=>{qe.current={activatorEvent:oe,active:N,activeNode:pe,collisionRect:Nt,collisions:Tt,droppableRects:le,draggableNodes:A,draggingNode:gn,draggingNodeRect:En,droppableContainers:M,over:Gn,scrollableAncestors:Tn,scrollAdjustedTranslate:Le},V.current={initial:En,translated:Nt}},[N,pe,Tt,Nt,A,gn,En,le,M,Gn,Tn,Le]),vN({...ke,delta:I,draggingRect:Nt,pointerCoordinates:Xr,scrollableAncestors:Tn,scrollableAncestorRects:Fn});const Ds=j.useMemo(()=>({active:N,activeNode:pe,activeNodeRect:Ne,activatorEvent:oe,collisions:Tt,containerNodeRect:nn,dragOverlay:vt,draggableNodes:A,droppableContainers:M,droppableRects:le,over:Gn,measureDroppableContainers:me,scrollableAncestors:Tn,scrollableAncestorRects:Fn,measuringConfiguration:ue,measuringScheduled:we,windowRect:Qr}),[N,pe,Ne,oe,Tt,nn,vt,A,M,le,Gn,me,Tn,Fn,ue,we,Qr]),Ns=j.useMemo(()=>({activatorEvent:oe,activators:ki,active:N,activeNodeRect:Ne,ariaDescribedById:{draggable:k},dispatch:Y,draggableNodes:A,over:Gn,measureDroppableContainers:me}),[oe,ki,N,Ne,Y,k,A,Gn,me]);return Ie.createElement(WT.Provider,{value:X},Ie.createElement(ff.Provider,{value:Ns},Ie.createElement(fS.Provider,{value:Ds},Ie.createElement(dS.Provider,{value:Zr},p)),Ie.createElement(BN,{disabled:g?.restoreFocus===!1})),Ie.createElement(q2,{...g,hiddenTextDescribedById:k}));function ar(){const ct=Xe?.autoScrollEnabled===!1,zt=typeof m=="object"?m.enabled===!1:m===!1,pt=se&&!ct&&!zt;return typeof m=="object"?{...m,enabled:pt}:{enabled:pt}}}),KN=j.createContext(null),wb="button",YN="Draggable";function QN(r){let{id:e,data:n,disabled:s=!1,attributes:o}=r;const u=Mu(YN),{activators:f,activatorEvent:g,active:m,activeNodeRect:p,ariaDescribedById:b,draggableNodes:T,over:w}=j.useContext(ff),{role:x=wb,roleDescription:B="draggable",tabIndex:K=0}=o??{},L=m?.id===e,Y=j.useContext(L?dS:KN),[$,X]=Uh(),[ne,ae]=Uh(),se=NN(f,e),C=mu(n);Yr(()=>(T.set(e,{id:e,key:u,node:$,activatorNode:ne,data:C}),()=>{const I=T.get(e);I&&I.key===u&&T.delete(e)}),[T,e]);const A=j.useMemo(()=>({role:x,tabIndex:K,"aria-disabled":s,"aria-pressed":L&&x===wb?!0:void 0,"aria-roledescription":B,"aria-describedby":b.draggable}),[s,x,K,L,B,b.draggable]);return{active:m,activatorEvent:g,activeNodeRect:p,attributes:A,isDragging:L,listeners:s?void 0:se,node:$,over:w,setNodeRef:X,setActivatorNodeRef:ae,transform:Y}}function XN(){return j.useContext(fS)}const $N="Droppable",ZN={timeout:25};function WN(r){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=Mu($N),{active:f,dispatch:g,over:m,measureDroppableContainers:p}=j.useContext(ff),b=j.useRef({disabled:n}),T=j.useRef(!1),w=j.useRef(null),x=j.useRef(null),{disabled:B,updateMeasurementsFor:K,timeout:L}={...ZN,...o},Y=mu(K??s),$=j.useCallback(()=>{if(!T.current){T.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{p(Array.isArray(Y.current)?Y.current:[Y.current]),x.current=null},L)},[L]),X=hf({callback:$,disabled:B||!f}),ne=j.useCallback((A,I)=>{X&&(I&&(X.unobserve(I),T.current=!1),A&&X.observe(A))},[X]),[ae,se]=Uh(ne),C=mu(e);return j.useEffect(()=>{!X||!ae.current||(X.disconnect(),T.current=!1,X.observe(ae.current))},[ae,X]),j.useEffect(()=>(g({type:Kt.RegisterDroppable,element:{id:s,key:u,disabled:n,node:ae,rect:w,data:C}}),()=>g({type:Kt.UnregisterDroppable,key:u,id:s})),[s]),j.useEffect(()=>{n!==b.current.disabled&&(g({type:Kt.SetDroppableDisabled,id:s,key:u,disabled:n}),b.current.disabled=n)},[s,u,n,g]),{active:f,rect:w,isOver:m?.id===s,node:ae,over:m,setNodeRef:se}}function gS(r,e,n){const s=r.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function JN(r,e){return r.reduce((n,s,o)=>{const u=e.get(s);return u&&(n[o]=u),n},Array(r.length))}function sh(r){return r!==null&&r>=0}function eO(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}function tO(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const mS=r=>{let{rects:e,activeIndex:n,overIndex:s,index:o}=r;const u=gS(e,s,n),f=e[o],g=u[o];return!g||!f?null:{x:g.left-f.left,y:g.top-f.top,scaleX:g.width/f.width,scaleY:g.height/f.height}},ah={scaleX:1,scaleY:1},nO=r=>{var e;let{activeIndex:n,activeNodeRect:s,index:o,rects:u,overIndex:f}=r;const g=(e=u[n])!=null?e:s;if(!g)return null;if(o===n){const p=u[f];return p?{x:0,y:n<f?p.top+p.height-(g.top+g.height):p.top-g.top,...ah}:null}const m=rO(u,o,n);return o>n&&o<=f?{x:0,y:-g.height-m,...ah}:o<n&&o>=f?{x:0,y:g.height+m,...ah}:{x:0,y:0,...ah}};function rO(r,e,n){const s=r[e],o=r[e-1],u=r[e+1];return s?n<e?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const pS="Sortable",yS=Ie.createContext({activeIndex:-1,containerId:pS,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:mS,disabled:{draggable:!1,droppable:!1}});function iO(r){let{children:e,id:n,items:s,strategy:o=mS,disabled:u=!1}=r;const{active:f,dragOverlay:g,droppableRects:m,over:p,measureDroppableContainers:b}=XN(),T=Mu(pS,n),w=g.rect!==null,x=j.useMemo(()=>s.map(se=>typeof se=="object"&&"id"in se?se.id:se),[s]),B=f!=null,K=f?x.indexOf(f.id):-1,L=p?x.indexOf(p.id):-1,Y=j.useRef(x),$=!eO(x,Y.current),X=L!==-1&&K===-1||$,ne=tO(u);Yr(()=>{$&&B&&b(x)},[$,x,B,b]),j.useEffect(()=>{Y.current=x},[x]);const ae=j.useMemo(()=>({activeIndex:K,containerId:T,disabled:ne,disableTransforms:X,items:x,overIndex:L,useDragOverlay:w,sortedRects:JN(x,m),strategy:o}),[K,T,ne.draggable,ne.droppable,X,x,L,m,w,o]);return Ie.createElement(yS.Provider,{value:ae},e)}const sO=r=>{let{id:e,items:n,activeIndex:s,overIndex:o}=r;return gS(n,s,o).indexOf(e)},aO=r=>{let{containerId:e,isSorting:n,wasDragging:s,index:o,items:u,newIndex:f,previousItems:g,previousContainerId:m,transition:p}=r;return!p||!s||g!==u&&o===f?!1:n?!0:f!==o&&e===m},oO={duration:200,easing:"ease"},vS="transform",lO=yu.Transition.toString({property:vS,duration:0,easing:"linear"}),uO={roleDescription:"sortable"};function cO(r){let{disabled:e,index:n,node:s,rect:o}=r;const[u,f]=j.useState(null),g=j.useRef(n);return Yr(()=>{if(!e&&n!==g.current&&s.current){const m=o.current;if(m){const p=Bo(s.current,{ignoreTransform:!0}),b={x:m.left-p.left,y:m.top-p.top,scaleX:m.width/p.width,scaleY:m.height/p.height};(b.x||b.y)&&f(b)}}n!==g.current&&(g.current=n)},[e,n,s,o]),j.useEffect(()=>{u&&f(null)},[u]),u}function hO(r){let{animateLayoutChanges:e=aO,attributes:n,disabled:s,data:o,getNewIndex:u=sO,id:f,strategy:g,resizeObserverConfig:m,transition:p=oO}=r;const{items:b,containerId:T,activeIndex:w,disabled:x,disableTransforms:B,sortedRects:K,overIndex:L,useDragOverlay:Y,strategy:$}=j.useContext(yS),X=fO(s,x),ne=b.indexOf(f),ae=j.useMemo(()=>({sortable:{containerId:T,index:ne,items:b},...o}),[T,o,ne,b]),se=j.useMemo(()=>b.slice(b.indexOf(f)),[b,f]),{rect:C,node:A,isOver:I,setNodeRef:M}=WN({id:f,data:ae,disabled:X.droppable,resizeObserverConfig:{updateMeasurementsFor:se,...m}}),{active:D,activatorEvent:V,activeNodeRect:N,attributes:Be,setNodeRef:Xe,listeners:Z,isDragging:oe,over:de,setActivatorNodeRef:Ae,transform:k}=QN({id:f,data:ae,attributes:{...uO,...n},disabled:X.draggable}),re=I2(M,Xe),ue=!!D,le=ue&&!B&&sh(w)&&sh(L),me=!Y&&oe,we=me&&le?k:null,dt=le?we??(g??$)({rects:K,activeNodeRect:N,activeIndex:w,overIndex:L,index:ne}):null,ke=sh(w)&&sh(L)?u({id:f,items:b,activeIndex:w,overIndex:L}):ne,Et=D?.id,Ne=j.useRef({activeId:Et,items:b,newIndex:ke,containerId:T}),nn=b!==Ne.current.items,qe=e({active:D,containerId:T,isDragging:oe,isSorting:ue,id:f,index:ne,items:b,newIndex:Ne.current.newIndex,previousItems:Ne.current.items,previousContainerId:Ne.current.containerId,transition:p,wasDragging:Ne.current.activeId!=null}),nt=cO({disabled:!qe,index:ne,node:A,rect:C});return j.useEffect(()=>{ue&&Ne.current.newIndex!==ke&&(Ne.current.newIndex=ke),T!==Ne.current.containerId&&(Ne.current.containerId=T),b!==Ne.current.items&&(Ne.current.items=b)},[ue,ke,T,b]),j.useEffect(()=>{if(Et===Ne.current.activeId)return;if(Et!=null&&Ne.current.activeId==null){Ne.current.activeId=Et;return}const gn=setTimeout(()=>{Ne.current.activeId=Et},50);return()=>clearTimeout(gn)},[Et]),{active:D,activeIndex:w,attributes:Be,data:ae,rect:C,index:ne,newIndex:ke,items:b,isOver:I,isSorting:ue,isDragging:oe,listeners:Z,node:A,overIndex:L,over:de,setNodeRef:re,setActivatorNodeRef:Ae,setDroppableNodeRef:M,setDraggableNodeRef:Xe,transform:nt??dt,transition:vt()};function vt(){if(nt||nn&&Ne.current.newIndex===ne)return lO;if(!(me&&!op(V)||!p)&&(ue||qe))return yu.Transition.toString({...p,property:vS})}}function fO(r,e){var n,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(n=r?.draggable)!=null?n:e.draggable,droppable:(s=r?.droppable)!=null?s:e.droppable}}function Bh(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const dO=[He.Down,He.Right,He.Up,He.Left],gO=(r,e)=>{let{context:{active:n,collisionRect:s,droppableRects:o,droppableContainers:u,over:f,scrollableAncestors:g}}=e;if(dO.includes(r.code)){if(r.preventDefault(),!n||!s)return;const m=[];u.getEnabled().forEach(T=>{if(!T||T!=null&&T.disabled)return;const w=o.get(T.id);if(w)switch(r.code){case He.Down:s.top<w.top&&m.push(T);break;case He.Up:s.top>w.top&&m.push(T);break;case He.Left:s.left>w.left&&m.push(T);break;case He.Right:s.left<w.left&&m.push(T);break}});const p=K2({collisionRect:s,droppableRects:o,droppableContainers:m});let b=tS(p,"id");if(b===f?.id&&p.length>1&&(b=p[1].id),b!=null){const T=u.get(n.id),w=u.get(b),x=w?o.get(w.id):null,B=w?.node.current;if(B&&x&&T&&w){const L=cf(B).some((se,C)=>g[C]!==se),Y=_S(T,w),$=mO(T,w),X=L||!Y?{x:0,y:0}:{x:$?s.width-x.width:0,y:$?s.height-x.height:0},ne={x:x.left,y:x.top};return X.x&&X.y?ne:pu(ne,X)}}}};function _S(r,e){return!Bh(r)||!Bh(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function mO(r,e){return!Bh(r)||!Bh(e)||!_S(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}const pO=({task:r,isOpen:e,onClose:n,onEdit:s,onUpdateDetails:o,categories:u})=>{const[f,g]=Ie.useState(!1),[m,p]=Ie.useState(r.text),[b,T]=Ie.useState(r.status||"pending"),[w,x]=Ie.useState(r.category||""),[B,K]=Ie.useState(r.priority||""),[L,Y]=Ie.useState(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:""),$=Ie.useRef(null);if(Ie.useEffect(()=>{f&&$.current&&setTimeout(()=>{if($.current){$.current.focus();const se=$.current.value.length;$.current.setSelectionRange(se,se)}},0)},[f,m]),Ie.useEffect(()=>{p(r.text),T(r.status||"pending"),x(r.category||""),K(r.priority||""),Y(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:"")},[r]),!e)return null;const X=()=>{const se=m.trim();se&&se!==r.text&&s&&s(r.id,se);const C={};b!==(r.status||"pending")&&(C.status=b),w!==(r.category||"")&&(C.category=w||void 0),B!==(r.priority||"")&&(C.priority=B||void 0),L!==(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:"")&&(C.dueDate=L?new Date(L):void 0),Object.keys(C).length>0&&o&&o(r.id,C),g(!1)},ne=()=>{p(r.text),T(r.status||"pending"),x(r.category||""),K(r.priority||""),Y(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:""),g(!1)},ae=se=>{se.key==="Enter"&&se.ctrlKey?X():se.key==="Escape"&&ne()};return R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[R.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:f?"Edit Task":"Task Details"}),R.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xl font-bold cursor-pointer","aria-label":"Close modal",children:"×"})]}),R.jsxs("div",{className:"p-4 space-y-4",children:[R.jsxs("div",{children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Task Text"}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created:"}),R.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(r.createdAt).toLocaleString()})]})]}),f?R.jsx("textarea",{ref:$,value:m,onChange:se=>p(se.target.value),onKeyDown:ae,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-vertical focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:10,maxLength:2888,placeholder:"Enter task description..."}):R.jsx("textarea",{value:r.text,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-default ",rows:Math.min(Math.max(r.text.length/40,10),10)})]}),R.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),R.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${r.completed?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-200 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.completed?"Completed":"Active"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),f?R.jsx("select",{value:w,onChange:se=>x(se.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer",children:u.map(se=>R.jsx("option",{value:se.id,children:se.label},se.id))}):R.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded-full text-white",style:{backgroundColor:u.find(se=>se.id===(r.category||"uncategorized"))?.color||"#6b7280"},children:u.find(se=>se.id===(r.category||"uncategorized"))?.label||"Uncategorized"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),f?R.jsx("select",{value:B,onChange:se=>K(se.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer",children:lf.map(se=>R.jsx("option",{value:se.id,children:se.label},se.id))}):r.priority?R.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full text-white ${r.priority==="high"?"bg-red-500":r.priority==="low"?"bg-green-500":"bg-yellow-500"}`,children:r.priority.toUpperCase()}):R.jsx("span",{className:"inline-block px-2 py-1 text-xs text-gray-500 dark:text-gray-400",children:"---"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Due Date"}),f?R.jsx("input",{type:"date",value:L,onChange:se=>Y(se.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer"}):r.dueDate?R.jsxs("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${new Date(r.dueDate)<new Date&&!r.completed?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:["📅 ",new Date(r.dueDate).toLocaleDateString()]}):R.jsx("span",{className:"inline-block px-2 py-1 text-xs text-gray-500 dark:text-gray-400",children:"---"})]})]})]}),R.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-gray-200 dark:border-gray-700",children:[R.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:f?"Press Ctrl+Enter to save, Esc to cancel":""}),R.jsx("div",{className:"flex gap-2",children:f?R.jsxs(R.Fragment,{children:[R.jsx(lt,{onClick:ne,variant:"secondary",size:"sm",children:"Cancel"}),R.jsx(lt,{onClick:X,variant:"primary",size:"sm",disabled:!m.trim()||m.trim()===r.text&&w===(r.category||"")&&B===(r.priority||"")&&L===(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:""),children:"Save Changes"})]}):R.jsxs(R.Fragment,{children:[s&&R.jsx(lt,{onClick:()=>g(!0),variant:"secondary",size:"sm",children:"✏️ Edit Details"}),R.jsx(lt,{onClick:n,variant:"secondary",size:"sm",children:"Close"})]})})]})]})})},yO=({task:r,isOpen:e,onClose:n,onSave:s,onUpdateDetails:o,categories:u})=>{const[f,g]=Ie.useState(r.text),[m,p]=Ie.useState(r.status||"pending"),[b,T]=Ie.useState(r.category||""),[w,x]=Ie.useState(r.priority||""),[B,K]=Ie.useState(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:""),L=Ie.useRef(null);if(Ie.useEffect(()=>{g(r.text),p(r.status||"pending"),T(r.category||""),x(r.priority||""),K(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:"")},[r]),Ie.useEffect(()=>{e&&L.current&&setTimeout(()=>{if(L.current){L.current.focus();const ne=L.current.value.length;L.current.setSelectionRange(ne,ne)}},0)},[e,f]),!e)return null;const Y=()=>{const ne=f.trim();ne&&ne!==r.text&&s(r.id,ne);const ae={};m!==(r.status||"pending")&&(ae.status=m),b!==(r.category||"")&&(ae.category=b||void 0),w!==(r.priority||"")&&(ae.priority=w||void 0),B!==(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:"")&&(ae.dueDate=B?new Date(B):void 0),Object.keys(ae).length>0&&o(r.id,ae),n()},$=()=>{g(r.text),p(r.status||"pending"),T(r.category||""),x(r.priority||""),K(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:""),n()},X=ne=>{ne.key==="Enter"&&ne.ctrlKey?Y():ne.key==="Escape"&&$()};return R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[R.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Edit Task"}),R.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xl font-bold cursor-pointer","aria-label":"Close modal",children:"×"})]}),R.jsxs("div",{className:"p-4 space-y-4",children:[R.jsxs("div",{children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Task Text"}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created:"}),R.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(r.createdAt).toLocaleString()})]})]}),R.jsx("textarea",{ref:L,value:f,onChange:ne=>g(ne.target.value),onKeyDown:X,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-vertical focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:Math.min(Math.max(f.length/40,10),10),maxLength:2888,placeholder:"Enter task description..."})]}),R.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),R.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${r.completed?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-200 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.completed?"Completed":"Active"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),R.jsx("select",{value:b,onChange:ne=>T(ne.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer",children:u.map(ne=>R.jsx("option",{value:ne.id,children:ne.label},ne.id))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),R.jsx("select",{value:w,onChange:ne=>x(ne.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer",children:lf.map(ne=>R.jsx("option",{value:ne.id,children:ne.label},ne.id))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Due Date"}),R.jsx("input",{type:"date",value:B,onChange:ne=>K(ne.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer"})]})]})]}),R.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-gray-200 dark:border-gray-700",children:[R.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Press Ctrl+Enter to save, Esc to cancel"}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx(lt,{onClick:$,variant:"secondary",size:"sm",children:"Cancel"}),R.jsx(lt,{onClick:Y,variant:"primary",size:"sm",disabled:!f.trim()||f.trim()===r.text&&b===(r.category||"")&&w===(r.priority||"")&&B===(r.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:""),children:"Save Changes"})]})]})]})})},vO=({task:r,onToggle:e,onDelete:n,onEdit:s,onUpdateDetails:o,isSelected:u=!1,onSelect:f,showSelection:g=!1,dragHandleProps:m,isDragging:p=!1,categories:b})=>{const[T,w]=Ie.useState(!1),[x,B]=Ie.useState(!1),[K,L]=Ie.useState("desktop");Ie.useEffect(()=>{const C=()=>{const A=window.innerWidth;A<640?L("mobile"):A<1024?L("tablet"):L("desktop")};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const Y=()=>{switch(K){case"mobile":return 40;case"tablet":return 50;case"desktop":return 60;default:return 50}},$=C=>{const A=Y();return C.length<=A?C:`${C.substring(0,A)}...`},X=()=>{try{e(r.id)}catch(C){console.error("Failed to toggle task:",C)}},ne=()=>{if(n)try{n(r.id)}catch(C){console.error("Failed to delete task:",C)}},ae=()=>{B(!0)},se=()=>{f&&f(r.id)};return R.jsxs("div",{className:`p-3 bg-white dark:bg-gray-700 rounded-lg shadow-sm border hover:shadow-md transition-shadow ${u?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600"} ${p?"opacity-50":""}`,children:[R.jsxs("div",{className:"block sm:hidden",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m&&R.jsx("div",{...m,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 p-1 shrink-0",children:"⋮⋮"}),g&&R.jsx("input",{type:"checkbox",checked:u,onChange:se,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 shrink-0"}),!g&&R.jsx("input",{type:"checkbox",checked:r.completed,onChange:X,className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer shrink-0"}),R.jsx("span",{onClick:g?void 0:X,className:`text-gray-800 dark:text-gray-100 select-none flex-1 ${g?"cursor-default":"cursor-pointer"} ${r.completed?"line-through text-gray-500 dark:text-gray-400":""}`,title:r.text.length>Y()?r.text:void 0,children:$(r.text)})]}),R.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[R.jsx("span",{className:"px-2 py-1 text-xs rounded-full text-white whitespace-nowrap",style:{backgroundColor:b.find(C=>C.id===(r.category||"uncategorized"))?.color||"#6b7280"},children:b.find(C=>C.id===(r.category||"uncategorized"))?.label||"Uncategorized"}),r.priority&&R.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white whitespace-nowrap ${r.priority==="high"?"bg-red-500":r.priority==="low"?"bg-green-500":"bg-yellow-500"}`,children:r.priority.toUpperCase()}),r.dueDate&&R.jsxs("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap ${new Date(r.dueDate)<new Date&&!r.completed?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:["📅 ",new Date(r.dueDate).toLocaleDateString()]}),!g&&R.jsxs(R.Fragment,{children:[R.jsx(lt,{onClick:()=>w(!0),variant:"secondary",size:"sm",className:"px-2 py-1 text-sm cursor-pointer ml-auto","aria-label":"View task details",children:"👁️"}),R.jsx(lt,{onClick:ae,variant:"secondary",size:"sm",className:"px-2 py-1 text-sm cursor-pointer","aria-label":"Edit task",children:"✏️"}),n&&R.jsx(lt,{onClick:ne,variant:"secondary",size:"sm",className:"px-2 py-1 text-sm cursor-pointer","aria-label":"Delete task",children:"🗑️"})]})]})]}),R.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[m&&R.jsx("div",{...m,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 p-1 shrink-0",children:"⋮⋮"}),g&&R.jsx("input",{type:"checkbox",checked:u,onChange:se,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 shrink-0"}),!g&&R.jsx("input",{type:"checkbox",checked:r.completed,onChange:X,className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer shrink-0"}),R.jsx("span",{onClick:g?void 0:X,className:`text-gray-800 dark:text-gray-100 select-none flex-1 ${g?"cursor-default":"cursor-pointer"} ${r.completed?"line-through text-gray-500 dark:text-gray-400":""}`,title:r.text.length>Y()?r.text:void 0,children:$(r.text)}),R.jsx("span",{className:"px-2 py-1 text-xs rounded-full text-white whitespace-nowrap shrink-0",style:{backgroundColor:b.find(C=>C.id===(r.category||"uncategorized"))?.color||"#6b7280"},children:b.find(C=>C.id===(r.category||"uncategorized"))?.label||"Uncategorized"}),r.priority&&R.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white whitespace-nowrap shrink-0 ${r.priority==="high"?"bg-red-500":r.priority==="low"?"bg-green-500":"bg-yellow-500"}`,children:r.priority.toUpperCase()}),r.dueDate&&R.jsxs("span",{className:`px-2 py-1 text-xs rounded-full whitespace-nowrap shrink-0 ${new Date(r.dueDate)<new Date&&!r.completed?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:["📅 ",new Date(r.dueDate).toLocaleDateString()]}),!g&&R.jsxs("div",{className:"flex gap-1 shrink-0 ml-auto",children:[R.jsx(lt,{onClick:()=>w(!0),variant:"secondary",size:"sm",className:"px-2 py-1 text-sm cursor-pointer","aria-label":"View task details",children:"👁️"}),R.jsx(lt,{onClick:ae,variant:"secondary",size:"sm",className:"px-2 py-1 text-sm cursor-pointer","aria-label":"Edit task",children:"✏️"}),n&&R.jsx(lt,{onClick:ne,variant:"secondary",size:"sm",className:"px-2 py-1 text-sm cursor-pointer","aria-label":"Delete task",children:"🗑️"})]})]}),R.jsx(pO,{task:r,isOpen:T,onClose:()=>w(!1),onEdit:s,onUpdateDetails:o,categories:b}),R.jsx(yO,{task:r,isOpen:x,onClose:()=>B(!1),onSave:s||(()=>{}),onUpdateDetails:o||(()=>{}),categories:b})]})},_O=Ie.memo(vO),bO=r=>{const{attributes:e,listeners:n,setNodeRef:s,transform:o,transition:u,isDragging:f}=hO({id:r.task.id}),g={transform:yu.Transform.toString(o),transition:u,opacity:f?.5:1};return R.jsx("div",{ref:s,style:g,...e,children:R.jsx(_O,{...r,dragHandleProps:n,isDragging:f})})},EO=({tasks:r,filter:e,searchQuery:n,categoryFilter:s="",priorityFilter:o="",onToggle:u,onDelete:f,onEdit:g,onUpdateDetails:m,onReorder:p,selectedTasks:b=[],onSelectTask:T,showSelection:w=!1,categories:x})=>{const B=H2(fb(hp),fb(up,{coordinateGetter:gO})),K=Y=>{const{active:$,over:X}=Y;X&&$.id!==X.id&&p&&p($.id,X.id)},L=r.filter(Y=>{const $=(()=>{switch(e){case"active":return!Y.completed;case"completed":return Y.completed;default:return!0}})(),X=n===""||Y.text.toLowerCase().includes(n.toLowerCase()),ne=s===""||Y.category===s,ae=o===""||Y.priority===o;return $&&X&&ne&&ae});if(L.length===0){const Y=r.length===0?"No tasks yet. Add one above!":e==="active"?"No active tasks. Great job!":e==="completed"?"No completed tasks yet.":"No tasks match the current filter.";return R.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:R.jsx("p",{children:Y})})}return R.jsx(GN,{sensors:B,collisionDetection:G2,onDragEnd:K,children:R.jsx(iO,{items:L.map(Y=>Y.id),strategy:nO,children:R.jsx("div",{className:"space-y-2",children:L.map(Y=>R.jsx(bO,{task:Y,onToggle:u,onDelete:f,onEdit:g,onUpdateDetails:m,isSelected:b.includes(Y.id),onSelect:T,showSelection:w,categories:x},Y.id))})})})},TO=Ie.memo(EO),SO=({selectedTasks:r,onSelectAll:e,onClearSelection:n,onBulkComplete:s,onBulkUncomplete:o,onBulkDelete:u,onBulkCategoryChange:f,totalTasks:g,categories:m})=>{const[p,b]=j.useState("");j.useEffect(()=>{r.length===0&&b("")},[r.length]);const T=x=>{b(x),f(x)},w=()=>{b(""),n()};return R.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:R.jsxs("div",{className:"flex flex-col sm:flex-row m-auto flex-wrap items-center gap-2 text-sm text-blue-800 dark:text-blue-200",children:[R.jsxs("span",{className:"font-medium m-auto sm:m-0 sm:mr-0",children:[r.length," task",r.length!==1?"s":""," ","selected"]}),R.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 m-auto sm:ml-auto sm:m-0 w-full sm:w-auto",children:[R.jsx("div",{className:"w-full sm:w-auto sm:min-w-[140px]",children:R.jsxs("select",{value:p,onChange:x=>T(x.target.value),className:"w-full px-3 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[R.jsx("option",{value:"",disabled:!0,children:"Change Category"}),m.map(x=>R.jsx("option",{value:x.id,children:x.label},x.id))]})}),R.jsxs("div",{className:"flex flex-wrap gap-2 sm:flex-nowrap",children:[R.jsx(lt,{onClick:e,variant:"primary",size:"sm",disabled:r.length===g,className:"flex-1 sm:flex-none",children:"Select All"}),R.jsx(lt,{onClick:w,variant:"warning",size:"sm",className:"flex-1 sm:flex-none",children:"Clear"}),R.jsx(lt,{onClick:s,variant:"success",size:"sm",className:"flex-1 sm:flex-none",children:"Complete"}),R.jsx(lt,{onClick:o,variant:"info",size:"sm",className:"flex-1 sm:flex-none",children:"Uncomplete"}),R.jsx(lt,{onClick:u,variant:"danger",size:"sm",className:"flex-1 sm:flex-none",children:"Delete"})]})]})]})})},wO=({tasks:r,filter:e,searchQuery:n,categoryFilter:s,priorityFilter:o,selectedTasks:u,showBulkActions:f,onToggle:g,onDelete:m,onEdit:p,onUpdateDetails:b,onReorder:T,onSelectTask:w,onSelectAll:x,onClearSelection:B,onBulkComplete:K,onBulkUncomplete:L,onBulkDelete:Y,onBulkCategoryChange:$,categories:X})=>R.jsxs(R.Fragment,{children:[f&&R.jsx(SO,{selectedTasks:u,onSelectAll:x,onClearSelection:B,onBulkComplete:K,onBulkUncomplete:L,onBulkDelete:Y,onBulkCategoryChange:$,totalTasks:r.length,categories:X}),R.jsx(TO,{tasks:r,filter:e,searchQuery:n,categoryFilter:s,priorityFilter:o,onToggle:g,onDelete:m,onEdit:p,onUpdateDetails:b,onReorder:T,selectedTasks:u,onSelectTask:w,showSelection:f,categories:X})]}),AO=Ie.memo(wO),RO=({onAddTask:r,categories:e})=>{const[n,s]=j.useState(""),[o,u]=j.useState(""),[f,g]=j.useState(""),[m,p]=j.useState(""),[b,T]=j.useState(""),w=x=>{x.preventDefault();const B=n.trim();if(!B){T("Task text cannot be empty");return}if(B.length>2888){T("Task text must be less than 2888 characters");return}try{const K=f?new Date(f):void 0;r(B,o||"uncategorized",K,m||"low"),s(""),u(""),g(""),p(""),T("")}catch{T("Failed to add task")}};return R.jsxs("form",{onSubmit:w,className:"mb-4 ",children:[R.jsxs("div",{className:"flex flex-col gap-2 ",children:[R.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:R.jsx("textarea",{value:n,onChange:x=>s(x.target.value),placeholder:"Add a new task...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",maxLength:2888})}),R.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[R.jsxs("select",{value:o,onChange:x=>u(x.target.value),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full cursor-pointer",children:[R.jsx("option",{value:"",children:"--- Select Category ---"}),e.map(x=>R.jsx("option",{value:x.id,children:x.label},x.id))]}),R.jsxs("select",{value:m,onChange:x=>p(x.target.value),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full cursor-pointer",children:[R.jsx("option",{value:"",children:"--- Select Priority ---"}),lf.map(x=>R.jsx("option",{value:x.id,children:x.label},x.id))]}),R.jsx("input",{type:"date",value:f,onChange:x=>g(x.target.value),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full cursor-pointer"}),R.jsx(lt,{type:"submit",variant:"primary",size:"sm",className:"px-4 py-2 text-sm cursor-pointer whitespace-nowrap sm:w-auto w-full",children:"Add Task"})]})]}),b&&R.jsx("p",{className:"text-red-500 text-sm mt-1",children:b})]})},xO=({tasks:r})=>{const e=r.length,n=r.filter(m=>m.completed).length,s=e-n,o=e>0?Math.round(n/e*100):0,u=r.reduce((m,p)=>(p.category&&(m[p.category]||(m[p.category]={total:0,completed:0}),m[p.category].total++,p.completed&&m[p.category].completed++),m),{}),f=r.filter(m=>!m.category),g={total:f.length,completed:f.filter(m=>m.completed).length};return e===0?R.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 mb-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"📊 Task Statistics"}),R.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add some tasks to see your productivity stats!"})]}):R.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 mb-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"📊 Task Statistics"}),R.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e}),R.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tasks"})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n}),R.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:s}),R.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"})]}),R.jsxs("div",{className:"text-center",children:[R.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[o,"%"]}),R.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completion Rate"})]})]}),R.jsxs("div",{className:"mb-4",children:[R.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[R.jsx("span",{children:"Progress"}),R.jsxs("span",{children:[n,"/",e]})]}),R.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:R.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}),(Object.keys(u).length>0||g.total>0)&&R.jsxs("div",{children:[R.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📂 By Category"}),R.jsxs("div",{className:"space-y-2",children:[Object.entries(u).map(([m,p])=>{const b=["work","personal","shopping","health","learning"].find(w=>w===m)||m,T=Math.round(p.completed/p.total*100);return R.jsxs("div",{className:"flex items-center justify-between text-sm",children:[R.jsx("span",{className:"capitalize text-gray-600 dark:text-gray-400",children:b}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:[p.completed,"/",p.total]}),R.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:R.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-1 rounded-full",style:{width:`${T}%`}})}),R.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500 w-8",children:[T,"%"]})]})]},m)}),g.total>0&&R.jsxs("div",{className:"flex items-center justify-between text-sm",children:[R.jsx("span",{className:"capitalize text-gray-600 dark:text-gray-400",children:"Uncategorized"}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:[g.completed,"/",g.total]}),R.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:R.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-1 rounded-full",style:{width:`${g.total>0?Math.round(g.completed/g.total*100):0}%`}})}),R.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500 w-8",children:[g.total>0?Math.round(g.completed/g.total*100):0,"%"]})]})]})]})]})]})},CO=({categories:r,tasks:e,onAddCategory:n,onDeleteCategory:s,onRenameCategory:o,onUpdateCategoryColor:u,isCategoryNameTaken:f})=>{const[g,m]=j.useState(""),[p,b]=j.useState("#6b7280"),[T,w]=j.useState(null),[x,B]=j.useState(""),[K,L]=j.useState(""),[Y,$]=j.useState(""),[X,ne]=j.useState(null),ae=()=>{const D=g.trim();if(!D){$("Category name cannot be empty");return}if(f(D)){$("Category name already exists");return}n(D,p),m(""),b("#6b7280"),$("")},se=D=>{w(D.id),B(D.label),L(D.color)},C=()=>{const D=x.trim();if(!D){$("Category name cannot be empty");return}if(f(D,T)){$("Category name already exists");return}o(T,D),u(T,K),w(null),B(""),L(""),$("")},A=()=>{w(null),B(""),L(""),$("")},I=D=>{try{s(D,e),ne(null)}catch(V){$(V instanceof Error?V.message:"Failed to delete category")}},M=(D,V)=>{D.key==="Enter"?V():D.key==="Escape"&&(T?A():(m(""),$("")))};return R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4",children:[R.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center gap-2",children:"🏷️ Manage Categories"}),R.jsxs("div",{className:"mb-4",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[R.jsx("input",{type:"text",value:g,onChange:D=>m(D.target.value),onKeyDown:D=>M(D,ae),placeholder:"New category name...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",maxLength:50}),R.jsx("input",{type:"color",value:p,onChange:D=>b(D.target.value),className:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer bg-white dark:bg-gray-700",title:"Choose category color"}),R.jsx(lt,{onClick:ae,variant:"primary",size:"sm",className:"px-4 py-2 text-sm cursor-pointer whitespace-nowrap",children:"Add"})]}),Y&&R.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y})]}),R.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map(D=>R.jsx("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:T===D.id?R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"text",value:x,onChange:V=>B(V.target.value),onKeyDown:V=>M(V,C),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100",maxLength:50}),R.jsx("input",{type:"color",value:K,onChange:V=>L(V.target.value),className:"w-8 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer bg-white dark:bg-gray-600",title:"Choose category color"}),R.jsx(lt,{onClick:C,variant:"primary",size:"sm",className:"px-2 py-1 text-xs cursor-pointer",children:"Save"}),R.jsx(lt,{onClick:A,variant:"secondary",size:"sm",className:"px-2 py-1 text-xs cursor-pointer",children:"Cancel"})]}):R.jsxs(R.Fragment,{children:[R.jsx("span",{className:"inline-block w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:D.color}}),R.jsx("span",{className:"flex-1 text-sm text-gray-800 dark:text-gray-200",children:D.label}),R.jsx(lt,{onClick:()=>se(D),variant:"secondary",size:"sm",className:"px-2 py-1 text-xs cursor-pointer","aria-label":`Edit ${D.label}`,children:"✏️"}),X===D.id?R.jsxs(R.Fragment,{children:[R.jsx(lt,{onClick:()=>I(D.id),variant:"danger",size:"sm",className:"px-2 py-1 text-xs cursor-pointer",children:"Confirm"}),R.jsx(lt,{onClick:()=>ne(null),variant:"secondary",size:"sm",className:"px-2 py-1 text-xs cursor-pointer",children:"Cancel"})]}):R.jsx(lt,{onClick:()=>ne(D.id),variant:"secondary",size:"sm",className:"px-2 py-1 text-xs cursor-pointer","aria-label":`Delete ${D.label}`,children:"🗑️"})]})},D.id))}),r.length===0&&R.jsx("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No categories yet. Add one above!"})]})};function IO({onAuthSuccess:r}){const[e,n]=j.useState(!0),[s,o]=j.useState(""),[u,f]=j.useState(""),[g,m]=j.useState(!1),[p,b]=j.useState(""),T=async w=>{w.preventDefault(),m(!0),b("");try{e?await tD(Lh,s,u):await eD(Lh,s,u),r()}catch(x){b(x instanceof Error?x.message:"An error occurred")}finally{m(!1)}};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"max-w-md w-full space-y-8",children:[R.jsx("div",{children:R.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e?"Sign in to your account":"Create your account"})}),R.jsxs("form",{className:"mt-8 space-y-6",onSubmit:T,children:[R.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),R.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Email address",value:s,onChange:w=>o(w.target.value)})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),R.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Password",value:u,onChange:w=>f(w.target.value)})]})]}),p&&R.jsx("div",{className:"text-red-600 text-sm text-center",children:p}),R.jsx("div",{children:R.jsx(lt,{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:g?"Loading...":e?"Sign in":"Sign up"})}),R.jsx("div",{className:"text-center",children:R.jsx("button",{type:"button",onClick:()=>n(!e),className:"text-blue-600 hover:text-blue-500 text-sm",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}function DO(){const{user:r,loading:e,isAuthenticated:n}=XT(),{tasks:s,loading:o,addTask:u,toggleTask:f,deleteTask:g,editTask:m,updateTaskDetails:p,reorderTasks:b,bulkComplete:T,bulkUncomplete:w,bulkDelete:x,bulkCategoryChange:B,taskStats:K}=_2(),{categories:L,addCategory:Y,deleteCategory:$,renameCategory:X,updateCategoryColor:ne,isCategoryNameTaken:ae}=T2(),[se,C]=j.useState(()=>localStorage.getItem("todo-theme")==="dark"),[A,I]=j.useState("all"),[M,D]=j.useState(""),[V,N]=j.useState(""),[Be,Xe]=j.useState(""),[Z,oe]=j.useState([]),[de,Ae]=j.useState(!1);j.useEffect(()=>{se?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[se]),j.useEffect(()=>{localStorage.setItem("todo-theme",se?"dark":"light")},[se]);const k=()=>{C(!se)},re=async()=>{try{await sD(Lh)}catch(qe){console.error("Error signing out:",qe)}},ue=qe=>{oe(nt=>nt.includes(qe)?nt.filter(vt=>vt!==qe):[...nt,qe])},le=()=>{const qe=s.filter(nt=>{const vt=A==="all"||A==="active"&&!nt.completed||A==="completed"&&nt.completed,gn=M===""||nt.text.toLowerCase().includes(M.toLowerCase()),En=V===""||nt.category===V,rn=Be===""||nt.priority===Be;return vt&&gn&&En&&rn});oe(qe.map(nt=>nt.id))},me=()=>{oe([])},we=()=>{T(Z),oe([])},pe=()=>{x(Z),oe([])},dt=qe=>{B(Z,qe),oe([])},ke=()=>{w(Z),oe([])},Et=()=>{de?(Ae(!1),oe([])):Ae(!0)},Ne=()=>{I("all"),D(""),N(""),Xe(""),oe([]),Ae(!1)},nn=s.filter(qe=>{const nt=A==="all"||A==="active"&&!qe.completed||A==="completed"&&qe.completed,vt=M===""||qe.text.toLowerCase().includes(M.toLowerCase()),gn=V===""||qe.category===V,En=Be===""||qe.priority===Be;return nt&&vt&&gn&&En});return e||o?R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),R.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):n?R.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:R.jsxs("div",{className:"w-full mx-auto",children:[R.jsx(w2,{isDarkMode:se,onToggleDarkMode:k,onLogout:re,userEmail:r?.email}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-8",children:[R.jsx("div",{className:"md:col-span-4 lg:col-span-2 xl:col-span-1",children:R.jsx("div",{className:"sticky top-4 rounded-lg shadow-lg",children:R.jsx(xO,{tasks:s})})}),R.jsxs("div",{className:" md:col-span-4 lg:col-span-2 xl:col-span-1",children:[R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sticky top-4 mb-4",children:[R.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center gap-2",children:"➕ Add New Task"}),R.jsx(RO,{onAddTask:u,categories:L})]}),R.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sticky top-4",children:R.jsx(CO,{categories:L,tasks:s,onAddCategory:Y,onDeleteCategory:$,onRenameCategory:X,onUpdateCategoryColor:ne,isCategoryNameTaken:ae})})]}),R.jsx("div",{className:"md:col-span-4 lg:col-span-4 xl:col-span-2",children:R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[R.jsx(C2,{filter:A,onFilterChange:I,searchQuery:M,onSearchChange:D,categoryFilter:V,onCategoryFilterChange:N,priorityFilter:Be,onPriorityFilterChange:Xe,taskCounts:K,showBulkActions:de,onToggleBulkActions:Et,onClearFilters:Ne,categories:L}),R.jsx(AO,{tasks:nn,filter:A,searchQuery:M,categoryFilter:V,priorityFilter:Be,selectedTasks:Z,showBulkActions:de,onAddTask:u,onToggle:f,onDelete:g,onEdit:m,onUpdateDetails:p,onReorder:b,onSelectTask:ue,onSelectAll:le,onClearSelection:me,onBulkComplete:we,onBulkUncomplete:ke,onBulkDelete:pe,onBulkCategoryChange:dt,categories:L})]})})]})]})}):R.jsx(IO,{onAuthSuccess:()=>{}})}class NO extends Ie.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}resetError=()=>{this.setState({hasError:!1,error:void 0})};render(){if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return R.jsx(e,{error:this.state.error,resetError:this.resetError})}return R.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4",children:R.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[R.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),R.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Something went wrong"}),R.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We encountered an unexpected error. Please try refreshing the page."}),R.jsx("button",{onClick:this.resetError,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Try Again"}),!1]})})}return this.props.children}}Jw.createRoot(document.getElementById("root")).render(R.jsx(j.StrictMode,{children:R.jsx(NO,{children:R.jsx(DO,{})})}));
